<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Web Feature Service Implementation Specification</title><link xmlns="" href="ogc.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.60.1" name="generator" /></head><body><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="N10001" />Web Feature Service Implementation Specification</h2></div><div xmlns=""><h3 class="corpauthor">OpenGIS Consortium Inc.</h3></div><div><div class="authorgroup"><h4 class="editedby">Edited by</h4><h3 class="editor"><span class="firstname">Panagiotis</span> <span xmlns="" class="surname">A. Vretanos</span></h3><div xmlns="" class="author"><h3 class="author"><span class="firstname">Allan</span> <span xmlns="" class="othername">adoyle@intl-interfaces.com</span> <span xmlns="" class="surname">Doyle</span></h3><div xmlns="" class="affiliation"><span class="orgname">International Interfaces, Inc.<br /></span></div></div><div class="author"><h3 class="author"><span class="firstname">Edric</span> <span xmlns="" class="othername">ekeighan@cubewerx.com</span> <span xmlns="" class="surname">Keighan</span></h3><div xmlns="" class="affiliation"><span class="orgname">CubeWerx Inc.<br /></span></div></div><div class="author"><h3 class="author"><span class="firstname">Jonathan</span> <span xmlns="" class="othername">jrclark@intergraph.com</span> <span xmlns="" class="surname">Clark</span></h3><div xmlns="" class="affiliation"><span class="orgname">Intergraph Corp.<br /></span></div></div><div class="author"><h3 class="author"><span class="firstname">Serge</span> <span xmlns="" class="othername">Serge.Margoulies@ionicsoft.com</span> <span xmlns="" class="surname">Margoulies</span></h3><div xmlns="" class="affiliation"><span class="orgname">IONIC Software<br /></span></div></div><div class="author"><h3 class="author"><span class="firstname">Peter</span> <span xmlns="" class="othername">peterw@lsl.co.uk</span> <span xmlns="" class="surname">Woodsford</span></h3><div xmlns="" class="affiliation"><span class="orgname">Laser-Scan Ltd.<br /></span></div></div></div></div><div><p class="releaseinfo">1.0.0</p></div><div><p class="copyright">Copyright © 1999, 2000, 2001, 2002 CubeWerx Inc.</p></div><div><p class="copyright">Copyright © 1999, 2000, 2001, 2002 Intergraph Corp.</p></div><div><p class="copyright">Copyright © 1999, 2000, 2001, 2002 IONIC Software s.a.</p></div><div><p class="copyright">Copyright © 1999, 2000, 2001, 2002 Laser-Scan Limited</p></div><div><div class="legalnotice"><p><a id="N4000A7ai" />WARNING: The Open GIS Consortium (OGC) releases this specification
      to the public without warranty. It is subject to change without notice.
      This specification is currently under active revision by the OGC
      Technical Committee.</p><p><a id="N4000AAai" />Requests for clarification and/or revision can be made by
      contacting the OGC at <tt class="email">&lt;<a href="mailto:revisions@opengis.org">revisions@opengis.org</a>&gt;</tt>.</p><p><a id="N4000B0ai" />Permission to use, copy, and distribute this document in any
      medium for any purpose and without fee or royalty is hereby granted,
      provided that you include the above list of copyright holders and the
      entire text of this NOTICE.</p><p><a id="N4000B3ai" />We request that authorship attribution be provided in any
      software, documents, or other items or products that you create pursuant
      to the implementation of the contents of this document, or any portion
      thereof.</p><p><a id="N4000B6ai" />No right to create modifications or derivatives of OGC documents
      is granted pursuant to this license. However, if additional requirements
      (as documented in the Copyright FAQ at <a ="" target="_top">http://www.opengis.org/legal/ipr_faq.htm</a>)
      are satisfied, the right to create modifications or derivatives is
      sometimes granted by the OGC to individuals complying with those
      requirements.</p><p><a id="N4000BDai" />THIS DOCUMENT IS PROVIDED "AS IS," AND COPYRIGHT HOLDERS
      MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING,
      BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
      PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE
      DOCUMENT ARE SUITABLE FOR ANY PURPOSE; NOR THAT THE IMPLEMENTATION OF
      SUCH CONTENTS WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS,
      TRADEMARKS OR OTHER RIGHTS.</p><p><a id="N4000C0ai" />COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT,
      SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE DOCUMENT
      OR THE PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS THEREOF.</p><p><a id="N4000C3ai" />The name and trademarks of copyright holders may NOT be used in
      advertising or publicity pertaining to this document or its contents
      without specific, written prior permission. Title to copyright in this
      document will at all times remain with copyright holders.</p><p><a id="N4000C6ai" />RESTRICTED RIGHTS LEGEND. Use, duplication, or disclosure by
      government is subject to restrictions as set forth in subdivision
      (c)(1)(ii) of the Right in Technical Data and Computer Software Clause
      at DFARS 252.227.7013</p><p><a id="N4000C9ai" />
      <span class="trademark">OpenGIS</span>® is a trademark
      or registered trademark of Open GIS Consortium, Inc. in the United
      States and in other countries.</p><p><a id="N4000D0ai" />This document does not represent a commitment to implement any
      portion of this specification in any company's products.</p><p><a id="N4000D3ai" />OGC® Legal, IPR and Copyright Statements are found at <a ="" target="_top">http://www.opengis.org/legal/ipr.htm</a>
    </p><p><a id="N4000DAai" />The companies listed below have granted the Open GIS Consortium,
      Inc. (OGC) a nonexclusive, royalty-free, paid up, worldwide license to
      copy and distribute this document and to modify this document and
      distribute copies of the modified version.</p></div></div><div><div class="revhistory"><table summary="Revision history" width="100%" border="1"><tr><th colspan="2" valign="top" align="left"><b>Revision History</b></th></tr><tr><td align="left">Revision 1.0.0</td><td align="left">2002-09-19</td></tr><tr><td colspan="2" align="left">Address RFC comments.</td></tr><tr><td align="left">Revision 0.0.14</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Reformat document in ISO format; Relate document to OGC
        abstract specification (specifically Topic 12 / 19119); Include rules
        for property naming; Use XPath expressions for referencing properties
        in complex attributes; More synchronization between WMS and WFS with
        respect to keyword-value pair encoding; Add annex for conformance
        testing.</td></tr><tr><td align="left">Revision 0.0.13</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Prepare document for RFC submission; include XML-Schema
        encoding of WFS interfaces; align URL-encoding with BSM</td></tr><tr><td align="left">Revision 0.0.12</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Add complete list of contributors; align with latest GML
        2.0 draft specification; add lock controls and versioning.</td></tr><tr><td align="left">Revision 0.0.11</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Correct typographical errors.</td></tr><tr><td align="left">Revision 0.0.10</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Server FeatureId and Filter elements into their own
        specification documents.</td></tr><tr><td align="left">Revision 0.0.9</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Review U.S.Census revisions</td></tr><tr><td align="left">Revision 0.0.8</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Review Galdos revisions</td></tr><tr><td align="left">Revision 0.0.7</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Review LaserScan revisions</td></tr><tr><td align="left">Revision 0.0.6</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Remove "Small XML-Schema Description Language"</td></tr><tr><td align="left">Revision 0.0.5</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Define "Small XML-Schema Description Language"</td></tr><tr><td align="left">Revision 0.0.4</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Use GML2 with application defined schema using XML-Schema.
        Remove dependency on featureType attribute.</td></tr><tr><td align="left">Revision 0.0.3</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Define GET request semantics.</td></tr><tr><td align="left">Revision 0.0.2</td><td align="left">?</td></tr><tr><td colspan="2" align="left">Update &lt;FeatureId&gt; element to include
        &lt;Scope&gt;. Make handle attribute #IMPLIED. Add functions on
        properties and literals to &lt;Filter&gt;.</td></tr><tr><td align="left">Revision 0.0.1</td><td align="left">?</td></tr><tr><td colspan="2" align="left">First version derived from the OpenGIS Transaction Encoding
        Specification [3] and the Spatial Object Transfer Format (SOTF) [4]
        specification.</td></tr></table></div></div></div><div /><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>1. <a href="#N400001i">Preface</a></dt><dt>2. <a href="#N400001ii">Submitting organizations</a></dt><dt>3. <a href="#N400001iii">Submission contact points</a></dt><dt>4. <a href="#N400001v">Changes to the OpenGIS Abstract Specification</a></dt><dt>5. <a href="#N400001vi">Future work</a></dt><dt>6. <a href="#N400001vii">Forward</a></dt><dt>7. <a href="#N400001viii">Introduction</a></dt><dt>8. <a href="#Scope">Scope</a></dt><dd><dl><dt>8.1. <a href="#N40000D1">Geographic features</a></dt><dt>8.2. <a href="#N40001A1">Processing requests</a></dt><dt>8.3. <a href="#N4000361">Operations</a></dt></dl></dd><dt>9. <a href="#Conformance">Conformance</a></dt><dt>10. <a href="#NormativeReferences">Normative references</a></dt><dt>11. <a href="#TermsAndDefinitions">Terms and definitions</a></dt><dt>12. <a href="#Conventions">Conventions</a></dt><dd><dl><dt>12.1. <a href="#N4000075">Normative verbs</a></dt><dt>12.2. <a href="#N4000385">Abbreviated terms</a></dt><dt>12.3. <a href="#N4000C65">Use of examples</a></dt></dl></dd><dt>13. <a href="#BasicServiceElements">Basic service elements</a></dt><dd><dl><dt>13.1. <a href="#N4000076">Introduction</a></dt><dt>13.2. <a href="#N4000106">Version numbering and negotiation</a></dt><dd><dl><dt>13.2.1. <a href="#N4000156">Version number form</a></dt><dt>13.2.2. <a href="#N40001E6">Version changes</a></dt><dt>13.2.3. <a href="#N4000376">Appearance in requests and in service metadata</a></dt></dl></dd><dt>13.3. <a href="#N4000A16">General HTTP request rules</a></dt><dd><dl><dt>13.3.1. <a href="#N4000A66">Introduction</a></dt><dt>13.3.2. <a href="#N4000B66">HTTP GET</a></dt><dt>13.3.3. <a href="#N4001026">HTTP POST</a></dt></dl></dd><dt>13.4. <a href="#N4001106">General HTTP response rules</a></dt><dt>13.5. <a href="#N4001386">Request encoding</a></dt><dt>13.6. <a href="#N40019C6">Namespaces</a></dt></dl></dd><dt>14. <a href="#CommonElements">Common elements</a></dt><dd><dl><dt>14.1. <a href="#N4000077">Feature identifier</a></dt><dd><dl><dt>14.1.1. <a href="#N4000157">Globally unique identifiers (Informative)</a></dt></dl></dd><dt>14.2. <a href="#N40002B7">Feature state</a></dt><dt>14.3. <a href="#N40003B7">Property names</a></dt><dt>14.4. <a href="#N40006B7">Property references</a></dt><dd><dl><dt>14.4.1. <a href="#N4000707">Introduction</a></dt><dt>14.4.2. <a href="#N40007D7">Xpath expressions</a></dt></dl></dd><dt>14.5. <a href="#N4001557">&lt;Native&gt; element</a></dt><dt>14.6. <a href="#N4001917">Filter</a></dt><dt>14.7. <a href="#N40019E7">Exception reporting</a></dt><dt>14.8. <a href="#N4001EC7">Common XML attributes</a></dt><dd><dl><dt>14.8.1. <a href="#N4001F17">Version attribute</a></dt><dt>14.8.2. <a href="#N4002067">Service attribute</a></dt><dt>14.8.3. <a href="#N40021B7">Handle attribute</a></dt></dl></dd></dl></dd><dt>15. <a href="#DescribeFeatureType">DescribeFeatureType operation</a></dt><dd><dl><dt>15.1. <a href="#N4000078">Introduction</a></dt><dt>15.2. <a href="#N4000148">Request</a></dt><dt>15.3. <a href="#N40005F8">Response</a></dt><dd><dl><dt>15.3.1. <a href="#N40007A8">Supporting multiple namespaces</a></dt></dl></dd><dt>15.4. <a href="#N4000948">Exception</a></dt><dt>15.5. <a href="#N4000A18">Examples</a></dt></dl></dd><dt>16. <a href="#GetFeature">GetFeature Operation</a></dt><dd><dl><dt>16.1. <a href="#N4000079">Introduction</a></dt><dt>16.2. <a href="#N4000189">Request</a></dt><dt>16.3. <a href="#N4000B09">Response</a></dt><dt>16.4. <a href="#N40011B9">Exception</a></dt><dt>16.5. <a href="#N4001289">Examples</a></dt></dl></dd><dt>17. <a href="#LockFeature">LockFeature operation</a></dt><dd><dl><dt>17.1. <a href="#N40000710">Introduction</a></dt><dt>17.2. <a href="#N40002F10">Request</a></dt><dd><dl><dt>17.2.1. <a href="#N40003410">Schema definition</a></dt><dt>17.2.2. <a href="#N40008A10">State machine notation from UML</a></dt><dt>17.2.3. <a href="#N4000A110">State machine for WFS locking</a></dt></dl></dd><dt>17.3. <a href="#N4000C010">Response</a></dt><dt>17.4. <a href="#N40010510">Exception</a></dt><dt>17.5. <a href="#N40011910">Examples</a></dt></dl></dd><dt>18. <a href="#Transaction">Transaction operation</a></dt><dd><dl><dt>18.1. <a href="#N40000711">Introduction</a></dt><dt>18.2. <a href="#N40002311">Request</a></dt><dd><dl><dt>18.2.1. <a href="#N40002811">Schema definition</a></dt><dt>18.2.2. <a href="#N40003811">Attribute descriptions</a></dt><dt>18.2.3. <a href="#N40009711">&lt;Transaction&gt; element</a></dt><dt>18.2.4. <a href="#Transaction.Insert">&lt;Insert&gt; element</a></dt><dt>18.2.5. <a href="#Transaction.Update">&lt;Update&gt; element</a></dt><dt>18.2.6. <a href="#Transaction.Delete">&lt;Delete&gt; element</a></dt></dl></dd><dt>18.3. <a href="#N4001C111">Response</a></dt><dt>18.4. <a href="#N40026711">Exception</a></dt><dt>18.5. <a href="#N40028F11">Examples</a></dt></dl></dd><dt>19. <a href="#GetCapabilities">GetCapabilities</a></dt><dd><dl><dt>19.1. <a href="#N40000712">Introduction</a></dt><dt>19.2. <a href="#N40001312">Request</a></dt><dt>19.3. <a href="#N40003112">Response</a></dt><dd><dl><dt>19.3.1. <a href="#N40003612">Response schema</a></dt><dt>19.3.2. <a href="#N40004312">Capabilities</a></dt><dt>19.3.3. <a href="#N40008D12">Service section</a></dt><dt>19.3.4. <a href="#N40010E12">Capabilities Section</a></dt><dt>19.3.5. <a href="#N4001AE12">FeatureTypeList section</a></dt></dl></dd><dt>19.4. <a href="#N4002B912">Exception</a></dt><dt>19.5. <a href="#N4002C612">Examples</a></dt></dl></dd><dt>20. <a href="#KVP">Keyword-value pair encoding</a></dt><dd><dl><dt>20.1. <a href="#N40000713">Introduction</a></dt><dd><dl><dt>20.1.1. <a href="#N40000F13">A note about the examples</a></dt></dl></dd><dt>20.2. <a href="#N40003313">Request parameter rules</a></dt><dd><dl><dt>20.2.1. <a href="#N40003813">Parameter ordering and case</a></dt><dt>20.2.2. <a href="#N40006313">Parameter lists</a></dt></dl></dd><dt>20.3. <a href="#KVP.Common">Common request parameters</a></dt><dd><dl><dt>20.3.1. <a href="#N40009413">Version parameter</a></dt><dt>20.3.2. <a href="#N4000A113">Request parameter</a></dt><dt>20.3.3. <a href="#N4000AE13">Bounding box</a></dt><dt>20.3.4. <a href="#N40010F13">Vendor-specific parameters</a></dt></dl></dd><dt>20.4. <a href="#N40014513">Common parameters</a></dt><dt>20.5. <a href="#N40020113">Response</a></dt><dt>20.6. <a href="#N40020A13">Exceptions</a></dt><dt>20.7. <a href="#N40021313">Operations</a></dt><dd><dl><dt>20.7.1. <a href="#N40021813">Introduction</a></dt><dt>20.7.2. <a href="#KVP.DescribeFeatureType">DescribeFeatureType operation</a></dt><dd><dl><dt>20.7.2.1. <a href="#N40022613">Request</a></dt><dt>20.7.2.2. <a href="#N40027613">Examples</a></dt></dl></dd><dt>20.7.3. <a href="#KVP.GetFeature">GetFeature &amp; GetFeatureWithLock operation</a></dt><dd><dl><dt>20.7.3.1. <a href="#N40029A13">Request</a></dt><dt>20.7.3.2. <a href="#N40034713">Examples</a></dt></dl></dd><dt>20.7.4. <a href="#KVP.LockFeature">LockFeature operation</a></dt><dd><dl><dt>20.7.4.1. <a href="#N40041913">Request</a></dt><dt>20.7.4.2. <a href="#N4004B813">Examples</a></dt></dl></dd><dt>20.7.5. <a href="#KVP.Transaction">Transaction</a></dt><dd><dl><dt>20.7.5.1. <a href="#N4004F713">Request</a></dt><dt>20.7.5.2. <a href="#N40059D13">Examples</a></dt></dl></dd><dt>20.7.6. <a href="#KVP.GetCapabilities">GetCapabilities Operation</a></dt><dd><dl><dt>20.7.6.1. <a href="#N4005CD13">Request</a></dt><dt>20.7.6.2. <a href="#N40060013">Response</a></dt></dl></dd></dl></dd></dl></dd><dt>21. <a href="#SchemaDefinitions">XML Schema definitions (Normative)</a></dt><dd><dl><dt>21.1. <a href="#N400007A">Introduction</a></dt><dt>21.2. <a href="#N40001CA">OGC-exception.xsd</a></dt><dt>21.3. <a href="#N400028A">WFS-basic.xsd</a></dt><dt>21.4. <a href="#N400034A">WFS-transaction.xsd</a></dt><dt>21.5. <a href="#N400040A">WFS-capabilities.xsd</a></dt></dl></dd><dt>22. <a href="#ConformanceTests">Conformance tests (normative)</a></dt><dt><a href="#N11433">Glossary</a></dt><dt><a href="#N11458">Bibliography</a></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001i" />1. Preface</h2></div></div><div xmlns="" /></div><p><a id="N400007i" />One important achievement of the Open GIS Consortium
  (OGC) Web Mapping Test bed (WMT1) initiative was the development of a large
  consensus around open web based interface specifications. Such
  specifications allow software vendors to implement their products using
  interoperable interfaces and provide end-users a larger pool of
  interoperable web based tools for geodata access and related geoprocessing
  services.</p><p><a id="N40000Ai" />During the OGC WMT1 project, two web based draft
  specification documents were developed:</p><div class="orderedlist"><ol type="1"><li><p><a id="N400011i" />OpenGIS Web Map Service Implementation Specification
      [1]</p></li><li><p><a id="N400017i" />OpenGIS Geography Markup Language (GML) 2.0
      Implementation Specification</p></li></ol></div><p><a id="N40001Ci" />The first document specifies web interfaces based on a
  model supporting general request and response rules using Hypertext Transfer
  Protocol (HTTP) and the eXtensible Markup Language (XML). Web Map Server
  products have been developed as the result of the adoption by OGC of the
  OpenGIS Web Map Service Implementation Specification [1]. The interfaces
  defined in that specification include <span class="emphasis"><em>GetCapabilities</em></span>,
  <span class="emphasis"><em>GetMap</em></span> and <span class="emphasis"><em>GetFeatureInfo</em></span>. The
  second document describes an encoding specification for geodata in XML. The
  encoding described in that specification is intended to enable the transport
  and storage of geographic information in XML including both properties and
  the geometry of geographic features.</p><p><a id="N400028i" />This document (OpenGIS Web Feature Service
  Implementation Specification) takes the next logical step and proposes
  interfaces for describing data manipulation operations on geographic
  features using HTTP as the distributed computing platform. Data manipulation
  operations include the ability to:</p><div class="orderedlist"><ol type="1"><li><p><a id="N40002Fi" />Create a new feature instance</p></li><li><p><a id="N400035i" />Delete a feature instance</p></li><li><p><a id="N40003Bi" />Update a feature instance</p></li><li><p><a id="N400041i" />Get or Query features based on spatial and
      non-spatial constraints</p></li></ol></div><p><a id="N400046i" />A Web Feature Service (WFS) request consists of a
  description of query or data transformation operations that are to be
  applied to one or more features. The request is generated on the client and
  is posted to a web feature server using HTTP. The web feature server then
  reads and (in a sense) executes the request.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001ii" />2. Submitting organizations</h2></div></div><div xmlns="" /></div><p><a id="N400007ii" />The following companies submitted this specification to the OGC as a
    Request for Comment:</p><div class="literallayout"><p><span style="white-space: pre;">
    <span class="bold"><b>CubeWerx Inc.</b></span>
Edric Keighan
200 Rue Montcalm, Suite R-13
Hull, Quebec
Canada  J8Y 3B5
<tt class="email">&lt;<a href="mailto:ekeighan@cubewerx.com">ekeighan@cubewerx.com</a>&gt;</tt>
    <span class="bold"><b>Intergraph Corp.</b></span>
Jonathan Clark
1881 Campus Commons Drive
Reston, VA 20191
U.S.A
<tt class="email">&lt;<a href="mailto:jrclark@intergraph.com">jrclark@intergraph.com</a>&gt;</tt>
    <span class="bold"><b>IONIC Software</b></span>
Serge Margoulies
128 Avenue de l'Observatoire
B-4000 LIEGE
Belgium
<tt class="email">&lt;<a href="mailto:Serge.Margoulies@ionicsoft.com">Serge.Margoulies@ionicsoft.com</a>&gt;</tt>
    <span class="bold"><b>Laser-Scan Ltd.</b></span>
Peter Woodsford
101 Cambridgbe Science Park
Milton Road
Cambridge CB4 0FY
U.K.
<tt class="email">&lt;<a href="mailto:peterw@lsl.co.uk">peterw@lsl.co.uk</a>&gt;</tt>
  </span></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001iii" />3. Submission contact points</h2></div></div><div xmlns="" /></div><p><a id="N400007iii" />All questions regarding this submission should be directed to the
    Editor or to the WWW Mapping SIG chair:</p><p><a id="N40000Aiii" />Panagiotis A. Vretanos CubeWerx, Inc. 200 Rue Montcalm, Suite R-13
    Hull, Quebec J8Y 3B5 CANADA +1 416 701 1985 <tt class="email">&lt;<a href="mailto:pvretano@cubewerx.com">pvretano@cubewerx.com</a>&gt;</tt>
  </p><p><a id="N400010iii" />Allan Doyle (WWW Mapping SIG Chair) International Interfaces, Inc.
    948 Great Plain Ave. PMB-182 Needham, MA 02492 USA +1 781 433 2695
    <tt class="email">&lt;<a href="mailto:adoyle@intl-interfaces.com">adoyle@intl-interfaces.com</a>&gt;</tt>
  </p><p><a id="N400016iii" />
    <span class="bold"><b>Additional contributors</b></span>
  </p><div class="literallayout"><p><span style="white-space: pre;">Rob Atkinson (Social Change Online) <tt class="email">&lt;<a href="mailto:rob@socialchange.net.au">rob@socialchange.net.au</a>&gt;</tt>
Craig Bruce (CubeWerx) <tt class="email">&lt;<a href="mailto:csbruce@cubwerx.com">csbruce@cubwerx.com</a>&gt;</tt>
Jonathan Clark (Intergraph) <tt class="email">&lt;<a href="mailto:jrclark@intergraph.com">jrclark@intergraph.com</a>&gt;</tt>
Adrian Cuthbert (SpotOn MOBILE) <tt class="email">&lt;<a href="mailto:adrian@spotonmobile.com">adrian@spotonmobile.com</a>&gt;</tt>
Paul Daisey (U.S. Census) <tt class="email">&lt;<a href="mailto:pdaisey@geo.census.gov">pdaisey@geo.census.gov</a>&gt;</tt>
John Davidson <tt class="email">&lt;<a href="mailto:georef@erols.co">georef@erols.co</a>&gt;</tt>
John D. Evans (NASA) <tt class="email">&lt;<a href="mailto:john.evans@gsfc.nasa.gov">john.evans@gsfc.nasa.gov</a>&gt;</tt>
Ron Fresne (ObjectFX) <tt class="email">&lt;<a href="mailto:RonF@ObjectFX.com">RonF@ObjectFX.com</a>&gt;</tt>
Ignacio Guerrero (Intergraph) <tt class="email">&lt;<a href="mailto:IGuerrer@ingr.com">IGuerrer@ingr.com</a>&gt;</tt>
John Herring (Oracle Corp.) <tt class="email">&lt;<a href="mailto:John.Herring@oracle.com">John.Herring@oracle.com</a>&gt;</tt>
Sandra Johnson (Mapinfo) <tt class="email">&lt;<a href="mailto:Sandra_Johnson@mapinfo.com">Sandra_Johnson@mapinfo.com</a>&gt;</tt>
Edric Keighan (CubeWerx) <tt class="email">&lt;<a href="mailto:ekeighan@cubewerx.com">ekeighan@cubewerx.com</a>&gt;</tt>
Ron Lake (Galdos Systems Inc.) <tt class="email">&lt;<a href="mailto:rlake@galdosinc.com">rlake@galdosinc.com</a>&gt;</tt>
Jeff Lansing (Polexis) <tt class="email">&lt;<a href="mailto:jeff@polexis.com">jeff@polexis.com</a>&gt;</tt>
Seb Lessware (Laser-Scan Ltd.) <tt class="email">&lt;<a href="mailto:sebl@lsl.co.uk">sebl@lsl.co.uk</a>&gt;</tt>
Marwa Mabrouk (ESRI) <tt class="email">&lt;<a href="mailto:mmabrouk@esri.com">mmabrouk@esri.com</a>&gt;</tt>
Serge Margoulies (Ionic) <tt class="email">&lt;<a href="mailto:Serge.Margoulies@ionicsoft.com">Serge.Margoulies@ionicsoft.com</a>&gt;</tt>
Brian May (CubeWerx) <tt class="email">&lt;<a href="mailto:bmay@cubewerx.com">bmay@cubewerx.com</a>&gt;</tt>
Richard Martell (Galdos Systems Inc.) <tt class="email">&lt;<a href="mailto:rmartell@galdosinc.com">rmartell@galdosinc.com</a>&gt;</tt>
Aleksander Milanovic (Glados Systems Inc.) <tt class="email">&lt;<a href="mailto:amilanovic@gladosinc.com">amilanovic@gladosinc.com</a>&gt;</tt>
Dimitri Monie (Ionic) <tt class="email">&lt;<a href="mailto:dimitri.monie@ionicsoft.com">dimitri.monie@ionicsoft.com</a>&gt;</tt>
Paul Pilkington (Laser-Scan Ltd.) <tt class="email">&lt;<a href="mailto:paulpi@lsiva.com">paulpi@lsiva.com</a>&gt;</tt>
Keith Pomakis (CubeWerx) <tt class="email">&lt;<a href="mailto:pomakis@cubewerx.com">pomakis@cubewerx.com</a>&gt;</tt>
Christopher C. Pried (Polexis) <tt class="email">&lt;<a href="mailto:ccp@polexis.com">ccp@polexis.com</a>&gt;</tt>
Lou Reich (NASA) <tt class="email">&lt;<a href="mailto:louis.i.reich@gsfc.nasa.gov">louis.i.reich@gsfc.nasa.gov</a>&gt;</tt>
Carl Reed (Open GIS Consortium) <tt class="email">&lt;<a href="mailto:creediii@mindspring.com">creediii@mindspring.com</a>&gt;</tt>
Martin Schaefer (Cadcorp Ltd.) <tt class="email">&lt;<a href="mailto:martins@cadcorpdev.co.uk">martins@cadcorpdev.co.uk</a>&gt;</tt>
Lacey T. Sharpe (Intergraph Corp.) <tt class="email">&lt;<a href="mailto:ltsharpe@ingr.com">ltsharpe@ingr.com</a>&gt;</tt>
Raj R. Singh (Syncline Inc.) <tt class="email">&lt;<a href="mailto:rs@syncline.com">rs@syncline.com</a>&gt;</tt>
Bernard Snyers (Ionic) <tt class="email">&lt;<a href="mailto:Bernard.Snyers@ionicsoft.com">Bernard.Snyers@ionicsoft.com</a>&gt;</tt>
Daniel Specht (TEC) <tt class="email">&lt;<a href="mailto:specht@tec.army.mil">specht@tec.army.mil</a>&gt;</tt>
James T. Stephens (Lockheed Martin) <tt class="email">&lt;<a href="mailto:james.t.stephens@lmco.com">james.t.stephens@lmco.com</a>&gt;</tt>
Glenn Stowe (CubeWerx) <tt class="email">&lt;<a href="mailto:gstowe@cubwerx.com">gstowe@cubwerx.com</a>&gt;</tt>
Tom Strickland (Byers) <tt class="email">&lt;<a href="mailto:tom.strickland@byers.com">tom.strickland@byers.com</a>&gt;</tt>
Shuichi Takino (Dawn Corp.) <tt class="email">&lt;<a href="mailto:takino@dawn-corp.co.jp">takino@dawn-corp.co.jp</a>&gt;</tt>
Milan Trninic (Galdos Systems Inc.) <tt class="email">&lt;<a href="mailto:mtrninic@galdosinc.com">mtrninic@galdosinc.com</a>&gt;</tt>
John T. Vincent (Intergraph Corp.) <tt class="email">&lt;<a href="mailto:jtvincen@intergraph.com">jtvincen@intergraph.com</a>&gt;</tt>
Peter Woodsford (Laser-Scan Ltd.) <tt class="email">&lt;<a href="mailto:peterw@lsl.co.uk">peterw@lsl.co.uk</a>&gt;</tt>
Arliss Whitesize (BAE Systems) <tt class="email">&lt;<a href="mailto:Arliss.Whiteside@baesystems.com">Arliss.Whiteside@baesystems.com</a>&gt;</tt>
Nami Yamashita (Dawn Corp.) <tt class="email">&lt;<a href="mailto:yamashita@dawn-corp.co.jp">yamashita@dawn-corp.co.jp</a>&gt;</tt>
  </span></p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001v" />4. Changes to the OpenGIS Abstract Specification</h2></div></div><div xmlns="" /></div><p><a id="N400007v" />No further revisions to the OGC Abstract Specification are required.
    The revisions previously approved for Topic 12, "Service
    Architecture," including definitions of the terms "operation",
    "interface" and "service" are relevant to and sufficient
    for this specification. The essential operation of a web feature service,
    as a feature access and management service, is described in section 8.3.3
    of Topic 12.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001vi" />5. Future work</h2></div></div><div xmlns="" /></div><p><a id="N400007vi" />Further work is desirable in the next version on the following work
    items.</p><div class="orderedlist"><ol type="1"><li><p><a id="N40000Evi" />XLink traversal capabilities,</p></li><li><p><a id="N400014vi" />UML models,</p></li><li><p><a id="N40001Avi" />Change the abstract specification to include complex features.</p></li><li><p><a id="N400020vi" />Develop specific conformance tests.</p></li><li><p><a id="N400026vi" />GML3 integration.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001vii" />6. Forward</h2></div></div><div xmlns="" /></div><p><a id="N400007vii" />Attention is drawn to the possibility that some of the elements of
    this standard may be the subject of patent rights. Open GIS Consortium
    Inc. shall not be held responsible for identifying any or all such patent
    rights. However, to date, no such rights have been claimed or identified.</p><p><a id="N40000Avii" />This version of the specification cancels and replaces all previous
    versions.</p><p><a id="N40000Dvii" />
    <span class="bold"><b>Normative annexes</b></span>
  </p><p><a id="N400014vii" />Annexes A and B are normative.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="N400001viii" />7. Introduction</h2></div></div><div xmlns="" /></div><p><a id="N400007viii" />The OGC Web Map Service allows a client to overlay map images for
    display served from multiple Web Map Services on the Internet. In a
    similar fashion, the OGC Web Feature Service allows a client to retrieve
    geospatial data encoded in Geography Markup Language (GML) from multiple
    Web Feature Services.</p><p><a id="N40000Aviii" />The requirements for a Web Feature Service are:</p><div class="orderedlist"><ol type="1"><li><p><a id="N400011viii" />The interfaces must be defined in XML.</p></li><li><p><a id="N400017viii" />GML must be used to express features within the interface.</p></li><li><p><a id="N40001Dviii" />At a minimum a WFS must be able to present features using GML.</p></li><li><p><a id="N400023viii" />The predicate or filter language will be defined in XML and be
        derived from CQL as defined in the OpenGIS Catalogue Interface
        Implementation Specification.</p></li><li><p><a id="N400029viii" />The datastore used to store geographic features should be opaque
        to client applications and their only view of the data should be
        through the WFS interface.</p></li><li><p><a id="N40002Fviii" />The use of a subset of XPath expressions for referencing
        properties.</p></li></ol></div><p><a id="N400034viii" />The purpose of this document is to describe the Web Feature Service
    interface, as illustrated in figure 1.</p><div class="figure"><a id="N1029A" /><p class="title"><b>Figure 1. Figure 1 - Web feature service</b></p><div xmlns="" class="mediaobject"><img src="images/WfsIntroduction.gif" alt="Figure 1 - Web feature service" /></div></div><p><a id="N400046viii" />This document is derived from a large consensus among its
    contributors and takes its roots from two independently proposed
    specifications titled OGC Transaction Encoding Specification [3] and
    Spatial Object Transfer Format (SOTF) [4]. In addition a number of
    concepts, common among all OGC services, are taken from the Web Map
    Service Implementation Specification [1].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Scope" />8. Scope</h2></div></div><div xmlns="" /></div><p><a id="N4000071" />This document describes the OGC Web Feature Service (WFS) operations.
  The WFS operations support INSERT, UPDATE, DELETE, QUERY and DISCOVERY
  operations on geographic features using HTTP as the distributed computing
  platform.</p><p><a id="N40000A1" />In the context of this document, a transaction is a logical unit of
  work that is composed of one or more data manipulation operations. Since the
  manner in which geographic features are persistently stored is not addressed
  in this document, no transaction semantics, such as atomic failure, are
  assumed to exist. It is the function of a web feature service, in its
  interaction with the data storage system used to persistently store
  features, to ensure that changes to data are consistent. However, the
  document also acknowledges the fact that many systems do support standard
  concurrent transaction semantics and so proposes optional operations that
  will allow a web feature service to take advantage of such systems (e.g.
  relational database systems based on SQL).</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40000D1" />8.1. Geographic features</h3></div></div><div xmlns="" /></div><p><a id="N4000121" />This document adopts the same concept of a geographic feature as
    described in the OGC Abstract Specification (<a ="" target="_top">http://www.opengis.org/techno/spec.htm</a>)
    and interpreted in the OpenGIS© Geographic Markup Language(GML)
    Implementation Specification [2]. That is to say that the state of a
    geographic feature is described by a set of properties where each property
    can be thought of as a {name, type, value} tuple. The name and type of
    each feature property is determined by its type definition. Geographic
    features are those that may have at least one property that is
    geometry-valued. This, of course, implies that features can be defined
    with no geometric properties at all. The geometries of geographic features
    are restricted to what OGC calls simple geometries. A simple geometry is
    one for which coordinates are defined in two dimensions and the
    delineation of a curve is subject to linear interpolation. The traditional
    0, 1 and 2-dimensional geometries defined in a 2-dimensional spatial
    reference system are represented by points, line strings and polygons. In
    addition, the OGC geometry model allows for geometries that are
    collections of other geometries - either homogeneous multi-point,
    multi-line string, and multi-polygon collections or heterogeneous geometry
    collections. Finally, GML allows features that have complex or aggregate
    non-geometric properties.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40001A1" />8.2. Processing requests</h3></div></div><div xmlns="" /></div><p><a id="N40001F1" />This section of the document outlines, in general terms, the
    protocol to be followed in order to process web feature service requests.
    Processing requests would proceed as follows:<div class="orderedlist"><ol type="1"><li><p><a id="N4000231" />A
    client application would request a capabilities document from the WFS.
    Such a document contains a description of all the operations that the WFS
    supports and a list of all feature types that it can service.</p></li><li><p><a id="N4000261" />A
    client application (optionally) makes a request to a web feature service
    for the definition of one or more of the feature types that the WFS can
    service.</p></li><li><p><a id="N4000291" />Based on the definition of the
    feature type(s), the client application generates a request as specified
    in this document.</p></li><li><p><a id="N40002C1" />The request is posted
    to a web server.</p></li><li><p><a id="N40002F1" />The WFS is invoked to
    read and service the request.</p></li><li><p><a id="N4000321" />When the
    WFS has completed processing the request, it will generate a status report
    and hand it back to the client. In the event that an error has occurred,
    the status report will indicate that fact.</p></li></ol></div>
</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000361" />8.3. Operations</h3></div></div><div xmlns="" /></div><p><a id="N40003B1" />To support transaction and query processing, the following
    operations are defined:</p><div class="variablelist"><dl><dt><span class="term">GetCapabilities</span></dt><dd><p><a id="N4000471" />A web feature service must be able to describe its
          capabilities. Specifically, it must indicate which feature types it
          can service and what operations are supported on each feature type.</p></dd><dt><span class="term">DescribeFeatureType</span></dt><dd><p><a id="N4000531" />A web feature service must be able, upon request, to describe
          the structure of any feature type it can service.</p></dd><dt><span class="term">GetFeature</span></dt><dd><p><a id="N40005F1" />A web feature service must be able to service a request to
          retrieve feature instances. In addition, the client should be able
          to specify which feature properties to fetch and should be able to
          constrain the query spatially and non-spatially.</p></dd><dt><span class="term">Transaction</span></dt><dd><p><a id="N40006B1" />A web feature service may be able to service transaction
          requests. A transaction request is composed of operations that
          modify features; that is create, update, and delete operations on
          geographic features.</p></dd><dt><span class="term">LockFeature</span></dt><dd><p><a id="N4000771" />A web feature service may be able to process a lock request on
          one or more instances of a feature type for the duration of a
          transaction. This ensures that serializable transactions are
          supported.</p></dd></dl></div><p><a id="N40007D1" />Based on the operation descriptions above, two classes of web
    feature services can be defined:</p><div class="variablelist"><dl><dt><span class="term">Basic WFS</span></dt><dd><p><a id="N4000891" />A basic WFS would implement the GetCapabilities,
          DescribeFeatureType and GetFeature operations. This would be
          considered a READ-ONLY web feature service.</p></dd><dt><span class="term">Transaction WFS</span></dt><dd><p><a id="N4000951" />A transaction web feature service would support all the
          operations of a basic web feature service and in addition it would
          implement the Transaction operation. Optionally, a transaction WFS
          could implement the LockFeature operation.</p></dd></dl></div><p><a id="N40009B1" />Figure 2 is a simplified protocol diagram illustrating the messages
    that might be passed back and forth between a client application and a web
    feature service in order to process a typical transaction request. The
    elements referenced in the diagram are defined in this document.</p><div class="figure"><a id="N1031A" /><p class="title"><b>Figure 2. Protocol diagram</b></p><div xmlns="" class="mediaobject"><img src="images/01_ProtocolDiagram.gif" alt="Protocol diagram" /></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Conformance" />9. Conformance</h2></div></div><div xmlns="" /></div><p>Conformance with this specification shall be checked using all the
  relevant tests specified in Annex D (normative). The framework, concepts,
  and methodology for testing, and the criteria to be achieved to claim
  conformance are specified in ISO 19105: Geographic information - Conformance
  and Testing.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="NormativeReferences" />10. Normative references</h2></div></div><div xmlns="" /></div><div class="orderedlist"><ol type="1"><li><p><a id="N40000B3" />Bradner, Scott, "RFC 2119 Key words for use in RFCs to
      Indicate Requirement Levels," March 1997, <a ="" target="_top">ftp://ftp.isi.edu/in-notes/rfc2119.txt</a>.</p></li><li><p><a id="N4000153" />Cox, S., Cuthbert, A., Lake, R., and Martell, R. (eds.),
      "OpenGIS Implementation Specification #02-009: OpenGIS© Geography
      Markup Language (GML) Implementation Specification, version 2.1.1",
      April 2002</p></li><li><p><a id="N40001B3" />Vretanos, Panagiotis (ed.), "OpenGIS Implementation
      Specification #01-067: Filter Encoding Implementation
      Specification", May 2001</p></li><li><p><a id="N4000213" />Percivall, George, ed., “The OpenGIS Abstract Specification, Topic
      12: OpenGIS Service Architecture”, 2002</p></li><li><p><a id="N4000273" />Bray, Paoli, Sperberg-McQueen, eds., "Extensible Markup
      Language (XML) 1.0", 2nd edition, October 2000, W3C Recommendation,
      <a ="" target="_top">http://www.w3.org/TR/2000/REC-xml</a>.</p></li><li><p><a id="N4000313" />Beech, David, Maloney, Murry, Mendelson, Noah, Thompson, Harry S.,
      “XML Schema Part 1: Structures”, May 2001, W3C Recommendation, <a ="" target="_top">http://www.w3c.org/TR/xmlschema-1</a>.</p></li><li><p><a id="N40003B3" />Bray, Hollander, Layman, eds., “Namespaces In XML”, January 1999,
      W3C Recommendation, <a ="" target="_top">http://www.w3.org/TR/2000/REC-xml-names</a>.</p></li><li><p><a id="N4000453" />Clark, James, DeRose, Steve, “XML Path Language (XPATH), Version
      1.0”, November 1999, W3C Recommendation, <a ="" target="_top">http://www.w3c.org/TR/XPath</a>.</p></li><li><p><a id="N40004F3" />Fielding et. al., "Hypertext Transfer Protocol –
      HTTP/1.1," IETF RFC 2616, June 1999, <a ="" target="_top">http://www.ietf.org/rfc/rfc2616.txt</a>.</p></li><li><p><a id="N4000593" />Berners-Lee, T., Fielding, N., and Masinter, L., "Uniform
      Resource Identifiers (URI): Generic Syntax", IETF RFC 2396, <a ="" target="_top">http://www.ietf.org/rfc/rfc2396.txt</a>.</p></li><li><p><a id="N4000633" />National Center for Supercomputing Applications, "The Common
      Gateway Interface," <a ="" target="_top">http://hoohoo.ncsa.uiuc.edu/cgi/</a>.</p></li><li><p><a id="N40006D3" />Freed, N. and Borenstein N., "Multipurpose Internet Mail
      Extensions (MIME) Part One: Format of Internet Message Bodies", IETF
      RFC 2045, November 1996, <a ="" target="_top">http://www.ietf.org/rfc/rfc2045.txt</a>.</p></li><li><p><a id="N4000773" />Internet Assigned Numbers Authority, <a ="" target="_top">http://www.isi.edu/in-notes/iana/assignments/media-types/</a>.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="TermsAndDefinitions" />11. Terms and definitions</h2></div></div><div xmlns="" /></div><p><a id="N4000074" />For the purposes of this document, the following terms and definitions apply.</p><div class="variablelist"><dl><dt><span class="term">4.1 operation</span></dt><dd><p><a id="N4000134" />pecification of a transformation or query that an object may be called to execute [4]</p></dd><dt><span class="term">4.2 interface</span></dt><dd><p><a id="N40001F4" />a named set of operations that characterize the behavior of an entity [4]</p></dd><dt><span class="term">4.3 service</span></dt><dd><p><a id="N40002B4" />a distinct part of the functionality that is provided by an entity through interfaces [4]</p></dd><dt><span class="term">4.4 service instance</span></dt><dd><p><a id="N4000374" />an actual implementation of a service; service instance is synonymous with server</p></dd><dt><span class="term">4.5 client</span></dt><dd><p><a id="N4000434" />a software component that can invoke an operation from a server</p></dd><dt><span class="term">4.6 request</span></dt><dd><p><a id="N40004F4" />an invocation by a client of an operation.</p></dd><dt><span class="term">4.7 response</span></dt><dd><p><a id="N40005B4" />the result of an operation returned from a server to a client.</p></dd><dt><span class="term">4.8 capabilities XML</span></dt><dd><p><a id="N4000674" />service-level metadata describing the operations and content available at a service instance</p></dd><dt><span class="term">4.9 spatial reference system</span></dt><dd><p><a id="N4000734" />as defined in ISO19111</p></dd><dt><span class="term">4.10 opaque</span></dt><dd><p><a id="N40007F4" />not visible, accessible or meaningful to a client application</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Conventions" />12. Conventions</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000075" />12.1. Normative verbs</h3></div></div><div xmlns="" /></div><p><a id="N40000C5" />In the sections labeled as normative, the key words "<span class="bold"><b>must</b></span>", "<span class="bold"><b>must not</b></span>", "<span class="bold"><b>required</b></span>", "<span class="bold"><b>shall</b></span>", "<span class="bold"><b>shall not</b></span>", "<span class="bold"><b>should</b></span>", "<span class="bold"><b>should not</b></span>", "<span class="bold"><b>recommended</b></span>", "<span class="bold"><b>may</b></span>", and "<span class="bold"><b>optional</b></span>" in this document are to be interpreted as described in Internet RFC 2119 [1].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000385" />12.2. Abbreviated terms</h3></div></div><div xmlns="" /></div><div class="informaltable"><a id="N40003D5" /><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>CGI</td><td>Common Gateway Interface</td></tr><tr><td>DCP</td><td>Distributed Computing Platform</td></tr><tr><td>DTD</td><td>Document Type Definition</td></tr><tr><td>EPSG</td><td>European Petroleum Survey Group</td></tr><tr><td>GIS</td><td>Geographic Information System</td></tr><tr><td>GML</td><td>Geography Markup Language</td></tr><tr><td>HTTP</td><td>Hypertext Transfer Protocol</td></tr><tr><td>IETF</td><td>Internet Engineering Task Force</td></tr><tr><td>MIME</td><td>Multipurpose Internet Mail Extensions</td></tr><tr><td>OGC</td><td>Open GIS Consortium</td></tr><tr><td>OWS</td><td>OGC Web Service</td></tr><tr><td>URL</td><td>Uniform Resource Locator</td></tr><tr><td>WFS</td><td>Web Feature Service</td></tr><tr><td>XML</td><td>Extensible Markup Language</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000C65" />12.3. Use of examples</h3></div></div><div xmlns="" /></div><p><a id="N4000CB5" />This specification makes extensive use of XML examples. They are meant to illustrate the various aspects of a web feature service discussed in this specification. While every effort has been made to ensure that the examples are well formed and valid, this goal was sacrificed for the sake of clarity in many cases. For example, many examples are formatted in a specific way to highlight a particular aspect that would render the example invalid from the perspective of an XML validation tool. Further, most examples reference fictitious servers and data.</p><p><a id="N4000CE5" />Thus, this specification does not assert that any XML or keyword-value pair encoded example, copied from this document, will necessarily execute correctly or validate using a particular XML validation tool. Only sections marked as normative should be expected to be well formed and valid XML or XML Schema documents.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="BasicServiceElements" />13. Basic service elements</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000076" />13.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C6" />This section describes aspects of OGC Web Feature Service behavior that are independent of particular operations or are common to several operations or interfaces.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000106" />13.2. Version numbering and negotiation</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000156" />13.2.1. Version number form</h4></div></div><div xmlns="" /></div><p><a id="N40001A6" />The published specification version number contains three positive integers, separated by decimal points, in the form "x.y.z". The numbers "y" and "z" will never exceed 99. Each OWS specification is numbered independently.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40001E6" />13.2.2. Version changes</h4></div></div><div xmlns="" /></div><p><a id="N4000236" />A particular specification's version number <span class="bold"><b>shall</b></span> be changed with each revision. The number <span class="bold"><b>shall</b></span> increase monotonically and <span class="bold"><b>shall</b></span> comprise no more than three integers separated by decimal points, with the first integer being the most significant. There may be gaps in the numerical sequence. Some numbers may denote experimental or interim versions. Service instances and their clients need not support all defined versions, but <span class="bold"><b>must</b></span> obey the negotiation rules below.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000376" />13.2.3. Appearance in requests and in service metadata</h4></div></div><div xmlns="" /></div><p><a id="N40003C6" />An OWS Client may negotiate with a Service Instance to determine a mutually agreeable specification version. Negotiation is performed using the GetCapabilities operation [sec. 12] according to the following rules.</p><p><a id="N40003F6" />All Capabilities XML must include a protocol version number. In response to a GetCapabilities request containing a version number, an OGC Web Service <span class="bold"><b>must</b></span> either respond with output that conforms to that version of the specification, <span class="bold"><b>or</b></span> negotiate a mutually agreeable version if the requested version is not implemented on the server. If no version number is specified in the request, the server <span class="bold"><b>must</b></span> respond with the highest version it understands and label the response accordingly.</p><p><a id="N40004E6" />Version number negotiation occurs as follows:</p><div class="orderedlist"><ol type="1"><li><p><a id="N4000556" />If the server implements the requested version number, the server <span class="bold"><b>must</b></span> send that version.</p></li><li><p><a id="N40005F6" />If the client request is for an unknown version greater than the lowest version that the server understands, the server <span class="bold"><b>must</b></span> send the highest version less than the requested version.</p></li><li><p><a id="N4000696" />If the client request is for a version lower than any of those known to the server, then the server <span class="bold"><b>must</b></span> send the lowest version it knows.</p></li><li><p><a id="N4000736" />If the client does not understand the new version number sent by the server, it <span class="bold"><b>may</b></span> either cease communicating with the server <span class="bold"><b>or</b></span> send a new request with a new version number that the client does understand, but which is less than that sent by the server (if the server had responded with a lower version).</p></li><li><p><a id="N4000816" />If the server had responded with a higher version (because the request was for a version lower than any known to the server), and the client does not understand the proposed higher version, then the client <span class="bold"><b>may</b></span> send a new request with a version number higher than that sent by the server.</p></li></ol></div><p><a id="N40008A6" />The process is repeated until a mutually understood version is reached, or until the client determines that it will not or cannot communicate with that particular server.</p><div class="example"><a id="N104D8" /><p class="title"><b>Example 1. Example 1:</b></p><p xmlns=""><a id="N4000926" />Server understands versions 1, 2, 4, 5 and 8. Client understands versions 1, 3, 4, 6, and 7. Client requests version 7. Server responds with version 5. Client requests version 4. Server responds with version 4, which the client understands, and the negotiation ends successfully.</p></div><div class="example"><a id="N104DE" /><p class="title"><b>Example 2. Example 2:</b></p><p xmlns=""><a id="N40009B6" />Server understands versions 4, 5 and 8. Client understands version 3. Client requests version 3. Server responds with version 4. Client does not understand that version or any higher version, so negotiation fails and client ceases communication with that server.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000A16" />13.3. General HTTP request rules</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000A66" />13.3.1. Introduction</h4></div></div><div xmlns="" /></div><p><a id="N4000AB6" />At present, the only distributed computing platform (DCP) explicitly supported by OGC Web Services is the World Wide Web itself, or more specifically, Internet hosts implementing the Hypertext Transfer Protocol (HTTP)[9]. Thus the Online Resource of each operation supported by a service instance is located by an HTTP Uniform Resource Locator (URL). The URL may be different for each operation, or the same, at the discretion of the service provider. Each URL <span class="bold"><b>must</b></span> conform to the description in [9], but is otherwise implementation-dependent; only the parameters comprising the service request itself are mandated by the OGC Web Services specifications.</p><p><a id="N4000B26" />HTTP supports two request methods: GET and POST. One or both of these methods may be defined for a particular OGC Web Service type and offered by a service instance. The use of the Online Resource URL differs in each case.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000B66" />13.3.2. HTTP GET</h4></div></div><div xmlns="" /></div><p><a id="N4000BB6" />An Online Resource URL intended for HTTP GET requests, is, in fact, only a URL prefix to which additional parameters must be appended in order to construct a valid Operation request. A URL prefix is defined as an opaque string including the protocol, hostname, optional port number, path, a question mark '?', and, <span class="bold"><b>optionally</b></span>, one or more server-specific parameters ending in an ampersand '&amp;'. The prefix uniquely identifies the particular service instance. A client appends the necessary request parameters as name/value pairs in the form "name=value&amp;". The resulting URL <span class="bold"><b>must</b></span> be valid according to the HTTP Common Gateway Interface (CGI) standard [7], which mandates the presence of '?' before the sequence of query parameters and the '&amp;' between each parameter. As with all CGI applications, the query URL is encoded [10] to protect special characters.</p><p><a id="N4000C66" />The URL prefix must end in either a '?' (in the absence of additional server-specific parameters) or a '&amp;'. In practice, however, Clients <span class="bold"><b>should</b></span> be prepared to add a necessary trailing '?' or '&amp;' before appending the Operation parameters defined in this specification in order to construct a valid request URL.</p><p><a id="N4000CD6" />Table 1 summarizes the components of an operation request URL.</p><div class="table"><a id="N4000D06" /><p class="title"><b>Table 1. Table 1 – A general OGC Web Service Request</b></p><table xmlns="" summary="Table 1 – A general OGC Web Service Request" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>URL Component</th><th>Description</th></tr></thead><tbody><tr><td>http://host[:port]/path?{name[=value]&amp;}</td><td>URL prefix of service operation. [ ] denotes 0 or 1 occurrence of an optional part; {} denotes 0 or more occurrences. The prefix is entirely at the discretion of the service provider.</td></tr><tr><td>name=value&amp;</td><td>One or more standard request parameter name/value pairs defined by an OGC Web Service. The actual list of required and optional parameters is mandated for each operation by the appropriate OWS specification.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4001026" />13.3.3. HTTP POST</h4></div></div><div xmlns="" /></div><p><a id="N4001076" />An Online Resource URL intended for HTTP POST requests is a complete and valid URL to which Clients transmit encoded requests in the body of the POST document. A WFS <span class="bold"><b>must not</b></span> require additional parameters to be appended to the URL in order to construct a valid target for the Operation request.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001106" />13.4. General HTTP response rules</h3></div></div><div xmlns="" /></div><p><a id="N4001156" />Upon receiving a valid request, the service <span class="bold"><b>must</b></span> send a response corresponding exactly to the request as detailed in the appropriate specification. Only in the case of Version Negotiation (described above) may the server offer a differing result.</p><p><a id="N40011C6" />Upon receiving an invalid request, the service <span class="bold"><b>must</b></span> issue a Service Exception as described in Section 7.7.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p xmlns=""><a id="N4001256" />As a practical matter, in the WWW environment a client should be prepared to receive either a valid result, or nothing, or any other result. This is because the client may itself have formed a non-conforming request that inadvertently triggered a reply by something other than an OGC Web Service, because the Service itself may be non-conforming.</p></div><p><a id="N4001296" />Response objects <span class="bold"><b>must</b></span> be accompanied by the appropriate Multipurpose Internet Mail Extensions (MIME) type [9] for that object.</p><p><a id="N4001306" />Response objects <span class="bold"><b>should</b></span> be accompanied by other HTTP entity headers as appropriate and to the extent possible. In particular, the Expires and Last-Modified headers provide important information for caching; Content-Length may be used by clients to know when data transmission is complete and to efficiently allocate space for results, and Content-Encoding or Content-Transfer-Encoding may be necessary for proper interpretation of the results.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001386" />13.5. Request encoding</h3></div></div><div xmlns="" /></div><p><a id="N40013D6" />This document defines two methods of encoding WFS requests. The first uses XML as the encoding language. The second method uses keyword-value pairs to encode the various parameters of a request. An example of a keyword value pair is:</p><pre class="programlisting">"REQUEST=GetCapabilities"</pre><p><a id="N4001436" />where "REQUEST" is the keyword and "GetCapabilities" is the value. In both cases, the response to a request or exception reporting must be identical.</p><p><a id="N4001466" />Table 2 correlates WFS operations and their encoding semantics as defined in this specification.</p><div class="table"><a id="N4001496" /><p class="title"><b>Table 2. Table 2 – Operation Request Encoding</b></p><table xmlns="" summary="Table 2 – Operation Request Encoding" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Operation</th><th>Request Encoding</th></tr></thead><tbody><tr><td>GetCapabilities</td><td>XML &amp; KVP</td></tr><tr><td>DescribeFeatureType</td><td>XML &amp; KVP</td></tr><tr><td>GetFeature / GetFeatureWithLock</td><td>XML &amp; KVP</td></tr><tr><td>LockFeature</td><td>XML &amp; KVP</td></tr><tr><td>Transaction</td><td>XML &amp; limited KVP</td></tr></tbody></table></div><p><a id="N4001956" />KVP = keyword-value pair</p><p><a id="N4001986" />This document mandates the use of GML for the XML encoding of the state of geographic features. A complete description of this encoding can be found in document [2].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40019C6" />13.6. Namespaces</h3></div></div><div xmlns="" /></div><p><a id="N4001A16" />Namespaces (17) are used to discriminate XML vocabularies from one another. For the WFS there are three normative namespace definitions, namely:</p><div class="itemizedlist"><ul type="disc"><li><p><a id="N4001A86" />(<a ="" target="_top">http://www.opengis.net/wfs</a>) - for the WFS interface vocabulary</p></li><li><p><a id="N4001B26" />(<a ="" target="_top">http://www.opengis.net/gml</a>) - for the GML vocabulary</p></li><li><p><a id="N4001BC6" />(<a ="" target="_top">http://www.opengis.net/ogc</a>) - for the OGC Filter vocabulary</p></li></ul></div><p><a id="N4001C56" />A given WFS implementation will make use of one or more GML Application Schemas and these schemas will use, in turn, one or more application namespaces (e.g. http://www.someserver.com/myns). While many of the examples in this document use a single namespace, multiple namespaces can be used, as shown section 11.2.6.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="CommonElements" />14. Common elements</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000077" />14.1. Feature identifier</h3></div></div><div xmlns="" /></div><p><a id="N40000C7" />This document assumes that every feature instance that a particular WFS implementation can operate upon is uniquely identifiable. That is to say, when a WFS implementation reports a feature identifier for a feature instance, that feature identifier is unique to the server and can be used to repeatedly reference the same feature instance (assuming it has not been deleted). It is further assumed that a feature identifier is encoded as described in the OpenGIS© Filter Encoding Implementation Specification [3]. A feature identifier can be used wherever a feature reference is required. For reference purposes, the XML Schema fragment that defines the feature identifier element is copied from the filter encoding specification:</p><pre class="programlisting">&lt;xsd:element name="FeatureId" type="ogc:FeatureIdType"/&gt;
&lt;xsd:complexType name="FeatureIdType"&gt;
   &lt;xsd:attribute name="fid" type="xsd:anyURI" use="required"/&gt;
&lt;/xsd:complexType&gt;</pre><p><a id="N4000127" />The purpose of the feature identifier is to make database operations possible.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000157" />14.1.1. Globally unique identifiers (Informative)</h4></div></div><div xmlns="" /></div><p><a id="N40001A7" />For the purposes of a web feature service, a locally unique identifier is sufficient. However, there is a need within OGC web services to have unique identifiers for objects of all kinds. The approach thus far has been to reference objects using independent <span class="emphasis"><em>scope</em></span> and feature-id components, where the scope it the URL of the server serving a feature and the feature-id is the local identifier for the feature. This approach, however, may be awkward to transport and use in other contexts, such as in a registry if one wanted to create metadata for a single repository data instance (such as a satellite image).</p><p><a id="N4000207" />The purpose of this section of the specification is to point out that a single globally-unique string would be more convenient to use in multiple contexts, and that such a string may be generated by a web feature service using some combination of the URL of the service and the local identifier.</p><p><a id="N4000237" />This string could be used as if it were fully opaque in many contexts, but it would be more useful if it were actually a URL or URN which could be used to directly access the object it identifies in the native format of the object. The encoding of the URL or URN would be entirely implementation-specific. One note on the use of URNs: not many implementations will actually be able to resolve and fetch data objects; it may be mostly only usable as a unique identifier string.</p><p><a id="N4000267" />Using a URL or URN is helpful for applications that need only simple access to the raw objects since no interface details need to be known. This mode of access/identification is also helpful for integration with high-level XML technologies such as RDF or XSLT, and even for debugging purposes.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40002B7" />14.2. Feature state</h3></div></div><div xmlns="" /></div><p><a id="N4000307" />The definition of features served by a WFS is provided by a GML application schema. Section 8 describes how a client can request an XML document containing the GML application schema definition of one or more feature types served by a WFS. Such application schema definitions <span class="bold"><b>shall</b></span> conform to the OpenGIS Geography Markup Language(GML) Implementation Specification, version 2.1.1 [2].</p><p><a id="N4000377" />A client application uses the GML application schema definition of a feature type to refer to feature instances of that feature type, and to refer to the names and types of all the properties of those feature instances. The values of all properties of a feature instance constitute the state of that feature instance. A client application references feature instances by the name of their feature type and the names and values of feature properties. A client application asks a transactional WFS to alter the state of a feature through insert, update, and delete operation requests.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40003B7" />14.3. Property names</h3></div></div><div xmlns="" /></div><p><a id="N4000407" />A web feature service refers to feature property names defined in a GML application schema. However, since the state of a feature must be expressed in GML and thus XML, the property names used by a web feature service must also be valid element and attribute names as described in the Extensible Markup Language (XML) 1.0 [5] specification. In addition, property names may be namespace qualified as described in Namespaces in XML [7] . The following definitions are taken from sections 2 &amp; 3 of that document:</p><pre class="programlisting">[4]  NCName ::=  (Letter | '_') (NCNameChar)*                          
/*  An XML Name, minus the ":" */
[5]  NCNameChar ::=  Letter | Digit | '.' | '-' | '_' | CombiningChar | Extender
[6]  QName ::=  (Prefix ':')? LocalPart
[7]  Prefix ::=  NCName
[8]  LocalPart ::=  NCName</pre><p><a id="N4000467" />The definitions of the components Letter, Digit, CombiningChar and Extender are defined in annex B of [5].</p><div class="example"><a id="N105F8" /><p class="title"><b>Example 3. Example</b></p><div xmlns="" class="variablelist"><dl><dt><span class="term">Examples of valid property names are:</span></dt><dd><p><a id="N4000577" />Age, Temperature, _KHz, myns:INWATERA_1M.WKB_GEOM</p></dd><dt><span class="term">Examples of invalid property names are:</span></dt><dd><p><a id="N4000637" />+Domain, 123_SomeName</p></dd></dl></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40006B7" />14.4. Property references</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000707" />14.4.1. Introduction</h4></div></div><div xmlns="" /></div><p><a id="N4000757" />As mentioned in the introduction, GML allows geographic features to have complex or aggregate non-geometric properties. A problem thus arises about how such properties should be referenced in the various places where property references are required (e.g. query and filter expressions). A WFS <span class="bold"><b>must</b></span> use XPath [8] expressions, as defined in this document, for referencing the properties and sub-properties of a feature encoded as XML elements or attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40007D7" />14.4.2. Xpath expressions</h4></div></div><div xmlns="" /></div><p><a id="N4000827" />The XML Path Language [8] specification is a language for addressing parts of a XML document, or in the case of this specification, for referencing feature properties referred to by means of XML elements or attributes.</p><p><a id="N4000857" />This specification does not require a WFS implementation to support the full XPath language. In order to keep the implementation entry cost as low as possible, this specification mandates that a WFS implementation <span class="bold"><b>must</b></span> support the following subset of the XPath language:</p><div class="orderedlist"><ol type="1"><li><p><a id="N4000907" />A WFS implementation <span class="bold"><b>must</b></span> support <span class="emphasis"><em>abbreviated relative location</em></span> paths.</p></li><li><p><a id="N40009D7" />Relative location paths are composed of one or more <span class="emphasis"><em>steps</em></span> separated by the path separator '/'.</p></li><li><p><a id="N4000A67" />The first step of a relative location path <span class="bold"><b>may</b></span> correspond to the root element of the feature property being referenced <span class="bold"><b>or</b></span> to the root element of the feature type with the next step corresponding to the root element of the feature property being referenced.</p></li><li><p><a id="N4000B47" />Each subsequent step in the path <span class="bold"><b>must</b></span> be composed of the abbreviated form of the <span class="emphasis"><em>child::</em></span> axis specifier and the name of the feature property encoded as the principal node type of <span class="emphasis"><em>element</em></span>. The abbreviated form of the <span class="emphasis"><em>child::</em></span> axis specifier is to simply omit the specifier from the location step.</p></li><li><p><a id="N4000C77" />Each step in the path may optionally contain a predicate composed of the predicate delimiters '[' and ']' and a number indicating which child of the context node is to be selected. This allows feature properties that may be repeated to be specifically referenced.</p></li><li><p><a id="N4000CD7" />The final step in a path may optionally be composed of the abbreviated form of the <span class="emphasis"><em>attribute::</em></span> axis specifier, '@', and the name of a feature property encoded as the principal node type of <span class="emphasis"><em>attribute</em></span>.</p></li></ol></div><div class="example"><a id="N10665" /><p class="title"><b>Example 4. Example</b></p><p xmlns=""><a id="N4000DD7" />To practically illustrate the use of XPath expressions for referencing the properties of a complex feature (encoded as elements or attributes), consider the fictitious complex feature <span class="emphasis"><em>Person</em></span> defined by the following XML Schema document:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;schema
   targetNamespace="http://www.someserver.com/myns"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"
   version="1.0"&gt;

   &lt;import namespace="http://www.opengis.net/gml"
           schemaLocation="../gml/2.1/feature.xsd"/&gt;

   &lt;element name="Person" type="myns:PersonType"
            substitutionGroup="gml:_Feature"/&gt;
   &lt;complexType name="PersonType"&gt;
      &lt;complexContent&gt;
         &lt;extension base="gml:AbstractFeatureType"&gt;
            &lt;sequence&gt;
               &lt;element name="LastName" nillable="true"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="30"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="FirstName" nillable="true"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="10"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="Age" type="integer" nillable="true"/&gt;
               &lt;element name="Sex" type="string"/&gt;
               &lt;element name="Spouse"&gt;
                  &lt;complexType&gt;
                     &lt;attribute name="sin" type="xsd:anyURI" use="required" /&gt;
                  &lt;/complexType&gt;
               &lt;/element&gt;
               &lt;element name="Location" 
                        type="gml:PointPropertyType"
                        nillable="true"/&gt;
               &lt;element name="Address" type="myns:AddressType" nillable="true"/&gt;
               &lt;element name="Phone" type="xsd:string"
                        minOccurs="0" maxOccurs="unbounded"/&gt;
            &lt;/sequence&gt;
            &lt;attribute name="sin" type="xsd:anyURI" use="required"/&gt;
         &lt;/extension&gt;
      &lt;/complexContent&gt;
   &lt;/complexType&gt;

   &lt;complexType name="AddressType"&gt;
      &lt;sequence&gt;
         &lt;element name="StreetName" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="StreetNumber" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="10"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="City" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="Province" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="PostalCode" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="15"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="Country" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
      &lt;/sequence&gt;
   &lt;/complexType&gt;
&lt;/schema&gt;</pre><p><a id="N4000E67" />Note that the property <span class="emphasis"><em>Address</em></span> is a complex property of type <span class="emphasis"><em>AddressType</em></span>. An example instance of the feature <span class="emphasis"><em>Person</em></span> might be:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;myns:Person
   sin="111222333" 
   xmlns:myns="http://www.opengis.net/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/myns Person.xsd"&gt;

   &lt;myns:LastName&gt;Smith&lt;/myns:LastName&gt;
   &lt;myns:FirstName&gt;Fred&lt;/myns:FirstName&gt;
   &lt;myns:Age&gt;35&lt;/myns:Age&gt;
   &lt;myns:Sex&gt;Male&lt;/myns:Sex&gt;
   &lt;myns:Spouse sin="444555666" /&gt;
   &lt;myns:Location&gt;
      &lt;gml:Point&gt;&lt;gml:coordinates&gt;15,15&lt;/gml:coordinates&gt;&lt;/gml:Point&gt;
   &lt;/myns:Location&gt;
   &lt;myns:Address&gt;
      &lt;myns:StreetName&gt;Main St.&lt;/myns:StreetName&gt;
      &lt;myns:StreetNumber&gt;5&lt;/myns:StreetNumber&gt;
      &lt;myns:City&gt;SomeCity&lt;/myns:City&gt;
      &lt;myns:Province&gt;SomeProvince&lt;/myns:Province&gt;
      &lt;myns:PostalCode&gt;X1X 1X1&lt;/myns:PostalCode&gt;
      &lt;myns:Country&gt;Canada&lt;/myns:Country&gt;
   &lt;/myns:Address&gt;
   &lt;myns:Phone&gt;416-123-4567&lt;/myns:Phone&gt;
   &lt;myns:Phone&gt;416-890-1234&lt;/myns:Phone&gt;
&lt;/myns:Person&gt;</pre><p><a id="N4000F57" />Using XPath [8] expressions, each property of a <span class="emphasis"><em>Person</em></span> feature can be referenced as follows (omitting the namespace qualifiers for clarities sake):</p><pre class="programlisting">LastName
FirstName
Age
Sex
Source
Location
Address
Address/StreetNumber
Address/StreetName
Address/City
Address/Province
Address/Postal_Code
Address/Country
Phone[1]
Phone[2]</pre><p><a id="N4000FE7" />Notice that in this instance, each relative location path begins with the root element of the feature property being referenced. This simply corresponds to the name of the feature property. Optionally, each feature property may be referenced with the relative location path beginning with root element of the feature (i.e. the name of the feature type). Thus the <span class="emphasis"><em>LastName</em></span> property could be reference as <span class="emphasis"><em>Person/LastName</em></span>, the <span class="emphasis"><em>City</em></span> property could be referenced as <span class="emphasis"><em>Person/Address/City</em></span> and so on.</p><p><a id="N40010D7" />Each step of the path is composed of the abbreviated <span class="emphasis"><em>child::</em></span> axis specifier (i.e. the axis specifier <span class="emphasis"><em>child::</em></span> is omitted) and the name of the specified property which is of node type <span class="emphasis"><em>element</em></span>.</p><p><a id="N4001197" />The element <span class="emphasis"><em>Phone</em></span> appears multiple times and the predicates <span class="emphasis"><em>[1]</em></span> and <span class="emphasis"><em>[2]</em></span> are used to indicate the specific elements. The predicate <span class="emphasis"><em>[1]</em></span> is used to indicate the first occurrence of the <span class="emphasis"><em>Phone</em></span> element. The predicate <span class="emphasis"><em>[2]</em></span> is used to indicate the second occurrence of the <span class="emphasis"><em>Phone</em></span> element.</p><p><a id="N4001317" />In addition, the <span class="bold"><b>sin</b></span>
<sup>[<a href="#ftn.N106C0" id="N106C0">1</a>]</sup> attribute on the <span class="bold"><b>&lt;Person&gt;</b></span> and <span class="bold"><b>&lt;Spouse&gt;</b></span> elements can be referenced using the following XPath [8] expressions:</p><pre class="programlisting">Person/@sin
Person/Spouse/@sin</pre><p><a id="N4001467" />In these cases the final step of the path contains the abbreviated axis specifier <span class="emphasis"><em>attribute::</em></span> (i.e. @) and the node type is <span class="emphasis"><em>attribute</em></span> (i.e. <span class="emphasis"><em>sin</em></span> in this case).</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001557" />14.5. &lt;Native&gt; element</h3></div></div><div xmlns="" /></div><p><a id="N40015A7" />It is clear that an open interface can only support a certain common set of capabilities. The &lt;Native&gt; element is intended to allow access to vendor specific capabilities of any particular web feature server or datastore.</p><p><a id="N40015D7" />The &lt;Native&gt; element is defined by the following XML Schema fragment:</p><pre class="programlisting">&lt;xsd:element name="Native" type="wfs:NativeType"/&gt;
&lt;xsd:complexType name="NativeType"&gt;
   &lt;xsd:any /&gt;
   &lt;xsd:attribute name="vendorId" type="xsd:string" use="required"/&gt;
   &lt;xsd:attribute name="safeToIgnore" type="xsd:boolean" use="required"/&gt;
&lt;/xsd:complexType&gt;</pre><p><a id="N4001637" />The &lt;Native&gt; element simply contains the vendor specific command or operation.</p><p><a id="N4001667" />The <span class="bold"><b>vendorId</b></span> attribute is used to identify the vendor that recognizes the command or operation enclosed by the &lt;Native&gt; element. The attribute is provided as a means of allowing a web feature service to determine if it can deal with the command or not.</p><p><a id="N40016D7" />The <span class="bold"><b>safeToIgnore</b></span> attribute is used to guide the actions of a web feature service when the &lt;Native&gt; command or operation is not recognized. The <span class="bold"><b>safeToIgnore</b></span> attribute has two possible values True or False. The values have the following meanings:</p><p><a id="N4001787" />safeToIgnore=False</p><p><a id="N40017B7" />A value of False indicates that the &lt;Native&gt; element cannot be ignored and the operation that the element is associated with must fail if the web feature service cannot deal with it.</p><p><a id="N40017E7" />safeToIgnore=True</p><p><a id="N4001817" />A value of True indicates that the &lt;Native&gt; element can be safely ignored.</p><div class="example"><a id="N10708" /><p class="title"><b>Example 5. Example</b></p><p xmlns=""><a id="N4001897" />This example illustrates the use of the &lt;Native&gt; element to enable a special feature of a SQL-based relational database. In this instance, the element indicates that this is an Oracle command and that the command can be safely ignored.</p><pre class="programlisting">&lt;Native vendorId="Oracle" safeToIgnore="True"&gt;
ALTER SESSION ENABLE PARALLEL DML
&lt;/Native&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001917" />14.6. Filter</h3></div></div><div xmlns="" /></div><p><a id="N4001967" />A filter is used to define a set of feature instances that are to be operated upon. The operating set can be comprised of one or more enumerated features or a set of features defined by specifying spatial and non-spatial constraints on the geometric and scalar properties of a feature type. Filter specifications <span class="bold"><b>shall</b></span> be encoded as described in the OGC Filter Encoding Implementation Specification [3].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40019E7" />14.7. Exception reporting</h3></div></div><div xmlns="" /></div><p><a id="N4001A37" />In the event that a web feature service encounters an error while processing a request or receives an unrecognized request, it <span class="bold"><b>shall</b></span> generate an XML document indicating that an error has occurred. The format of the XML error response is specified by, and <span class="bold"><b>must</b></span> validate against, the exception response schema defined in section A.2.</p><p><a id="N4001AE7" />A <span class="bold"><b>&lt;ServiceExceptionReport&gt;</b></span> element can contain one or more WFS processing exceptions. The mandatory <span class="bold"><b>version</b></span> attribute is used to indicate the version of the service exception report schema. For this version of the specification, this value is fixed at 1.2.0.</p><p><a id="N4001B97" />Individual exception messages are contained within the <span class="bold"><b>&lt;ServiceException&gt;</b></span> element. The optional <span class="bold"><b>code</b></span> attribute may be used to associate an exception code with the accompanying message. The optional <span class="bold"><b>locator</b></span> attribute may be used to indicate where an exception was encountered in the request that generated the error. A number of elements defined in this document include a <span class="bold"><b>handle</b></span> attribute that can be used to associate a mnemonic name with the element. If such a <span class="bold"><b>handle</b></span> exists, its value may be reported using the <span class="bold"><b>locator</b></span> attribute of the <span class="bold"><b>&lt;ServiceException&gt;</b></span> element. If the <span class="bold"><b>handle</b></span> attribute is not specified, then a web feature server implementation may attempt to locate the error using other means such as line numbers, etc...</p><div class="example"><a id="N10758" /><p class="title"><b>Example 6. Example</b></p><p xmlns=""><a id="N4001E17" />The following is an example of an exception report. This exception indicates that the first insert statement failed because of a missing closing XML tag in the request.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;ServiceExceptionReport
   version="1.2.0"
   xmlns="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/ogc ../wfs/1.0.0/OGC-exception.xsd"&gt;
   &lt;ServiceException code="999" locator="INSERT STMT 01"&gt;
      parse error: missing closing tag for element WKB_GEOM
   &lt;/ServiceException&gt;
&lt;/ServiceExceptionReport&gt;</pre><p><a id="N4001E77" />It should be noted that this sample output validates against the exception report schema presented above.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001EC7" />14.8. Common XML attributes</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4001F17" />14.8.1. Version attribute</h4></div></div><div xmlns="" /></div><p><a id="N4001F67" />All XML encoded WFS requests include an attribute called <span class="bold"><b>version</b></span>. The mandatory <span class="bold"><b>version</b></span> attribute is used to indicate to which version of the WFS specification the request encoding conforms and is used in version negotiation as described in section 6.2.4. The default value of the <span class="bold"><b>version</b></span> attributed is set to 1.0.0, which corresponds to the version of this document.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4002067" />14.8.2. Service attribute</h4></div></div><div xmlns="" /></div><p><a id="N40020B7" />All XML encoded WFS requests include an attribute called <span class="bold"><b>service</b></span>. The mandatory <span class="bold"><b>service</b></span> attribute is used to indicate which of the available service types, at a particular service instance, is being invoked. When invoking a web feature service, the value of the <span class="bold"><b>service</b></span> attribute shall be WFS.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40021B7" />14.8.3. Handle attribute</h4></div></div><div xmlns="" /></div><p><a id="N4002207" />The purpose of the <span class="bold"><b>handle</b></span> attribute is to allow a client application to associate a mnemonic name with a request for error handling purposes. If a <span class="bold"><b>handle</b></span> is specified, and an exception is encountered, a Web Feature Service may use the <span class="bold"><b>handle</b></span> to identify the offending element.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="DescribeFeatureType" />15. DescribeFeatureType operation</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000078" />15.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C8" />The function of the <span class="bold"><b>DescribeFeatureType</b></span>
    operation is to generate a schema description of feature types serviced by
    a WFS implementation. The schema descriptions define how a WFS
    implementation expects feature instances to be encoded on input and how
    feature instances will be generated on output.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000148" />15.2. Request</h3></div></div><div xmlns="" /></div><p><a id="N4000198" />A <span class="bold"><b>DescribeFeatureType</b></span> element
    contains zero or more <span class="bold"><b>TypeName</b></span> elements
    that encode the names of feature types that are to be described. If the
    content of the <span class="bold"><b>DescribeFeatureType</b></span>
    element is empty, then that shall be interpreted as requesting a
    description of all feature types that a WFS can service. The XML encoding
    of a <span class="bold"><b>DescribeFeatureType</b></span> request is
    defined by the following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="DescribeFeatureType" type="wfs:DescribeFeatureTypeType"/&gt;
   &lt;xsd:complexType name="DescribeFeatureTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="TypeName" type="xsd:QName"
                      minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="outputFormat"
                     type="xsd:string" use="optional" default="XMLSCHEMA"/&gt;
   &lt;/xsd:complexType&gt;</pre><p><a id="N40002F8" />The <span class="bold"><b>outputFormat</b></span> attribute, is used
    to indicate the schema description language that should be used to
    describe feature type schemas. The only mandatory output format in
    response to a <span class="bold"><b>DescribeFeatureType</b></span>
    operation is XML Schema, denoted by the value <span class="bold"><b>XMLSCHEMA</b></span>
    for the <span class="bold"><b>outputFormat</b></span> attribute. Other
    vendor specific formats are also possible, but they <span class="bold"><b>must</b></span>
    be advertised on the capabilities document [sec. 12].</p><p><a id="N4000468" />As specified by GML [2], the feature schema definition is entirely
    at the discretion of the particular WFS implementation that is describing
    its feature types. The only caveats are:</p><div class="orderedlist"><ol type="1"><li><p><a id="N40004D8" />Feature geometry must be expressed using the GML geometry
        description. (geometry.xsd).</p></li><li><p><a id="N4000538" />Spatial Reference Systems must be expressed as defined in the
        OpenGIS® Geography Markup Language (GML) Implementation Specification,
        version 2.1.1 [2].</p></li><li><p><a id="N4000598" />The feature schema must be consistent with the OGC feature
        model. This means that the feature schema defines properties of the
        feature. The GML interpretation of this statement is that the elements
        nested below the root element of a feature type define properties of
        that feature.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40005F8" />15.3. Response</h3></div></div><div xmlns="" /></div><p><a id="N4000648" />In response to a <span class="bold"><b>DescribeFeatureType</b></span>
    request, where the value of the <span class="bold"><b>outputFormat</b></span>
    attribute has been set to <span class="bold"><b>XMLSCHEMA</b></span>, a
    WFS implementation must be able to present an XML Schema [6] document that
    is a valid GML [2] application schema and defines the schema of the
    feature types listed in the request. The document(s) presented by the
    <span class="bold"><b>DescribeFeatureType</b></span> request may be used
    to validate feature instances generated by the WFS in the form of feature
    collections on output or feature instances specified as input for
    transaction operations.</p><p><a id="N4000778" />Schema descriptions using other schema description languages, such
    as DTD, are also possible as long as such capabilities are declared in the
    capabilities document [sec. 12].</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40007A8" />15.3.1. Supporting multiple namespaces</h4></div></div><div xmlns="" /></div><p><a id="N40007F8" />An XML Schema[6] document can only describe elements that belong
      to a single namespace. This means that a Web Feature Service cannot
      describe features from multiple namespaces in a single XML Schema
      document. To overcome this limitation, a WFS may generate an XML Schema
      document that is a “wrapper” schema that imports the schemas of the
      features from the various namespaces in the request. For example,
      consider the following request:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;DescribeFeatureType
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ns01="http://www.server01.com/ns01"
   xmlns:ns02="http://www.server02.com/ns02"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;TypeName&gt;ns01:TREESA_1M&lt;/TypeName&gt;
   &lt;TypeName&gt;ns02:ROADL_1M&lt;/TypeName&gt;
&lt;/DescribeFeatureType&gt;</pre><p><a id="N4000858" />A WFS may generate the following response to this request:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;schema
   xmlns="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"
   attributeFormDefault="unqualified"&gt;

   &lt;import namespace="http://www.server01.com/ns01"
           schemaLocation="http://www.myserver.com/wfs.cgi?
                           request=DescribeFeatureType&amp;amp;typeName=ns01:TREESA_1M"/&gt;

   &lt;import namespace="http://www.server02.com/ns02"
           schemaLocation="http://www.yourserver.com/wfs.cgi?
                           request=DescribeFeatureType&amp;amp;typeName=ns02:ROADL_1M"/&gt;

&lt;/schema&gt;</pre><p><a id="N40008B8" />In this example, the WFS is using a <span class="bold"><b>DescribeFeatureType</b></span>
      request to obtain the schemas of the features in the various namespaces.
      This is simply an example, other methods of obtaining the schemas may be
      implemented (for example: referencing static schema documents).</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000948" />15.4. Exception</h3></div></div><div xmlns="" /></div><p><a id="N4000998" />In the event that a web feature service encounters an error
    servicing a <span class="bold"><b>DescribeFeatureType</b></span> request,
    it shall raise an exception as described Section 7.7.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000A18" />15.5. Examples</h3></div></div><div xmlns="" /></div><div class="example"><a id="N1082D" /><p class="title"><b>Example 7. Example 1</b></p><p xmlns=""><a id="N4000AB8" />Consider geographic features of types TREESA_1M and ROADL_1M that
      are defined in a SQL database. The description of these feature types is
      reported by the database to be:</p><pre class="programlisting">SQL&gt; describe TREESA_1M
Name                   Null?    Type
---------------------- -------- -------------
WKB_GEOM               NOT NULL  LONG RAW
ID                               NUMBER(10)
TREE_TYPE                        VARCHAR2(80)

SQL&gt; describe ROADL_1M
Name                      Null?    Type
------------------------- -------- ------------
WKB_GEOM                  NOT NULL LONG RAW
DESIGNATION                        VARCHAR2(30)
SURFACE_TYPE                       VARCHAR2(30)
NLANES                             NUMBER(2)</pre><p><a id="N4000B18" />In response to the <span class="bold"><b>DescribeFeatureType</b></span>
      request:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;DescribeFeatureType
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:myns="http://www.myserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;TypeName&gt;myns:TREESA_1M&lt;/TypeName&gt;
   &lt;TypeName&gt;myns:ROADL_1M&lt;/TypeName&gt;
&lt;/DescribeFeatureType&gt;</pre><p><a id="N4000BB8" />a web feature service may generate the following XML Schema
      document:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;schema
   targetNamespace="http://www.someserver.com/myns"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:gml="http://www.opengis.net/gml"
   elementFormDefault="qualified" version="0.1"&gt;

   &lt;import namespace="http://www.opengis.net/gml"
           schemaLocation="../gml/2.1/feature.xsd"/&gt;

   &lt;!-- =============================================
        define global elements
        ============================================= --&gt;
   &lt;element name="TREESA_1M"
            type="myns:TREESA_1M_Type"
            substitutionGroup="gml:_Feature"/&gt;

   &lt;element name="ROADL_1M"
            type="myns:ROADL_1M_Type"
            substitutionGroup="gml:_Feature"/&gt;

   &lt;!-- ============================================
        define complex types (classes)
        ============================================ --&gt;
   &lt;complexType name="TREESA_1M_Type"&gt;
      &lt;complexContent&gt;
         &lt;extension base="gml:AbstractFeatureType"&gt;
            &lt;sequence&gt;
               &lt;element name="WKB_GEOM"
                        type="gml:PolygonPropertyType" nillable="false"/&gt;
               &lt;element name="ID" nillable="true" minOccurs="0"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="integer"&gt;
                        &lt;totalDigits value="10"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="TREE_TYPE" nillable="true" minOccurs="0"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="80"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
            &lt;/sequence&gt;
         &lt;/extension&gt;
      &lt;/complexContent&gt;
   &lt;/complexType&gt;

   &lt;complexType name="ROADL_1M_Type"&gt;
      &lt;complexContent&gt;
         &lt;extension base="gml:AbstractFeatureType"&gt;
            &lt;sequence&gt;
               &lt;element name="WKB_GEOM"
                        type="gml:LineStringPropertyType"
                        nillable="false"/&gt;
               &lt;element name="DESIGNATION" nillable="true" minOccurs="0"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;

                        &lt;maxLength value="30"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="SURFACE_TYPE" nillable="true" minOccurs="0"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="30"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="NLANES" nillable="true" minOccurs="0"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="integer"&gt;
                        &lt;totalDigits value="2"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
            &lt;/sequence&gt;
         &lt;/extension&gt;
      &lt;/complexContent&gt;
   &lt;/complexType&gt;
&lt;/schema&gt;</pre><p><a id="N4000C18" />Using this schema description, a client could then express the
      state of a TREESA_1M feature instance and/or a ROADL_1M feature instance
      as shown in the following example:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:FeatureCollection
   xmlns="http://www.someserver.com/myns"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd
                       http://www.someserver.com/myns ex07.xsd"&gt;
   &lt;gml:boundedBy&gt;
      &lt;gml:Box srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
         &lt;gml:coordinates&gt;-180.0,-90.0 180.0,90.0&lt;/gml:coordinates&gt;
      &lt;/gml:Box&gt;
   &lt;/gml:boundedBy&gt;
   &lt;gml:featureMember&gt;
      &lt;TREESA_1M&gt;
         &lt;WKB_GEOM&gt;
            &lt;gml:Polygon&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                     &lt;gml:coordinates decimal="." cs="," ts=" "&gt;-120.000000,65.588264
 -120.003571,65.590782 -120.011292,65.590965 -120.022491,65.595215 -120.031212,65.592880
 -120.019363,65.586121 -120.030350,65.585365 -120.045082,65.581848 -120.059540,65.584938
 -120.067284,65.590500 -120.067284,65.595436 -120.067337,65.613441 -120.067337,65.613777
 -120.060997,65.606346 -120.045517,65.605545 -120.022675,65.599777 -120.003975,65.601036
 -120.000000,65.602081 -120.000000,65.602081 -120.000000,65.588264&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/WKB_GEOM&gt;
         &lt;ID&gt;0000000002&lt;/ID&gt;
         &lt;TREE_TYPE&gt;Maple&lt;/TREE_TYPE&gt;
      &lt;/TREESA_1M&gt;
   &lt;/gml:featureMember&gt;
   &lt;gml:featureMember&gt;
      &lt;ROADL_1M&gt;
         &lt;WKB_GEOM&gt;
            &lt;gml:LineString srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates decimal="." cs="," ts=" "&gt;-59.478340,-52.226578
 -59.484871,-52.223564 -59.488991,-52.198524 -59.485958,-52.169559 -59.480400,-52.152615
 -59.465576,-52.141491 -59.462002,-52.136417 -59.447968,-52.127190 -59.422928,-52.120701
 -59.411915,-52.117844 -59.397972,-52.116440 -59.371311,-52.121300&lt;/gml:coordinates&gt;
            &lt;/gml:LineString&gt;
         &lt;/WKB_GEOM&gt;
         &lt;DESIGNATION&gt;HYW 401&lt;/DESIGNATION&gt;
         &lt;SURFACE_TYPE&gt;ASPHALT&lt;/SURFACE_TYPE&gt;
         &lt;NLANES&gt;12&lt;/NLANES&gt;
      &lt;/ROADL_1M&gt;
   &lt;/gml:featureMember&gt;
&lt;/wfs:FeatureCollection&gt;
</pre></div><div class="example"><a id="N10848" /><p class="title"><b>Example 8. Example 2</b></p><p xmlns=""><a id="N4000CD8" />This example describes a collection type, <span class="emphasis"><em>People</em></span>,
      composed of feature instances of the feature type <span class="emphasis"><em>Person</em></span>,
      that includes a complex property <span class="emphasis"><em>Address.</em></span>
</p><p><a id="N4000D88" />In response to the <span class="bold"><b>DescribeFeatureType</b></span>
      request:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;DescribeFeatureType
   version="1.0.0"
   service="WFS"
   outputFormat="XMLSCHEMA"
   xmlns="http://www.opengis.net/wfs"
   xmlns:myns="http://www.myserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;TypeName&gt;myns:People&lt;/TypeName&gt;
&lt;/DescribeFeatureType&gt;
</pre><p><a id="N4000E28" />a web feature service might generate an XML Schema document that
      looks like:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;xsd:schema
   targetNamespace="http://www.someserver.com/myns"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified" version="0.1"&gt;

   &lt;xsd:import namespace="http://www.opengis.net/gml"
               schemaLocation="../gml/2.1/feature.xsd"/&gt;

   &lt;xsd:element name="Person"
                type="myns:PersonType"
                substitutionGroup="gml:_Feature"/&gt;

   &lt;xsd:complexType name="PersonType"&gt;
      &lt;xsd:complexContent&gt;
         &lt;xsd:extension base="gml:AbstractFeatureType"&gt;
            &lt;xsd:sequence&gt;
               &lt;xsd:element name="LastName" nillable="true"&gt;
                  &lt;xsd:simpleType&gt;
                     &lt;xsd:restriction base="string"&gt;
                        &lt;xsd:maxLength value="30"/&gt;
                     &lt;/xsd:restriction&gt;
                  &lt;/xsd:simpleType&gt;
               &lt;/xsd:element&gt;
               &lt;xsd:element name="FirstName" nillable="true"&gt;
                  &lt;xsd:simpleType&gt;
                     &lt;xsd:restriction base="string"&gt;
                        &lt;xsd:maxLength value="10"/&gt;
                     &lt;/xsd:restriction&gt;
                  &lt;/xsd:simpleType&gt;
               &lt;/xsd:element&gt;
               &lt;xsd:element name="Age"
                            type="integer"
                            nillable="true"/&gt;
               &lt;xsd:element name="Sex"
                            type="string"/&gt;
               &lt;xsd:element name="Location"
                            type="gml:PointPropertyType"
                            nillable="true"/&gt;
               &lt;xsd:element name="Address"
                            type="myns:AddressType"
                            nillable="true"/&gt;
            &lt;/xsd:sequence&gt;
         &lt;/xsd:extension&gt;
      &lt;/xsd:complexContent&gt;
   &lt;/xsd:complexType&gt;

   &lt;xsd:complexType name="AddressType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="StreetName" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="30"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="StreetNumber" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="10"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="City" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="30"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="Province" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="30"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="PostalCode" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="15"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="Country" nillable="true"&gt;
            &lt;xsd:simpleType&gt;
               &lt;xsd:restriction base="string"&gt;
                  &lt;xsd:maxLength value="30"/&gt;
               &lt;/xsd:restriction&gt;
            &lt;/xsd:simpleType&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;</pre><p><a id="N4000E88" />A sample instance document that validates against this schema
      might be:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:FeatureCollection
xmlns="http://www.someserver.com/myns"
xmlns:myns="http://www.someserver.com/myns"
xmlns:wfs="http://www.opengis.net/wfs"
xmlns:gml="http://www.opengis.net/gml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd
                    http://www.someserver.com/myns ex10.xsd"&gt;
   &lt;gml:boundedBy&gt;
      &lt;gml:Box&gt;
         &lt;gml:coord&gt;
            &lt;gml:X&gt;10&lt;/gml:X&gt;
            &lt;gml:Y&gt;10&lt;/gml:Y&gt;
         &lt;/gml:coord&gt;
       &lt;gml:coord&gt;
            &lt;gml:X&gt;20&lt;/gml:X&gt;
            &lt;gml:Y&gt;20&lt;/gml:Y&gt;
         &lt;/gml:coord&gt;
      &lt;/gml:Box&gt;
   &lt;/gml:boundedBy&gt;
   &lt;gml:featureMember&gt;
      &lt;Person&gt;
         &lt;myns:LastName&gt;Smith&lt;/myns:LastName&gt;
         &lt;myns:FirstName&gt;Fred&lt;/myns:FirstName&gt;
         &lt;myns:Age&gt;35&lt;/myns:Age&gt;
         &lt;myns:Sex&gt;Male&lt;/myns:Sex&gt;
         &lt;myns:Location&gt;
            &lt;gml:Point&gt;&lt;gml:coordinates&gt;15,15&lt;/gml:coordinates&gt;&lt;/gml:Point&gt;
         &lt;/myns:Location&gt;
         &lt;myns:Address&gt;
            &lt;myns:StreetName&gt;Main St.&lt;/myns:StreetName&gt;
            &lt;myns:StreetNumber&gt;5&lt;/myns:StreetNumber&gt;
            &lt;myns:City&gt;SomeCity&lt;/myns:City&gt;
            &lt;myns:Province&gt;SomeProvince&lt;/myns:Province&gt;
            &lt;myns:PostalCode&gt;X1X 1X1&lt;/myns:PostalCode&gt;
            &lt;myns:Country&gt;Canada&lt;/myns:Country&gt;
         &lt;/myns:Address&gt;
      &lt;/Person&gt;
   &lt;/gml:featureMember&gt;
&lt;/wfs:FeatureCollection&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="GetFeature" />16. GetFeature Operation</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000079" />16.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C9" />The <span class="bold"><b>GetFeature</b></span> operation allows retrieval of features from a web feature service. A <span class="bold"><b>GetFeature</b></span> request is processed by a WFS and an XML document, containing the result set, is returned to the client.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000189" />16.2. Request</h3></div></div><div xmlns="" /></div><p><a id="N40001D9" />The XML encoding of a <span class="bold"><b>GetFeature</b></span> request is defined by the following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="GetFeature" type="wfs:GetFeatureType"/&gt;
   &lt;xsd:complexType name="GetFeatureType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:Query" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="outputFormat"
                     type="xsd:string" use="optional" default="GML2"/&gt;
      &lt;/xsd:attribute&gt;
      &lt;xsd:attribute name="maxFeatures" type="xsd:positiveInteger"
                     use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Query" type="wfs:QueryType"/&gt;
   &lt;xsd:complexType name="QueryType"&gt;
     &lt;xsd:sequence&gt;
       &lt;xsd:element ref="ogc:PropertyName" minOccurs="0" maxOccurs="unbounded"/&gt;
       &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"/&gt;
     &lt;/xsd:sequence&gt;
     &lt;xsd:attribute name="handle"
                    type="xsd:string" use="optional"/&gt;
     &lt;xsd:attribute name="typeName"
                    type="xsd:QName" use="required"/&gt;
     &lt;xsd:attribute name="featureVersion"
                    type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;</pre><p><a id="N4000279" />The <span class="bold"><b>&lt;GetFeature&gt;</b></span> element contains one or more <span class="bold"><b>&lt;Query&gt;</b></span> elements, each of which in turn contain the description of a query. The results of all queries contained in a <span class="bold"><b>GetFeature</b></span> request are concatenated to produce the result set.</p><p><a id="N4000369" />The <span class="bold"><b>outputFormat</b></span> attribute defines the format to use to generate the result set. The default value is <span class="bold"><b>GML2</b></span> indicating that GML [2] shall be used. Vendor specific formats (including non-XML and binary formats), declared in the capabilities document are also possible.</p><p><a id="N4000419" />The optional <span class="bold"><b>maxFeatures</b></span> attribute can be used to limit the number of features that a <span class="bold"><b>GetFeature</b></span> request retrieves. Once the <span class="bold"><b>maxFeatures</b></span> limit is reached, the result set is truncated at that point.</p><p><a id="N4000509" />Each individual query packaged in a <span class="bold"><b>GetFeature</b></span> request is defined using the <span class="bold"><b>&lt;Query&gt;</b></span> element. The <span class="bold"><b>&lt;Query&gt;</b></span> element defines which feature type to query, what properties to retrieve and what constraints (spatial and non-spatial) to apply to those properties.</p><p><a id="N40005F9" />The <span class="bold"><b>typeName</b></span> attribute is used to indicate the name of the feature type or class to be queried.</p><p><a id="N4000669" />The <span class="bold"><b>featureVersion</b></span> attribute is included in order to accommodate systems that support feature versioning. A value of <span class="bold"><b>ALL</b></span> indicates that all versions of a feature should be fetched. Otherwise, an integer, <span class="emphasis"><em>n</em></span>, can be specified to return the nth version of a feature. The version numbers start at <span class="emphasis"><em>1</em></span>, which is the oldest version. If a version value larger than the largest version number is specified, then the latest version is returned. The default action shall be for the query to return the latest version. Systems that do not support versioning can ignore the parameter and return the only version that they have.</p><p><a id="N4000779" />The <span class="bold"><b>&lt;PropertyName&gt;</b></span> element is used to enumerate the feature properties that should be selected during a query and whose values should be included in the response to a <span class="bold"><b>GetFeature</b></span> request. A client application can determine the properties of a feature by making a <span class="bold"><b>DescribeFeatureType</b></span> request before composing a <span class="bold"><b>GetFeature</b></span> request. The <span class="bold"><b>DescribeFeatureType</b></span> operation [sec. 8] will generate a GML application schema defining the schema of the feature type. The client can then select the properties to be fetched. In addition, the client can determine which feature properties are mandatory and must be fetched in order for the WFS to be able to generate an instance of the feature type that will validate againt the generated GML application schema. In the event that a WFS encounters a query that does not select all mandatory properties of a
    feature, the WFS will internally augment the property name list to include all necessary property names. A WFS client must thus be prepared to deal with a situation where it receives more property values than it requests.</p><p><a id="N40008E9" />If no <span class="bold"><b>&lt;PropertyName&gt;</b></span> elements are specified, then all feature properties should be fetched.</p><p><a id="N4000959" />The <span class="bold"><b>&lt;Filter&gt;</b></span> element can be used to define constraints on a query. Both spatial and/or non-spatial constraints can be specified as described in the Filter Encoding Specification [3]. If no <span class="bold"><b>&lt;Filter&gt;</b></span> element is contained within the <span class="bold"><b>&lt;Query&gt;</b></span> element, then the query is unconstrained and all feature instances should be retrieved.</p><p><a id="N4000A49" />The <span class="bold"><b>&lt;GetFeatureWithLock&gt;</b></span> element is functionally similar to the <span class="bold"><b>&lt;GetFeature&gt;</b></span> element, except that it indicates to a web feature service to attempt to lock the features that are selected; presumably to update the features.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000B09" />16.3. Response</h3></div></div><div xmlns="" /></div><p><a id="N4000B59" />The format of the response to a <span class="bold"><b>GetFeature</b></span> request is controlled by the <span class="bold"><b>outputFormat</b></span> attribute. The default value for the <span class="bold"><b>outputFormat</b></span> attribute shall be <span class="bold"><b>GML2</b></span>. This will indicate that a WFS must generate a GML document of the result set that conforms to the OpenGIS® Geography Markup Language Implementation Specification, version 2.1.1 [2], and more specifically, the output must validate againt the GML application schema generated by the <span class="bold"><b>DescribeFeatureType</b></span> operation [sec. 8].</p><p><a id="N4000CC9" />Any GML document generated by a WFS implementation, in response to a query where the <span class="bold"><b>outputFormat</b></span> is <span class="bold"><b>GML2</b></span>, must reference an appropriate GML application schema document so that the output can be validated. This can be accomplished using the <span class="bold"><b>schemaLocation</b></span> attribute, as defined in [6]. This attribute provides hints as to the physical location of one or more schema documents which may be used for local validation and schema-validity assessment. The <span class="bold"><b>schemaLocation</b></span> attribute value contains pairs of values. The first member of each pair is the namespace for which the second member is the hint describing where to find to an appropriate schema document. The physical location of the schema documents is specified using a URI [10].</p><p><a id="N4000DF9" />The following XML fragment shows the use of the <span class="bold"><b>schemaLocation</b></span> attribute on the root element indicating the location of the an XML Schema document that can be used for validation:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:FeatureCollection
   xmlns="http://www.opengis.net/myns"
   xmlns:myns="http://www.opengis.net/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
   xsi:schemaLocation="http://www.opengis.net/myns
                       http://www.someserver.com/wfs.cgi?
                       request=DescribeFeatureType&amp;typename=TREESA_1M,ROADL_1M"&gt; …</pre><p><a id="N4000E99" />In this instance, the schema document corresponding to the <span class="emphasis"><em>myns</em></span> namespace is dynamically generated by making a <span class="bold"><b>DescribeFeatureType</b></span> request back to the server that generated the output, requesting the schema. This <span class="bold"><b>DescribeFeatureType</b></span> operation [sec. 8] requests the schema of the feature types TREESA_1M and ROADL_1M, both in the <span class="emphasis"><em>myns</em></span> namespace.</p><p><a id="N4000FA9" />It is up to each WFS implementation to arrange that the GML output makes the appropriate <span class="bold"><b>schemaLocation</b></span> reference(s) such that the output can be validated.</p><p><a id="N4001019" />For the <span class="bold"><b>&lt;GetFeatureWithLock&gt;</b></span> request, a WFS must generate a result that includes the lock identifier. The lock identifier is encoded using the lockId attribute that is defined on the <span class="bold"><b>&lt;wfs:FeatureCollection&gt;</b></span> element. The following XML fragment illustrates how to include the lockId attribute in the response to the operation:</p><pre class="programlisting">&lt;wfs:FeatureCollection lockId="00A01"… &gt;
…
&lt;/wfs:FeatureCollection&gt;</pre><p><a id="N40010F9" />The ellipses are meant to represent all the other components included in the <span class="bold"><b>GetFeatureWithLock</b></span> response which are identical to the components included in the <span class="bold"><b>GetFeature</b></span> response.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40011B9" />16.4. Exception</h3></div></div><div xmlns="" /></div><p><a id="N4001209" />In the event that a web feature service encounters an error servicing a <span class="bold"><b>GetFeature</b></span> request, it shall raise an exception as described in Section 7.7.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001289" />16.5. Examples</h3></div></div><div xmlns="" /></div><p><a id="N40012D9" />This section contains numerous examples of the GetFeature request. Some examples include sample output.</p><div class="example"><a id="N1098B" /><p class="title"><b>Example 9. Example 1</b></p><p xmlns=""><a id="N4001359" />This example fetches a specific instance of the feature type <span class="emphasis"><em>INWATERA_1M</em></span> identified by the feature identifier "INWATERA_1M.1234".</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:GetFeature
   service="WFS"
   version="1.0.0"
   outputFormat="GML2"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;wfs:Query typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1234"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Query&gt;
&lt;/wfs:GetFeature&gt;</pre></div><div class="example"><a id="N10996" /><p class="title"><b>Example 10. Example 2</b></p><p xmlns=""><a id="N4001449" />This example fetches a subset of properties of the feature type INWATERA_1M. The specific instance that is retrieved by the request is identified by the feature identifier "INWATERA_1M.1013".</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:GetFeature
   service="WFS"
   version="1.0.0"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;wfs:Query typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:PropertyName&gt;myns:WKB_GEOM&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:TILE_ID&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:FAC_ID&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Query&gt;
&lt;/wfs:GetFeature&gt;</pre></div><div class="example"><a id="N1099E" /><p class="title"><b>Example 11. Example 3</b></p><p xmlns=""><a id="N4001509" />In this example, all the properties of feature type <span class="emphasis"><em>INWATERA_1M</em></span> are fetched for an enumerated list of feature instances. The <span class="bold"><b>&lt;FeatureId&gt;</b></span> element is used to identify each feature to be fetched.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:INWATERA_1M"&gt;
     &lt;ogc:Filter&gt;
        &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
        &lt;ogc:FeatureId fid="INWATERA_1M.1014"/&gt;
        &lt;ogc:FeatureId fid="INWATERA_1M.1015"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
&lt;/GetFeature&gt;</pre></div><div class="example"><a id="N109AD" /><p class="title"><b>Example 12. Example 4</b></p><p xmlns=""><a id="N4001639" />This example is similar to the previous example except in this case only some of the properties of an enumerated set of features are fetched. The <span class="bold"><b>&lt;PropertyName&gt;</b></span> element is used to list the properties to be retrieved.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:PropertyName&gt;myns:WKB_GEOM&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:TILE_ID&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1014"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1015"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
&lt;/GetFeature&gt;</pre></div><div class="example"><a id="N109B9" /><p class="title"><b>Example 13. Example 5</b></p><p xmlns=""><a id="N4001739" />Select all instances of the feature type <span class="emphasis"><em>INWATERA_1M</em></span> to a maximum of 10000 features.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   maxFeatures="10000"
   xmlns="http://www.opengis.net/wfs"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:INWATERA_1M"/&gt;
&lt;/GetFeature&gt;</pre></div><div class="example"><a id="N109C4" /><p class="title"><b>Example 14. Example 6</b></p><p xmlns=""><a id="N4001829" />The following unconstrained request fetches all the instances of an enumerated set of feature types. Notice that the feature types are not all in the same namespace</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:yourns="http://demo.cubewerx.com/yourns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:INWATERA_1M"/&gt;
   &lt;Query typeName="myns:BUILTUPA_1M"/&gt;
   &lt;Query typeName="yourns:ROADL_1M"/&gt;
&lt;/GetFeature&gt;</pre></div><div class="example"><a id="N109CC" /><p class="title"><b>Example 15. Example 7</b></p><p xmlns=""><a id="N40018E9" />The following example selects the geometry and depth from the <span class="emphasis"><em>HYDROGRAPHY</em></span> feature for the area of the Grand Banks. The Grand Banks are bounded by the following box: [-57.9118,46.2023,-46.6873,51.8145].</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   handle="Query01"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:HYDROGRAPHY"&gt;
      &lt;ogc:PropertyName&gt;myns:GEOTEMP&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:DEPTH&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:Not&gt;
            &lt;ogc:Disjoint&gt;
               &lt;ogc:PropertyName&gt;myns:GEOTEMP&lt;/ogc:PropertyName&gt;
               &lt;gml:Box&gt;
               &lt;gml:coordinates&gt;-57.9118,46.2023 -46.6873,51.8145&lt;/gml:coordinates&gt;
               &lt;/gml:Box&gt;
            &lt;/ogc:Disjoint&gt;
         &lt;/ogc:Not&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
&lt;/GetFeature&gt;</pre><p><a id="N4001979" />The output from such a request might be:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:FeatureCollection
   xmlns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.someserver.com/myns HYDROGRAPHY.xsd
                       http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;gml:boundedBy&gt;
      &lt;gml:Box srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
         &lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;
      &lt;/gml:Box&gt;
   &lt;/gml:boundedBy&gt;
   &lt;gml:featureMember&gt;
      &lt;HYDROGRAPHY fid="HYDROGRAPHY.450"&gt;
         &lt;GEOTEMP&gt;
            &lt;gml:Point srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;10,10&lt;/gml:coordinates&gt;
            &lt;/gml:Point&gt;
         &lt;/GEOTEMP&gt;
         &lt;DEPTH&gt;565&lt;/DEPTH&gt;
      &lt;/HYDROGRAPHY&gt;
   &lt;/gml:featureMember&gt;
   &lt;gml:featureMember&gt;
      &lt;HYDROGRAPHY fid="HYDROGRAPHY.450"&gt;
         &lt;GEOTEMP&gt;
            &lt;gml:Point srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;10,11&lt;/gml:coordinates&gt;
            &lt;/gml:Point&gt;
         &lt;/GEOTEMP&gt;
         &lt;DEPTH&gt;566&lt;/DEPTH&gt;
      &lt;/HYDROGRAPHY&gt;
   &lt;/gml:featureMember&gt;
   &lt;!—
   .
   . … more HYDROGRAPHY instances …
   .
   --&gt;
&lt;/wfs:FeatureCollection&gt;</pre></div><div class="example"><a id="N109DC" /><p class="title"><b>Example 16. Example 8</b></p><p xmlns=""><a id="N4001A39" />This example describes two queries that fetch instances of <span class="emphasis"><em>ROADS</em></span> and <span class="emphasis"><em>RAILS</em></span> that lie within a single region of interest.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   handle="Example Query"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"&gt;
   &lt;Query typeName="myns:ROADS"&gt;
      &lt;ogc:PropertyName&gt;myns:PATH&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:LANES&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:SURFACETYPE&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:Within&gt;
            &lt;ogc:PropertyName&gt;myns:PATH&lt;/ogc:PropertyName&gt;
            &lt;gml:Box&gt;
               &lt;gml:coordinates&gt;50,40 100,60&lt;/gml:coordinates&gt;
            &lt;/gml:Box&gt;
         &lt;/ogc:Within&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
   &lt;Query typeName="myns:RAILS"&gt;
      &lt;ogc:PropertyName&gt;myns:TRACK&lt;/ogc:PropertyName&gt;
      &lt;ogc:PropertyName&gt;myns:GAUGE&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:Within&gt;
            &lt;ogc:PropertyName&gt;myns:TRACK&lt;/ogc:PropertyName&gt;
            &lt;gml:Box&gt;
               &lt;gml:coordinates&gt;50,40 100,60&lt;/gml:coordinates&gt;
            &lt;/gml:Box&gt;
         &lt;/ogc:Within&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
&lt;/GetFeature&gt;</pre><p><a id="N4001AF9" />The results of each query are concatenated to form the output feature collection.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:FeatureCollection
   xmlns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd
                       http://www.someserver.com/myns ROADSRAILS.xsd"&gt;
   &lt;gml:boundedBy&gt;
      &lt;gml:Box srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
         &lt;gml:coordinates&gt;0,0 180,360&lt;/gml:coordinates&gt;
      &lt;/gml:Box&gt;
   &lt;/gml:boundedBy&gt;
   &lt;gml:featureMember&gt;
      &lt;ROADS fid="ROADS.100"&gt;
         &lt;PATH&gt;
            &lt;gml:LineString gid="1"
                 srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;10,10 10,11 10,12 10,13&lt;/gml:coordinates&gt;
            &lt;/gml:LineString&gt;
         &lt;/PATH&gt;
         &lt;SURFACE_TYPE&gt;ASPHALT&lt;/SURFACE_TYPE&gt;
         &lt;NLANES&gt;4&lt;/NLANES&gt;
      &lt;/ROADS&gt;
   &lt;/gml:featureMember&gt;
   &lt;gml:featureMember&gt;
      &lt;ROADS fid="ROADS.105"&gt;
         &lt;PATH&gt;
            &lt;gml:LineString gid="2"
                 srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;10,10 10,11 10,12&lt;/gml:coordinates&gt;
            &lt;/gml:LineString&gt;
         &lt;/PATH&gt;
         &lt;SURFACE_TYPE&gt;GRAVEL&lt;/SURFACE_TYPE&gt;
         &lt;NLANES&gt;2&lt;/NLANES&gt;
      &lt;/ROADS&gt;
   &lt;/gml:featureMember&gt;
   &lt;!--
   ... more ROADS features ....
   --&gt;
   &lt;gml:featureMember&gt;
      &lt;RAILS fid="RAILS.119"&gt;
         &lt;TRACK&gt;
            &lt;gml:LineString gid="n"
                 srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;15,10 16,11 17,12&lt;/gml:coordinates&gt;
            &lt;/gml:LineString&gt;
         &lt;/TRACK&gt;
         &lt;GAUGE&gt;24&lt;/GAUGE&gt;
      &lt;/RAILS&gt;
   &lt;/gml:featureMember&gt;
   &lt;!--
   ... more RAILS features ....
   --&gt;
&lt;/wfs:FeatureCollection&gt;</pre></div><div class="example"><a id="N109EF" /><p class="title"><b>Example 17. Example 9</b></p><p xmlns=""><a id="N4001BB9" />This example illustrates how complex properties of features can be referenced using XPath expressions. Consider the feature type Person defined as:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;schema
   targetNamespace="http://www.opengis.net/myns"
   xmlns:myns="http://www.opengis.net/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"
   version="1.0"&gt;

   &lt;import namespace="http://www.opengis.net/gml"
           schemaLocation="../gml/2.1/feature.xsd"/&gt;

   &lt;element name="Person" type="myns:PersonType"
            substitutionGroup="gml:_Feature"/&gt;
   &lt;complexType name="PersonType"&gt;
      &lt;complexContent&gt;
         &lt;extension base="gml:AbstractFeatureType"&gt;
            &lt;sequence&gt;
               &lt;element name="LastName" nillable="true"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="30"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="FirstName" nillable="true"&gt;
                  &lt;simpleType&gt;
                     &lt;restriction base="string"&gt;
                        &lt;maxLength value="10"/&gt;
                     &lt;/restriction&gt;
                  &lt;/simpleType&gt;
               &lt;/element&gt;
               &lt;element name="Age" type="integer" nillable="true"/&gt;
               &lt;element name="Sex" type="string"/&gt;
               &lt;element name="Spouse"&gt;
                  &lt;complexType&gt;
                     &lt;attribute name="sin" type="xsd:anyURI" use="required" /&gt;
                  &lt;/complexType&gt;
               &lt;/element&gt;
               &lt;element name="Location"
                        type="gml:PointPropertyType"
                        nillable="true"/&gt;
               &lt;element name="Address" type="myns:AddressType" nillable="true"/&gt;
            &lt;/sequence&gt;
            &lt;attribute name="sin" type="xsd:anyURI" use="required"/&gt;
         &lt;/extension&gt;
      &lt;/complexContent&gt;
   &lt;/complexType&gt;

   &lt;complexType name="AddressType"&gt;
      &lt;sequence&gt;
         &lt;element name="StreetName" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="StreetNumber" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="10"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="City" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="Province" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="PostalCode" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="15"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
         &lt;element name="Country" nillable="true"&gt;
            &lt;simpleType&gt;
               &lt;restriction base="string"&gt;
                  &lt;maxLength value="30"/&gt;
               &lt;/restriction&gt;
            &lt;/simpleType&gt;
         &lt;/element&gt;
      &lt;/sequence&gt;
   &lt;/complexType&gt;
&lt;/schema&gt;</pre><p><a id="N4001C19" />The Address property is a complex property.</p><p><a id="N4001C49" />The following example fetches the last name of all the people who live on the 10000 block of "Main St." in the town of "SomeTown" who are female and make over $35,000 in salary. Note the use of XPath expressions in the predicate to reference complex properties.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetFeature
   version="1.0.0"
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd
                       http://www.someserver.com/myns Person.xsd"&gt;
   &lt;Query typeName="Person"&gt;
      &lt;ogc:PropertyName&gt;myns:Person/myns:LastName&lt;/ogc:PropertyName&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:And&gt;
            &lt;ogc:And&gt;
               &lt;ogc:PropertyIsGreaterThanOrEqualTo&gt;
&lt;ogc:PropertyName&gt;myns:Person/myns:Address/myns:StreetNumber&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;10000&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsGreaterThanOrEqualTo&gt;
               &lt;ogc:PropertyIsLessThanOrEqualTo&gt;
&lt;ogc:PropertyName&gt;myns:Person/myns:Address/myns:StreetNumber&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;10999&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsLessThanOrEqualTo&gt;
            &lt;/ogc:And&gt;
            &lt;ogc:And&gt;
               &lt;ogc:PropertyIsEqualTo&gt;
&lt;ogc:PropertyName&gt;myns:Person/myns:Address/myns:StreetName&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;Main St.&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsEqualTo&gt;
               &lt;ogc:PropertyIsEqualTo&gt;
&lt;ogc:PropertyName&gt;myns:Person/myns:Address/myns:City&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;SomeTown&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsEqualTo&gt;
               &lt;ogc:PropertyIsEqualTo&gt;
                  &lt;ogc:PropertyName&gt;myns:Person/myns:Sex&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;Female&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsEqualTo&gt;
               &lt;ogc:PropertyIsGreaterThan&gt;
                  &lt;ogc:PropertyName&gt;myns:Person/myns:Salary&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;35000&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsGreaterThan&gt;
            &lt;/ogc:And&gt;
         &lt;/ogc:And&gt;
      &lt;/ogc:Filter&gt;
   &lt;/Query&gt;
&lt;/GetFeature&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="LockFeature" />17. LockFeature operation</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40000710" />17.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C10" />Web connections are inherently stateless. As a consequence of this,
    the semantics of serializable transactions are not preserved. To
    understand the issue, consider an update operation.</p><p><a id="N40000F10" />The client fetches a feature instance. The feature is then modified
    on the client side, and submitted back to the database via a <span class="bold"><b>Transaction</b></span> request for update. Serializability is
    lost since there is nothing to guarantee that while the feature was being
    modified on the client side, another client did not come along and update
    that same feature in the database.</p><p><a id="N40001610" />The client fetches a feature instance. The feature is then modified
    on the client side, and submitted back to the database via a Transaction
    request for update. Serializability is lost since there is nothing to
    guarantee that while the feature was being modified on the client side,
    another client did not come along and update that same feature in the
    database.</p><p><a id="N40001910" />The purpose of the <span class="bold"><b>LockFeature</b></span>
    operation is to expose <span class="emphasis"><em>a long term feature</em></span> locking
    mechanism to ensure consistency. The lock is considered long term because
    network latency would make feature locks last relatively longer than
    native commercial database locks.</p><p><a id="N40002310" />The <span class="bold"><b>LockFeature</b></span> operation is
    optional and does not need to be implemented for a WFS implementation to
    conform to this specification. If a WFS implements the <span class="bold"><b>LockFeature</b></span> operation, this fact must be advertised
    in the capabilities document [sec. 12].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40002F10" />17.2. Request</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40003410" />17.2.1. Schema definition</h4></div></div><div xmlns="" /></div><p><a id="N40003910" />The XML encoding of a <span class="bold"><b>LockFeature</b></span>
      request is defined by the following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="LockFeature" type="wfs:LockFeatureType"/&gt;
   &lt;xsd:complexType name="LockFeatureType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Lock" type="wfs:LockType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="expiry"
                     type="xsd:positiveInteger" use="optional"/&gt;
      &lt;xsd:attribute name="lockAction"
                     type="wfs:AllSomeType" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="LockType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName"
                     type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;</pre><p><a id="N40004310" />The <span class="bold"><b>&lt;LockFeature&gt;</b></span> element
      contains one or more <span class="bold"><b>&lt;Lock&gt;</b></span>
      elements that define a locking operation on feature instances of one
      feature type.</p><p><a id="N40004E10" />The <span class="bold"><b>expiry</b></span> attribute is used to
      set a limit on how long a web feature service should hold a lock on
      feature instances in the event that a transaction is never issued that
      will release the lock. The <span class="emphasis"><em>expiry</em></span> limit is
      specified in minutes. Once the specified number of minutes have elapsed,
      a web feature service may release the lock if it exists. Any further
      transactions issued against that lock using a lock identifier generated
      by the service will fail. This specification does not constrain how long
      a lock should be held if the <span class="bold"><b>expiry</b></span>
      attribute is not specified. However, it would be prudent for a web
      feature service implementation to include methods to detect and release
      locks that have been maintained for a long period of time without any
      transactions being executed to release them.</p><p><a id="N40005C10" />The <span class="bold"><b>&lt;Lock&gt;</b></span> element
      contains a single <span class="bold"><b>&lt;Filter&gt;</b></span>
      element that is used to define the set of feature instances of the
      specified feature type to be locked. Using the <span class="bold"><b>&lt;Filter&gt;</b></span>
      element, one or more feature instances can be enumerated using their
      identifiers; or a set of features can be identified by specifying
      spatial and non-spatial constrains for the lock operation. The <span class="bold"><b>&lt;Filter&gt;</b></span> element is defined in the Filter
      Encoding Implementation Specification [3].</p><p><a id="N40006F10" />The optional <span class="bold"><b>lockAction</b></span> attribute
      is used to control how feature locks are acquired. A lock action of
      <span class="bold"><b>ALL</b></span> indicates that a web feature
      service should try to acquire a lock on all requested feature instances.
      If all feature instances cannot be locked, then the operation should
      fail, and no feature instances should remain locked. If the lock action
      is set to <span class="bold"><b>SOME</b></span>, then a web feature
      service shall attempt to lock as many of the requested feature instances
      as it can. The default lock action shall be <span class="bold"><b>ALL</b></span>.
      Section 10.2.2 presents a state machine for the <span class="bold"><b>LockFeature</b></span>
      operation.</p><p><a id="N40008610" />The approach to dynamic modeling used, is that described by the
      UML Reference Manual. The main technique is the state machine view. A
      summary of the UML notation for state diagrams is shown in Figure 4.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40008A10" />17.2.2. State machine notation from UML</h4></div></div><div xmlns="" /></div><p><a id="N40008F10" /></p><div class="figure"><a id="N10A86" /><p class="title"><b>Figure 3. Figure 4 – Summary of UML state diagram notation</b></p><div xmlns="" class="mediaobject"><img src="images/10_UMLNotation.gif" alt="Figure 4 – Summary of UML state diagram notation" /></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000A110" />17.2.3. State machine for WFS locking</h4></div></div><div xmlns="" /></div><p><a id="N4000A610" />This section defines the state machine for the Lock State for a
      server that provides the Web Feature Service interface. The state
      diagram shows the allowed transitions between the states. All other
      state transitions are disallowed and are consider errors if exhibited by
      a server.</p><p><a id="N4000A910" />A physical server may support more than one lock. Each of the
      locks are independent when viewed from the service defined by the WFS
      specification.</p><p><a id="N4000AC10" />In the state model below, a transition is typically triggered by a
      request. Following the messaging model, a WFS Request is paired with a
      WFS Response. Note that a request-response pair cannot be started while
      it is active. The request may be cancelled by a HTTP-level command.</p><div class="figure"><a id="N10A9A" /><p class="title"><b>Figure 4. Figure 5 –State diagram for a WFS lock</b></p><div xmlns="" class="mediaobject"><img src="images/10_LockStateDiagram.gif" alt="Figure 5 –State diagram for a WFS lock" /></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4000C010" />17.3. Response</h3></div></div><div xmlns="" /></div><p><a id="N4000C510" />The XML encoding of the response to a <span class="bold"><b>LockFeature</b></span>
    request is defined by the following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="WFS_LockFeatureResponse"
                type="wfs:WFS_LockFeatureResponseType"/&gt;
   &lt;!-- RESPONSE TYPES --&gt;
   &lt;xsd:complexType name="WFS_LockFeatureResponseType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:LockId"/&gt;
         &lt;xsd:element name="FeaturesLocked"
                      type="wfs:FeaturesLockedType" minOccurs="0"/&gt;
         &lt;xsd:element name="FeaturesNotLocked"
                      type="wfs:FeaturesNotLockedType" minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="FeaturesLockedType"&gt;
     &lt;xsd:sequence maxOccurs="unbounded"&gt;
       &lt;xsd:element ref="ogc:FeatureId"/&gt;
     &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="FeaturesNotLockedType"&gt;
     &lt;xsd:sequence maxOccurs="unbounded"&gt;
       &lt;xsd:element ref="ogc:FeatureId"/&gt;
     &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;</pre><p><a id="N4000CF10" />In response to a <span class="bold"><b>LockFeature</b></span>
    request, a web feature service shall generate an XML document. This
    document will contain a lock identifier that a client application can use
    in subsequent WFS operations to operate upon the set of locked feature
    instances. The response may also contain the optional elements <span class="bold"><b>&lt;FeaturesLocked&gt;</b></span> and <span class="bold"><b>&lt;FeaturesNotLocked&gt;</b></span>
    depending on the value of the <span class="bold"><b>lockAction</b></span>
    attribute.</p><p><a id="N4000E210" />If the lock action is specified as <span class="bold"><b>SOME</b></span>,
    then the <span class="bold"><b>&lt;WFS_LockFeatureResponse&gt;</b></span>
    element must contain the <span class="bold"><b>&lt;FeaturesLocked&gt;</b></span>
    and <span class="bold"><b>&lt;FeatureNotLocked&gt;</b></span> elements..
    The <span class="bold"><b>&lt;FeaturesLocked&gt;</b></span> element
    shall list the feature identifiers of all the feature instances that were
    locked by the <span class="bold"><b>LockFeature</b></span> request. The
    <span class="bold"><b>&lt;FeaturesNotLocked&gt;</b></span> element shall
    contain a list of feature identifiers for the feature instances that could
    not be locked by the web feature service (possibly because they were
    already locked by someone else).</p><p><a id="N40010110" />No assumption is made about the format of the lock identifier. The
    only requirement is that it can be expressed in the character set of the
    transaction request.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40010510" />17.4. Exception</h3></div></div><div xmlns="" /></div><p><a id="N40010A10" />If a WFS does not implement the <span class="bold"><b>LockFeature</b></span>
    operation then it should generate an exception, indicating that the
    operation is not supported, if such a request is encountered.</p><p><a id="N40011110" />In the event that a web feature service does support the <span class="bold"><b>LockFeature</b></span> operation and encounters an error
    servicing the request, it shall raise an exception as described in Section
    7.7.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40011910" />17.5. Examples</h3></div></div><div xmlns="" /></div><div class="example"><a id="N10AF9" /><p class="title"><b>Example 18. Example 1</b></p><p xmlns=""><a id="N40012310" />Lock a set of enumerated features. The WFS is, in this case,
      directed to try and lock as many features as it can.</p><div class="example"><a id="N10AFF" /><p class="title"><b>Example 19. Request:</b></p><pre xmlns="" class="programlisting">&lt;?xml
      version="1.0" ?&gt; &lt;LockFeature version="1.0.0"
      service="WFS" lockAction="SOME"
      xmlns="http://www.opengis.net/wfs"
      xmlns:myns="http://www.someserver.com/myns"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt; &lt;Lock
      typeName="myns:INWATERA_1M"&gt; &lt;ogc:Filter&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1014"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1015"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1016"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1017"/&gt;
      &lt;/ogc:Filter&gt; &lt;/Lock&gt; &lt;/LockFeature&gt;</pre></div><div class="example"><a id="N10B04" /><p class="title"><b>Example 20. Sample response:</b></p><pre xmlns="" class="programlisting">&lt;?xml version="1.0" ?&gt;
      &lt;WFS_LockFeatureResponse xmlns="http://www.opengis.net/wfs"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt;
      &lt;LockId&gt;1&lt;/LockId&gt; &lt;FeaturesLocked&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1014"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1016"/&gt;
      &lt;ogc:FeatureId fid="INWATERA_1M.1017"/&gt;
      &lt;/FeaturesLocked&gt; &lt;FeaturesNotLocked&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.1015"/&gt; &lt;/FeaturesNotLocked&gt;
      &lt;/WFS_LockFeatureResponse&gt;</pre></div></div><div class="example"><a id="N10B09" /><p class="title"><b>Example 21. Example 2</b></p><p xmlns=""><a id="N40013A10" />Lock all the feature instances of type INWATERA_1M.</p><div class="example"><a id="N10B0F" /><p class="title"><b>Example 22. Request:</b></p><pre xmlns="" class="programlisting">&lt;?xml
      version="1.0" ?&gt; &lt;LockFeature version="1.0.0"
      service="WFS" xmlns="http://www.opengis.net/wfs"
      xmlns:myns="http://www.someserver.com/myns"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt; &lt;Lock
      typeName="myns:INWATERA_1M"/&gt; &lt;/LockFeature&gt;</pre></div><div class="example"><a id="N10B14" /><p class="title"><b>Example 23. Sample response:</b></p><pre xmlns="" class="programlisting">&lt;?xml version="1.0" ?&gt;
      &lt;WFS_LockFeatureResponse xmlns="http://www.opengis.net/wfs"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt;
      &lt;LockId&gt;2&lt;/LockId&gt; &lt;/WFS_LockFeatureResponse&gt;</pre></div></div><div class="example"><a id="N10B19" /><p class="title"><b>Example 24. Example 3</b></p><p xmlns=""><a id="N40015110" />In this example a <span class="bold"><b>&lt;Filter&gt;</b></span>
      expression using a spatial constraint is used to identify the set of
      feature instances to be locked.</p><div class="example"><a id="N10B23" /><p class="title"><b>Example 25. Request:</b></p><pre xmlns="" class="programlisting">&lt;?xml
      version="1.0" ?&gt; &lt;LockFeature version="1.0.0"
      service="WFS" xmlns="http://www.opengis.net/wfs"
      xmlns:myns="http://www.someserver.com/myns"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt; &lt;Lock
      handle="Lock1" typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:Filter&gt; &lt;ogc:Within&gt;
      &lt;ogc:PropertyName&gt;myns:WKB_GEOM&lt;/ogc:PropertyName&gt;
      &lt;gml:Polygon gid="1"
      srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
      &lt;gml:outerBoundaryIs&gt; &lt;gml:LinearRing&gt;
      &lt;gml:coordinates&gt;-95.7,38.1 -97.8,38.2
      ...&lt;/gml:coordinates&gt; &lt;/gml:LinearRing&gt;
      &lt;/gml:outerBoundaryIs&gt; &lt;/gml:Polygon&gt;
      &lt;/ogc:Within&gt; &lt;/ogc:Filter&gt; &lt;/Lock&gt;
      &lt;/LockFeature&gt;</pre></div><div class="example"><a id="N10B28" /><p class="title"><b>Example 26. Sample response:</b></p><pre xmlns="" class="programlisting">&lt;?xml version="1.0" ?&gt;
      &lt;WFS_LockFeatureResponse xmlns="http://www.opengis.net/wfs"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt;
      &lt;LockId&gt;A1014375BD&lt;/LockId&gt;
      &lt;/WFS_LockFeatureResponse&gt;</pre></div></div><div class="example"><a id="N10B2D" /><p class="title"><b>Example 27. Example 4</b></p><p xmlns=""><a id="N40016C10" />This example locks features of type BUILTUPA_1M and INWATERA_1M.
      The lock labeled with the handle <span class="emphasis"><em>LOCK1</em></span> locks all
      the features inside the defined window. The lock labeled with the handle
      <span class="emphasis"><em>LOCK2</em></span> locks the features INWATERA_1M.1212,
      INWATERA_1M.1213 and INWATERA_1M.10.</p><div class="example"><a id="N10B39" /><p class="title"><b>Example 28. Request:</b></p><pre xmlns="" class="programlisting">&lt;?xml
      version="1.0" ?&gt; &lt;LockFeature version="1.0.0"
      service="WFS" xmlns="http://www.opengis.net/wfs"
      xmlns:myns="http://www.someserver.com/myns"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt; &lt;Lock
      handle="LOCK1" typeName="myns:BUILTUPA_1M"&gt;
      &lt;ogc:Filter&gt; &lt;ogc:Within&gt;
      &lt;ogc:PropertyName&gt;BUILTUPA_1M/WKB_GEOM&lt;/ogc:PropertyName&gt;
      &lt;gml:Polygon gid="1"
      srsName="http://www.opengis.net/gml/epsg.xml#4326"&gt;
      &lt;gml:outerBoundaryIs&gt; &lt;gml:LinearRing&gt;
      &lt;gml:coordinates&gt;-95.7,38.1 -97.8,38.2
      ...&lt;/gml:coordinates&gt; &lt;/gml:LinearRing&gt;
      &lt;/gml:outerBoundaryIs&gt; &lt;/gml:Polygon&gt;
      &lt;/ogc:Within&gt; &lt;/ogc:Filter&gt; &lt;/Lock&gt; &lt;Lock
      handle="LOCK2" typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:Filter&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.1212"/&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.1213"/&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.10"/&gt; &lt;/ogc:Filter&gt; &lt;/Lock&gt;
      &lt;/LockFeature&gt;</pre></div><div class="example"><a id="N10B3E" /><p class="title"><b>Example 29. Sample response:</b></p><pre xmlns="" class="programlisting">&lt;?xml version="1.0" ?&gt;
      &lt;WFS_LockFeatureResponse xmlns="http://www.opengis.net/wfs"
      xmlns:ogc="http://www.opengis.net/ogc"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.opengis.net/wfs
      ../wfs/1.0.0/WFS-transaction.xsd" &gt;
      &lt;LockId&gt;LOCK1A&lt;/LockId&gt; &lt;FeaturesLocked&gt;
      &lt;ogc:FeatureId fid="BUILTUPA_1M.1" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.10" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.34" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.786" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.3" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.13" /&gt; &lt;ogc:FeatureId
      fid="BUILTUPA_1M.47563" /&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.1212" /&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.1213" /&gt; &lt;ogc:FeatureId
      fid="INWATERA_1M.10" /&gt; &lt;/FeaturesLocked&gt;
      &lt;/WFS_LockFeatureResponse&gt;</pre></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Transaction" />18. Transaction operation</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40000711" />18.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C11" />The <span class="bold"><b>Transaction</b></span> operation is used
    to describe data transformation operations that are to be applied to web
    accessible feature instances. A web feature service may process a
    <span class="bold"><b>Transaction</b></span> operation directly or
    possibly translate it into the language of a target datastore to which it
    is connected and then have the datastore execute the transaction. When the
    transaction has been completed, a web feature service will generate an XML
    response document indicating the completion status of the transaction.</p><p><a id="N40001711" />The <span class="bold"><b>Transaction</b></span> operation is
    optional and a WFS implementation does not need to support it to conform
    to this specification. If the <span class="bold"><b>Transaction</b></span>
    operation is supported then this fact must be advertised on the
    capabilities document as describes in section 12.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40002311" />18.2. Request</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40002811" />18.2.1. Schema definition</h4></div></div><div xmlns="" /></div><p><a id="N40002D11" />The XML encoding of a <span class="bold"><b>Transaction</b></span>
      request is defined by the following XML Schema fragment:</p><pre class="programlisting">&lt;xsd:element name="Transaction" type="wfs:TransactionType"/&gt;
   &lt;xsd:complexType name="TransactionType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:LockId" minOccurs="0"/&gt;
         &lt;xsd:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xsd:element ref="wfs:Insert"/&gt;
            &lt;xsd:element ref="wfs:Update"/&gt;
            &lt;xsd:element ref="wfs:Delete"/&gt;
            &lt;xsd:element ref="wfs:Native"/&gt;
         &lt;/xsd:choice&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="releaseAction"
                     type="wfs:AllSomeType" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="LockId" type="xsd:string"/&gt;
   &lt;xsd:element name="Insert" type="wfs:InsertElementType"/&gt;
   &lt;xsd:complexType name="InsertElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="gml:_Feature" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Update" type="wfs:UpdateElementType"/&gt;
   &lt;xsd:complexType name="UpdateElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:Property" maxOccurs="unbounded"/&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName" type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Delete" type="wfs:DeleteElementType"/&gt;
   &lt;xsd:complexType name="DeleteElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="1" maxOccurs="1"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName" type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;

   &lt;xsd:element name="Property" type="wfs:PropertyType"/&gt;
   &lt;xsd:complexType name="PropertyType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Name" type="xsd:QName"/&gt;
         &lt;xsd:element name="Value"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40003811" />18.2.2. Attribute descriptions</h4></div></div><div xmlns="" /></div><p><a id="N40003D11" />As described in section 7.8, the <span class="bold"><b>handle</b></span>
      attribute can be used to assign a mnemonic name to the element with
      which it is associated. Its intended use, is to make error reporting
      more meaningful for a client application. In the event that an error is
      encountered, the <span class="bold"><b>handle</b></span> attribute can
      be used by a web feature service to locate the error when generating an
      exception report. In the event that no <span class="bold"><b>handle</b></span>
      is specified, a web feature service may attempt to report the location
      of the exception relative to the current <span class="bold"><b>Transaction</b></span>
      request using line numbers or some other convenient mechanism.</p><p><a id="N40005011" />Assuming that a WFS implementation supports the optional <span class="bold"><b>LockFeature</b></span> and/or <span class="bold"><b>GetFeatureWithLock</b></span>
      operations, the <span class="bold"><b>releaseAction</b></span> attribute
      is used to control how locked features are treated when a transaction
      request is completed. A value of <span class="bold"><b>ALL</b></span>
      indicates that the locks on all feature instances locked using the
      specified <span class="bold"><b>&lt;LockId&gt;</b></span> should be
      released when the transaction completes, regardless of whether or not a
      particular feature instance in the locked set was actually operated
      upon. A value of <span class="bold"><b>SOME</b></span> indicates that
      only the locks on feature instances modified by the transaction should
      be released. The other, unmodified, feature instances should remain
      locked using the same <span class="bold"><b>&lt;LockId&gt;</b></span>
      so that subsequent transactions can operate on those feature instances.
      In the event that the <span class="bold"><b>releaseAction</b></span> is
      set to <span class="bold"><b>SOME</b></span>, and an expiry period was
      specified on the <span class="bold"><b>&lt;LockFeature&gt;</b></span>
      or <span class="bold"><b>&lt;GetFeatureWithLock&gt;</b></span>
      elements using the <span class="bold"><b>expiry</b></span> attribute,
      the expiry counter must be reset to zero after each transaction unless
      all feature instances in the locked set have been operated upon. The
      default <span class="bold"><b>releaseAction</b></span> value is
      <span class="bold"><b>ALL</b></span>.</p><p><a id="N40008B11" />For example, if a client application locks 20 feature instances
      and then submits a transaction request that only operates on 10 of those
      locked feature instances, a <span class="bold"><b>releaseAction</b></span>
      of <span class="bold"><b>SOME</b></span> would mean that the 10
      remaining unaltered feature instances should remain locked when the
      transaction terminates. Subsequent transaction operations can then be
      submitted by the client application, using the same lock identifier to
      modify the remaining 10 feature instances.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40009711" />18.2.3. &lt;Transaction&gt; element</h4></div></div><div xmlns="" /></div><p><a id="N40009C11" />A <span class="bold"><b>&lt;Transaction&gt;</b></span> element
      may contain zero or more <span class="bold"><b>&lt;Insert&gt;</b></span>,
      <span class="bold"><b>&lt;Update&gt;</b></span>, or <span class="bold"><b>&lt;Delete&gt;</b></span> elements that describe
      operations to create, modify or destroy feature instances. An empty
      <span class="bold"><b>&lt;Transaction&gt;</b></span> request is valid
      but not very useful.</p><p><a id="N4000B311" />The optional <span class="bold"><b>&lt;LockId&gt;</b></span>
      element is used to specify that the transaction will be applied to
      previously locked set of feature instances. Section 10 presents a full
      description of a feature locking mechanism. If the WFS does not support
      feature locking, then the <span class="bold"><b>&lt;LockId&gt;</b></span>
      element can be ignored. If a WFS does support locking and an invalid
      lock identifier is specified in the transaction, then the transaction
      shall fail and the web feature service shall report the error as
      described in Section 7.7.</p><p><a id="N4000BE11" />At the end of a transaction, the web feature service shall apply
      transaction semantics appropriate to the particular system used to
      persistently store features. For example, if the datastore is a SQL
      based RDBMS, then a <span class="emphasis"><em>commit</em></span> will be executed at the
      end of the transaction (or a <span class="emphasis"><em>rollback</em></span> should the
      transaction fail). Any locks maintained by the web feature service for
      the duration of the transaction shall be released according to the value
      of the <span class="emphasis"><em>releaseAction</em></span> attribute described above.</p><p><a id="N4000CA11" />The <span class="bold"><b>&lt;Native&gt;</b></span> element is
      defined in Section 7.5.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="Transaction.Insert" />18.2.4. &lt;Insert&gt; element</h4></div></div><div xmlns="" /></div><p><a id="N4000D711" />The &lt;Insert&gt; element is used to create new feature
      instances. The initial state of a feature to be created is expressed
      using GML and must validate relative to a GML application schema
      generated by the DescribeFeatureType operation [sec. 8]. Multiple
      &lt;Insert&gt; elements can be enclosed in a single Transaction
      request and multiple feature instances can be created using a single
      &lt;Insert&gt; element.</p><p><a id="N4000DA11" />In response to an &lt;Insert&gt; operation, a web feature
      service shall generate a list of newly generated feature identifiers
      assigned to the new feature instances. The feature identifiers must be
      presented in the order in which the &lt;Insert&gt; operations were
      encountered in the Transaction request.</p><div class="example"><a id="N10C12" /><p class="title"><b>Example 30. Example</b></p><p xmlns=""><a id="N4000E211" />The following transaction creates two instances of feature type
        INWATERA_1M.</p><pre class="programlisting">&lt;?xml version="1.0"?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns="http://www.someserver.com/myns"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.someserver.com/myns
                       http://www.someserver.com/wfs/cwwfs.cgi?
                       request=describefeaturetype&amp;amp;typename=INWATERA_1M.xsd
                       http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Insert&gt;
      &lt;INWATERA_1M&gt;
         &lt;WKB_GEOM&gt;
            &lt;gml:Polygon gid="1"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                     &lt;gml:coordinates&gt;-98.54,24.26 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/WKB_GEOM&gt;
         &lt;ID&gt;150&lt;/ID&gt;
         &lt;F_CODE&gt;ABCDE&lt;/F_CODE&gt;
         &lt;HYC&gt;152&lt;/HYC&gt;
         &lt;TILE_ID&gt;250&lt;/TILE_ID&gt;
         &lt;FAC_ID&gt;111&lt;/FAC_ID&gt;
      &lt;/INWATERA_1M&gt;
      &lt;INWATERA_1M&gt;
         &lt;WKB_GEOM&gt;
            &lt;gml:Polygon gid="1"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                     &lt;gml:coordinates&gt;-99.99,22.22 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/WKB_GEOM&gt;
         &lt;ID&gt;111&lt;/ID&gt;
         &lt;F_CODE&gt;FGHIJ&lt;/F_CODE&gt;
         &lt;HYC&gt;222&lt;/HYC&gt;
         &lt;TILE_ID&gt;333&lt;/TILE_ID&gt;
         &lt;FAC_ID&gt;444&lt;/FAC_ID&gt;
      &lt;/INWATERA_1M&gt;
   &lt;/wfs:Insert&gt;
&lt;/wfs:Transaction&gt;</pre><p><a id="N4000E811" />The schema reference to INWATERA_1M.xsd is assumed to be created
        using the <span class="bold"><b>DescribeFeatureType</b></span>
        operation [sec. 8]. In this example, the document is statically
        referenced, but could just as easily have been dynamically referenced.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="Transaction.Update" />18.2.5. &lt;Update&gt; element</h4></div></div><div xmlns="" /></div><p><a id="N4000F611" />The <span class="bold"><b>&lt;Update&gt;</b></span> element
      describes one update operation that is to be applied to a feature or set
      of features of a single feature type. Multiple <span class="bold"><b>&lt;Update&gt;</b></span>
      operations can be contained in a single <span class="bold"><b>Transaction</b></span>
      request.</p><p><a id="N40010511" />An <span class="bold"><b>&lt;Update&gt;</b></span> element
      contains one or more <span class="bold"><b>&lt;Property&gt;</b></span>
      elements that specify the name and replacement value for a property that
      belongs to the feature type specified using the mandatory <span class="bold"><b>typeName</b></span> attribute. A <span class="bold"><b>&lt;Property&gt;</b></span>
      element contains a <span class="bold"><b>&lt;Name&gt;</b></span>
      element that, in turn, contains the name of the feature property to be
      modified and an optional <span class="bold"><b>&lt;Value&gt;</b></span>
      element that contains the replacement value for the named feature
      property. The omission of the <span class="bold"><b>&lt;Value&gt;</b></span>
      element means that the property should be assigned a NULL value. In the
      event that the property is not nillable, a WFS <span class="bold"><b>must</b></span>
      raise an exception indicating that NULL value is not allowed.</p><p><a id="N40012811" />The scope of the <span class="bold"><b>&lt;Update&gt;</b></span>
      element is constrained by using the <span class="bold"><b>&lt;Filter&gt;</b></span>
      element. The <span class="bold"><b>&lt;Filter&gt;</b></span> element
      can be used to limit the scope of an update operation to an enumerated
      set of features or a set of features defined using spatial and
      non-spatial constraints.</p><p><a id="N40013711" />The full definition of the <span class="bold"><b>&lt;Filter&gt;</b></span>
      element is described in the Filter Encoding Implementation Specification
      [3].</p><div class="example"><a id="N10C6D" /><p class="title"><b>Example 31. Example</b></p><p xmlns=""><a id="N40014311" />The following example updates the <span class="emphasis"><em>POPULATION</em></span>
        property of the feature identified by the feature identifier
        BUILTUPA_1M.1013.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Update typeName="BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;POPULATION&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;4070000&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.10131"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
&lt;/wfs:Transaction&gt;</pre></div><div class="example"><a id="N10C78" /><p class="title"><b>Example 32. Example</b></p><p xmlns=""><a id="N40015211" />Update the <span class="emphasis"><em>POPULATION_TYPE</em></span> property of an
        enumerated set of features. In this example, the features identified
        by feature identifiers:</p><pre class="programlisting">BUILTUPA_1M.1013
BUILTUPA_1M.34
BUILTUPA_1M.24256</pre><p><a id="N40015B11" />have their <span class="emphasis"><em>POPULATION_TYPE</em></span> attribute set to
        the value "CITY".</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Update typeName="BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;POPULATION_TYPE&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;CITY&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.1013"/&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.34"/&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.24256"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
&lt;/wfs:Transaction&gt;</pre></div><div class="example"><a id="N10C8B" /><p class="title"><b>Example 33. Example</b></p><p xmlns=""><a id="N40016A11" />Update the <span class="emphasis"><em>NAME</em></span> property of an enumerated
        set of features, and update the <span class="emphasis"><em>FAC_ID</em></span> property
        of another set of features defined by constraining the value of the
        <span class="emphasis"><em>TILE_ID</em></span> property to values greater than 1000.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Update typeName="myns:BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;myns:NAME&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;somestring&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.1013"/&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.34"/&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.24256"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
   &lt;wfs:Update typeName="myns:BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;myns:FAC_ID&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;100&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:PropertyIsGreaterThan&gt;
            &lt;ogc:PropertyName&gt;BUILTUPA_1M/TILE_ID&lt;/ogc:PropertyName&gt;
            &lt;ogc:Literal&gt;1000&lt;/ogc:Literal&gt;
         &lt;/ogc:PropertyIsGreaterThan&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
&lt;/wfs:Transaction&gt;</pre></div><div class="example"><a id="N10C9C" /><p class="title"><b>Example 34. Example</b></p><p xmlns=""><a id="N40017F11" />This example updates two feature classes, OCEANSA_1M and
        TREESA_1M. All features of OCEANSA_1M with a DEPTH greater than 2400m
        are updated and feature TREESA_1M.1010 is also updated.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Update typeName="myns:OCEANSA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;myns:DEPTH&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;2400&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:PropertyIsGreaterThan&gt;
            &lt;ogc:PropertyName&gt;OCEANSA_1M.DEPTH&lt;/ogc:PropertyName&gt;
            &lt;ogc:Literal&gt;2400&lt;/ogc:Literal&gt;
         &lt;/ogc:PropertyIsGreaterThan&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
   &lt;wfs:Update typeName="myns:TREESA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;myns:TREETYPE&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;CONIFEROUS&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="TREESA_1M.1010"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;
&lt;/wfs:Transaction&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="Transaction.Delete" />18.2.6. &lt;Delete&gt; element</h4></div></div><div xmlns="" /></div><p><a id="N40018C11" />The <span class="bold"><b>&lt;Delete&gt;</b></span> element is
      used to indicate that one or more feature instances should be deleted.
      The scope of a delete operation is constrained by using the <span class="bold"><b>&lt;Filter&gt;</b></span> element as described in the
      Filter Encoding Implementation Specification [3].</p><div class="example"><a id="N10CB3" /><p class="title"><b>Example 35. Example</b></p><p xmlns=""><a id="N40019C11" />Delete a single feature.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Delete typeName="INWATERA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Delete&gt;
&lt;/wfs:Transaction&gt;</pre></div><div class="example"><a id="N10CBB" /><p class="title"><b>Example 36. Example</b></p><p xmlns=""><a id="N4001A811" />This examples deletes an enumerated set of feature instances.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Delete typeName="myns:INWATERA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.1013"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.10"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.13"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.140"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.5001"/&gt;
         &lt;ogc:FeatureId fid="INWATERA_1M.2001"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Delete&gt;
&lt;/wfs:Transaction&gt;</pre></div><div class="example"><a id="N10CC3" /><p class="title"><b>Example 37. Example</b></p><p xmlns=""><a id="N4001B411" />This examples deletes the set of feature instances of feature
        type INWATERA_1M that lie inside a region defined by a polygon
        specified in the predicate. The <span class="bold"><b>&lt;Filter&gt;</b></span>
        element is used to constrain the scope of the operation, and GML is
        used to express the geometry of the polygon.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   xmlns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:Delete typeName="INWATERA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:Within&gt;
            &lt;ogc:PropertyName&gt;WKB_GEOM&lt;/ogc:PropertyName&gt;
            &lt;gml:Polygon gid="pp9"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                  &lt;gml:coordinates&gt;-95.7,38.1 -97.8,38.2 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/ogc:Within&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Delete&gt;
&lt;/wfs:Transaction&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4001C111" />18.3. Response</h3></div></div><div xmlns="" /></div><p><a id="N4001C611" />In response to a transaction request, a web feature service shall
    generate an XML document indicating the termination status of the
    transaction. In addition, if the transaction request includes <span class="bold"><b>&lt;Insert&gt;</b></span> operations, then the web feature
    service must report the feature identifiers of all newly created features.
    In the event that the transaction fails to execute, the web feature
    service shall also indicate this in the response.</p><p><a id="N4001CD11" />The XML encoding of the WFS transaction response is defined by the
    following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="WFS_TransactionResponse"
                type="wfs:WFS_TransactionResponseType"/&gt;
   &lt;xsd:complexType name="WFS_TransactionResponseType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="InsertResult"
                      type="wfs:InsertResultType"
                      minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;xsd:element name="TransactionResult"
                      type="wfs:TransactionResultType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="TransactionResultType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Status" type="wfs:StatusType"/&gt;
         &lt;xsd:element name="Locator" type="xsd:string" minOccurs="0"/&gt;
         &lt;xsd:element name="Message" type="xsd:string" minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="InsertResultType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:FeatureId" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="StatusType"&gt;
      &lt;xsd:choice&gt;
         &lt;xsd:element ref="wfs:SUCCESS"/&gt;
         &lt;xsd:element ref="wfs:FAILED"/&gt;
         &lt;xsd:element ref="wfs:PARTIAL"/&gt;
      &lt;/xsd:choice&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="SUCCESS" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="FAILED" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="PARTIAL" type="wfs:EmptyType"/&gt;</pre><p><a id="N4001D311" />The <span class="bold"><b>&lt;WFS_TransactionResponse&gt;</b></span>
    element contains zero or more <span class="bold"><b>&lt;InsertResult&gt;</b></span>
    elements and a <span class="bold"><b>&lt;TransactionResult&gt;</b></span>
    element.</p><p><a id="N4001E211" />The <span class="bold"><b>&lt;InsertResult&gt;</b></span> element
    contains one or more feature identifiers of newly created feature
    instances. One <span class="bold"><b>&lt;InsertResult&gt;</b></span>
    element is reported per <span class="bold"><b>&lt;Insert&gt;</b></span>
    element in the request. The insert results are reported in the order in
    which the <span class="bold"><b>&lt;Insert&gt;</b></span> operations
    were contained in the <span class="bold"><b>&lt;Transaction&gt;</b></span>
    element. Additionally, they can be correlated using the <span class="bold"><b>handle</b></span> attribute if it was specified.</p><p><a id="N4001FD11" />The overall result of a transaction request is specified using the
    <span class="bold"><b>&lt;TransactionResult&gt;</b></span> element. The
    <span class="bold"><b>&lt;TransactionResult&gt;</b></span> element must
    contain a <span class="bold"><b>&lt;Status&gt;</b></span> element and
    may contain <span class="bold"><b>&lt;Locator&gt;</b></span> and
    <span class="bold"><b>&lt;Message&gt;</b></span> elements.</p><p><a id="N40021411" />The <span class="bold"><b>&lt;Status&gt;</b></span> element is
    used to indicate the completion status of the transaction. Transactions
    can terminate with a status of:</p><div class="informaltable"><a id="N40021B11" /><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td>SUCCESS</td><td>The transaction was successfully completed.</td></tr><tr><td>FAILED</td><td>An exception was encountered while processing one or more
            elements contained in a <span class="bold"><b>Transaction</b></span>
            request.</td></tr><tr><td>PARTIAL</td><td>The transaction partially succeeded and the data may be in
            an inconsistent state. For systems that do not support atomic
            transactions, this outcome is a distinct possibility.</td></tr></tbody></table></div><p><a id="N40024411" />In the event that a transaction request fails, the <span class="bold"><b>&lt;Locator&gt;</b></span> element can be used to indicate
    which part of the transaction failed. If the element at which the failure
    occured is labeled using a <span class="bold"><b>handle</b></span>
    attribute, then a web feature service may report its value to locate the
    failure. Otherwise, a web feature service may try to identify the failure
    relative to the beginning of the transaction request, possibly using line
    numbers or some other convenient mechanism.</p><p><a id="N40024F11" />The <span class="bold"><b>&lt;Message&gt;</b></span> element is
    used to report any error messages.</p><div class="example"><a id="N10D51" /><p class="title"><b>Example 38. Example</b></p><p xmlns=""><a id="N40025B11" />Consider a transaction request (labeled "TX01") that
      creates a number of new feature instances. The feature instances are
      created using three <span class="bold"><b>&lt;Insert&gt;</b></span>
      elements labeled "STMT1", "STMT2" and "STMT3". A
      typical response to such a request might be:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:TransactionResponse
   version="1.0.0"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:InsertResult handle="STMT1"&gt;
      &lt;ogc:FeatureId fid="SOMEFEATURE.4567"/&gt;
      &lt;ogc:FeatureId fid="SOMEFEATURE.4568"/&gt;
      &lt;ogc:FeatureId fid="SOMEFEATURE.4569"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:InsertResult handle="STMT2"&gt;
      &lt;ogc:FeatureId fid="FEATURE1.4569"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:InsertResult handle="STMT3"&gt;
      &lt;ogc:FeatureId fid="FEATURE2.389345"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:TransactionResult handle="TX01"&gt;
      &lt;wfs:Status&gt;
         &lt;wfs:SUCCESS/&gt;
      &lt;/wfs:Status&gt;
   &lt;/wfs:TransactionResult&gt;
&lt;/wfs:TransactionResponse&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40026711" />18.4. Exception</h3></div></div><div xmlns="" /></div><p><a id="N40026C11" />In the event that a web feature service encounters an error
    servicing a <span class="bold"><b>Transaction</b></span> request, it shall
    raise an exception as described in Section 7.7.</p><p><a id="N40027311" />In the event that a web feature service encounters an error while
    processing a particular element contained in a <span class="bold"><b>Transaction</b></span>
    request, the web feature service shall queue the result and report the
    failure in a <span class="bold"><b>&lt;WFS_TransactionResponse&gt;</b></span>
    element [sec. 11.3].</p><div class="example"><a id="N10D73" /><p class="title"><b>Example 39. Example</b></p><p xmlns=""><a id="N40028311" />In this example, the second statement of a <span class="bold"><b>Transaction</b></span>
      request has failed. The WFS might generate a response such as:</p><pre class="programlisting">?xml version="1.0" ?&gt;
&lt;WFS_TransactionResponse
   version="1.0.0"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;

   &lt;TransactionResult handle="TX01"&gt;
      &lt;Status&gt;&lt;FAILED/&gt;&lt;/Status&gt;
      &lt;Locator&gt;STMT2&lt;/Locator&gt;
      &lt;Message&gt;ORA-00942: table or view does not exist&lt;/Message&gt;
   &lt;/TransactionResult&gt;
&lt;/WFS_TransactionResponse&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40028F11" />18.5. Examples</h3></div></div><div xmlns="" /></div><p><a id="N40029411" />This example defines a complex transaction, labeled "Transaction
    01", that performs insert, update and delete operations. Some of the
    feature types include complex properties and XPath expressions are used in
    the filter expressions to unambiguously reference the desired properties.
    Comments contained in the example explain the various operations.</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:Transaction
   version="1.0.0"
   service="WFS"
   handle="Transaction 01"
   xmlns="http://www.someserver.com/myns"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.someserver.com/myns
                       http://www.someserver.com/wfs/cwwfs.cgi?
                       request=DESCRIBEFEATURETYPE&amp;amp;
                       typename=ELEVP_1M,ROADL_1M,BUILTUPA_1M 
                       http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;

   &lt;!-- Create a new instance of feature type ELEVP_1M --&gt;
   &lt;wfs:Insert handle="Statement 1"&gt;
      &lt;ELEVP_1M&gt;
         &lt;ID&gt;167928&lt;/ID&gt;
         &lt;F_CODE&gt;CA&lt;/F_CODE&gt;
         &lt;ACC&gt;2&lt;/ACC&gt;
         &lt;ELA&gt;1&lt;/ELA&gt;
         &lt;ZV2&gt;152&lt;/ZV2&gt;
         &lt;TILE_ID&gt;250&lt;/TILE_ID&gt;
         &lt;END_ID&gt;111&lt;/END_ID&gt;
         &lt;LOCATION&gt;
            &lt;gml:Point gid="e33"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:coordinates&gt;-98.5485,24.2633&lt;/gml:coordinates&gt;
            &lt;/gml:Point&gt;
         &lt;/LOCATION&gt;
      &lt;/ELEVP_1M&gt;
   &lt;/wfs:Insert&gt;

   &lt;!-- Create a new instance of feature type ROADL_1M
        which has complex properties SEGMENT and ROADTYPE. --&gt;
   &lt;wfs:Insert handle="ComplexInsert"&gt;
      &lt;ROADL_1M&gt;
         &lt;NAME&gt;Highway 401&lt;/NAME&gt;
         &lt;SEGMENT&gt;
            &lt;DESIGNATION&gt;SEG_A41&lt;/DESIGNATION&gt;
            &lt;GEOMETRY&gt;
               &lt;gml:LineString gid="e3"
                  srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
                  &lt;gml:coordinates&gt;...&lt;/gml:coordinates&gt;
               &lt;/gml:LineString&gt;
            &lt;/GEOMETRY&gt;
         &lt;/SEGMENT&gt;
         &lt;ROADTYPE&gt;
            &lt;SURFACE_TYPE&gt;Asphalt&lt;/SURFACE_TYPE&gt;
            &lt;NLANES&gt;12&lt;/NLANES&gt;
            &lt;GRADE&gt;15&lt;/GRADE&gt;
         &lt;/ROADTYPE&gt;
      &lt;/ROADL_1M&gt;
   &lt;/wfs:Insert&gt;

   &lt;!-- Update the designation of a particular range of segments 
        which are now being collapsed into a single segment.  The
        The filter uses an XPath expression to reference the
        DESIGNATION property --&gt;
   &lt;wfs:Update typeName="ROADL_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;ROADL_1M/SEGMENT/DESIGNATION&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;SEG_A60&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:PropertyIsBetween&gt;
            &lt;ogc:PropertyName&gt;ROADL_1M/SEGMENT/DESIGNATION&lt;/ogc:PropertyName&gt;
            &lt;ogc:LowerBoundary&gt;
               &lt;ogc:Literal&gt;SEG_A60&lt;/ogc:Literal&gt;
            &lt;/ogc:LowerBoundary&gt;
            &lt;ogc:UpperBoundary&gt;
               &lt;ogc:Literal&gt;SEG_A69&lt;/ogc:Literal&gt;
            &lt;/ogc:UpperBoundary&gt;
         &lt;/ogc:PropertyIsBetween&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;

   &lt;!-- Create 2 feature instances of feature type BUILTUPA_1M --&gt;
   &lt;wfs:Insert handle="Statement 2"&gt;
      &lt;BUILTUPA_1M&gt;
         &lt;PLACEID&gt;4070&lt;/PLACEID&gt;
         &lt;NAME&gt;Toronto&lt;/NAME&gt;
         &lt;POPULATION&gt;4000000&lt;/POPULATION&gt;
         &lt;BNDRY&gt;
            &lt;gml:Polygon gid="g3"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                  &lt;gml:coordinates&gt;-95.7,38.1 -97.8,-38.2 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/BNDRY&gt;
      &lt;/BUILTUPA_1M&gt;
      &lt;BUILTUPA_1M&gt;
         &lt;PLACEID&gt;1725&lt;/PLACEID&gt;
         &lt;NAME&gt;Montreal&lt;/NAME&gt;
         &lt;POPULATION&gt;2000000&lt;/POPULATION&gt;
         &lt;BNDRY&gt;
            &lt;gml:Polygon gid="e4"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                  &lt;gml:coordinates&gt;-89.8,44.3 -89.9,44.4 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/BNDRY&gt;
      &lt;/BUILTUPA_1M&gt;
   &lt;/wfs:Insert&gt;

   &lt;!-- Update the NAME property of the feature instance BUILTUPA_1M.1210 --&gt;
   &lt;wfs:Update typeName="BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;NAME&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;SMALLVILLE&lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.1210"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;

   &lt;!-- Update the geometry of the feature BUILTUPA_1M.1725. --&gt;
   &lt;wfs:Update typeName="BUILTUPA_1M"&gt;
      &lt;wfs:Property&gt;
         &lt;wfs:Name&gt;BNDRY&lt;/wfs:Name&gt;
         &lt;wfs:Value&gt;
            &lt;gml:Polygon gid="g5"
               srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
               &lt;gml:outerBoundaryIs&gt;
                  &lt;gml:LinearRing&gt;
                  &lt;gml:coordinates&gt;-89.8,44.3 -89.9,44.4 ...&lt;/gml:coordinates&gt;
                  &lt;/gml:LinearRing&gt;
               &lt;/gml:outerBoundaryIs&gt;
            &lt;/gml:Polygon&gt;
         &lt;/wfs:Value&gt;
      &lt;/wfs:Property&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.1725"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Update&gt;

   &lt;!-- Delete the feature instance BUILTUPA_1M.1013. --&gt;
   &lt;wfs:Delete typeName="BUILTUPA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:FeatureId fid="BUILTUPA_1M.1013"/&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Delete&gt;

   &lt;!-- Delete all instances of the feature type
        BUILTUPA_1M where:
        1. the geometry is INSIDE a polygonal window
        2. where the POPULATION is between 100 and 2000 --&gt;
   &lt;wfs:Delete typeName="BUILTUPA_1M"&gt;
      &lt;ogc:Filter&gt;
         &lt;ogc:And&gt;
            &lt;ogc:Within&gt;
               &lt;ogc:PropertyName&gt;BUILTUPA_1M/BNDRY&lt;/ogc:PropertyName&gt;
               &lt;gml:Polygon gid="WINDOW"
                  srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"&gt;
                  &lt;gml:outerBoundaryIs&gt;
                     &lt;gml:LinearRing&gt;
                        &lt;gml:coordinates&gt;0,0 0,5 5,5 5,0 ...&lt;/gml:coordinates&gt;
                     &lt;/gml:LinearRing&gt;
                  &lt;/gml:outerBoundaryIs&gt;
               &lt;/gml:Polygon&gt;
            &lt;/ogc:Within&gt;
            &lt;ogc:And&gt;
               &lt;ogc:PropertyIsGreaterThanOrEqualTo&gt;
                  &lt;ogc:PropertyName&gt;BUILTUPA_1M/POPULATION&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;100&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsGreaterThanOrEqualTo&gt;
               &lt;ogc:PropertyIsLessThanOrEqualTo&gt;
                  &lt;ogc:PropertyName&gt;BUILTUPA_1M/POPULATION&lt;/ogc:PropertyName&gt;
                  &lt;ogc:Literal&gt;2000&lt;/ogc:Literal&gt;
               &lt;/ogc:PropertyIsLessThanOrEqualTo&gt;
            &lt;/ogc:And&gt;
         &lt;/ogc:And&gt;
      &lt;/ogc:Filter&gt;
   &lt;/wfs:Delete&gt;
&lt;/wfs:Transaction&gt;</pre><p><a id="N40029A11" />In response to the successful completion of this request, a web
    feature service would generate the following response document:</p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;wfs:TransactionResponse
   version="1.0.0"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-transaction.xsd"&gt;
   &lt;wfs:InsertResult handle="Statement 1"&gt;
      &lt;ogc:FeatureId fid="ELEVP_1M.1001"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:InsertResult handle="ComplexInsert"&gt;
      &lt;ogc:FeatureId fid="ROADL_1M.1553"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:InsertResult handle="Statement 2"&gt;
      &lt;ogc:FeatureId fid="BUILTUPA_1M.509876"/&gt;
      &lt;ogc:FeatureId fid="BUILTUPA_1M.509877"/&gt;
   &lt;/wfs:InsertResult&gt;
   &lt;wfs:TransactionResult handle="Transaction 01"&gt;
      &lt;wfs:Status&gt;
         &lt;wfs:SUCCESS/&gt;
      &lt;/wfs:Status&gt;
   &lt;/wfs:TransactionResult&gt;
&lt;/wfs:TransactionResponse&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="GetCapabilities" />19. GetCapabilities</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40000712" />19.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C12" />A web feature service must have the ability to describe its capabilities. This section defines an XML document that a web feature service must generate to define its capabilities.</p><p><a id="N40000F12" />The capabilities document defined in this specification is closely modeled after the capabilities document defined for map servers as defined in the Web Map Service Implementation Specification [1].</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40001312" />19.2. Request</h3></div></div><div xmlns="" /></div><p><a id="N40001812" />The <span class="bold"><b>&lt;GetCapabilities&gt;</b></span> element is used to request a capabilities document from a web feature service.</p><p><a id="N40001F12" />It is defined by the following XML Schema fragment:</p><pre class="programlisting">   &lt;xsd:element name="GetCapabilities" type="wfs:GetCapabilitiesType"/&gt;
   &lt;xsd:complexType name="GetCapabilitiesType"&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
   &lt;/xsd:complexType&gt;</pre><p><a id="N40002512" />The <span class="bold"><b>service</b></span> attribute is described in section 7.8. The <span class="bold"><b>version</b></span> attribute, unlike the normal case, is not mandatory since a client application may not have apriori knowledge about what versions a server may support. The client and the server will need to apply the rules of version negotiation as described in Section 6.2.4.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40003112" />19.3. Response</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40003612" />19.3.1. Response schema</h4></div></div><div xmlns="" /></div><p><a id="N40003B12" />The schema of the response to a <span class="bold"><b>GetCapabilities</b></span> request is normatively defined using XML Schema in Annex A.4.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40004312" />19.3.2. Capabilities</h4></div></div><div xmlns="" /></div><p><a id="N40004812" />The capabilities document is composed of four main sections: </p><div class="variablelist"><dl><dt><span class="term">1. Service section </span></dt><dd><p><a id="N40005412" />The service section provides information about the service itself.</p></dd><dt><span class="term">2. Capabilities section</span></dt><dd><p><a id="N40006012" />The capabilities section specifies the list of requests that the WFS can handle. Two classes of web feature services, based on the capabilities they support, are defined in the Overview [see Section i].</p></dd><dt><span class="term">3. FeatureType list</span></dt><dd><p><a id="N40006C12" />This section defines the list of feature types (and operations on each feature type) that are available from a web feature service. Additional information, such as SRS, about each feature type is also provided.</p></dd><dt><span class="term">4. Filter capabilities section</span></dt><dd><p><a id="N40007812" />The schema of the Filter Capabilities Section is defined in the Filter Encoding Implementation Specification [3]. This is an optional section. If it exists, then the WFS should support the operations advertised therein. If the Filter Capabilities Section is not defined, then the client should assume that the server only supports the minimum default set of filter operators as defined in the Filter Encoding Implementation Specification [3].</p></dd></dl></div><p><a id="N40007E12" />The <span class="bold"><b>version</b></span> attribute specifies the specification revision to which this schema applies. Its format is one, two or three integers separated by periods: "x", or "x.y", or "x.y.z", with the most significant number appearing first. Future revisions are guaranteed to be numbered in a monotonically increasing fashion, though gaps may appear in the sequence. </p><p><a id="N40008512" />The <span class="bold"><b>updateSequence</b></span> attribute is a sequence number for managing propagation of the contents of the capabilities document. For example, if a feature server adds some feature types, it can increment the update sequence to inform catalog servers that their previously cached versions are now stale. The format is a positive integer. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40008D12" />19.3.3. Service section</h4></div></div><div xmlns="" /></div><p><a id="N40009212" />The <span class="bold"><b>&lt;Service&gt;</b></span> element contains metadata for the feature service as a whole. The following content can be specified for the <span class="bold"><b>&lt;Service&gt;</b></span> element:</p><div class="table"><a id="N40009D12" /><p class="title"><b>Table 3. Table 3 - Service section elements</b></p><table xmlns="" summary="Table 3 - Service section elements" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ELEMENT NAME</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>Name</td><td>A name the service provider assigns to the web feature service instance.</td></tr><tr><td>Title</td><td>The <span class="bold"><b>&lt;Title&gt;</b></span> is a human-readable title to briefly identify this server in menus. </td></tr><tr><td>Abstract</td><td>The <span class="bold"><b>&lt;Abstract&gt;</b></span> is a descriptive narrative for more information about the server.</td></tr><tr><td>Keyword</td><td>The <span class="bold"><b>&lt;Keyword&gt;</b></span> element contains short words to aid catalog searching.</td></tr><tr><td>OnlineResource</td><td>The <span class="bold"><b>&lt;OnlineResource&gt;</b></span> element defines the top-level HTTP URL of this service. Typically the URL of a "home page" for the service.</td></tr><tr><td>Fees</td><td>The <span class="bold"><b>&lt;Fees&gt;</b></span> element contains a text block indicating any fees imposed by the service provider for usage of the service or for data retrieved from the WFS. The keyword NONE is reserved to mean no fees.</td></tr><tr><td>AccessConstraints</td><td>The <span class="bold"><b>&lt;AccessConstraints&gt;</b></span> element constain a text block describing any access constraints imposed by the service provider on the WFS or data retrieved from that service. The keyword NONE is reserved to indicate no access constraints are imposed.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40010E12" />19.3.4. Capabilities Section</h4></div></div><div xmlns="" /></div><p><a id="N40011312" />The capabilities section is used to specifically define the list of WFS operations that a particular WFS implements. A basic WFS would include the <span class="bold"><b>GetCapabilities</b></span>, <span class="bold"><b>DescribeFeatureType</b></span> and the <span class="bold"><b>GetFeature</b></span> operations. A transactional WFS would also include the <span class="bold"><b>Transaction</b></span> operation, possibly the <span class="bold"><b>LockFeature</b></span> operation and/or the <span class="bold"><b>GetFeatureWithLock</b></span> operation.</p><p><a id="N40012E12" />The specific capabilities implemented by a WFS are denoted by the following elements:</p><div class="table"><a id="N40013112" /><p class="title"><b>Table 4. Table 4 - Web feature service operations </b></p><table xmlns="" summary="Table 4 - Web feature service operations " border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ELEMENT NAME</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>GetCapabilities</td><td>The <span class="bold"><b>&lt;GetCapabilities&gt;</b></span> element is included to define the available distributed computing platforms for this service.</td></tr><tr><td>DescribeFeatureType</td><td>The <span class="bold"><b>&lt;DescribeFeatureType&gt;</b></span> element is used to define the available distributed computing platforms for this service and indicate what schema description languages can be used to describe the schema of a feature type when a client requests such a description. <span class="bold"><b>XMLSCHEMA</b></span> is the only mandatory language that must be available. The <span class="bold"><b>SCHEMALANGUAGES</b></span> entity can be redefined to include vendor specific languages.</td></tr><tr><td>Transaction</td><td>The <span class="bold"><b>&lt;Transaction&gt;</b></span> element is included to define the available distributed computing platforms for this service</td></tr><tr><td>GetFeature</td><td>The <span class="bold"><b>&lt;GetFeature&gt;</b></span> element is used to define the available distributed computing platforms for this service and enumerate the formats available for expressing the results of a query. The <span class="bold"><b>RESULTFORMATS</b></span> entity defines the mandatory output format of <span class="bold"><b>GML</b></span> but can be redefined to include additional vendor specific formats.</td></tr><tr><td>LockFeature</td><td>The <span class="bold"><b>&lt;LockFeature&gt;</b></span> element is included to define the available distributed computing platforms.</td></tr></tbody></table></div><p><a id="N40019B12" />The only available distributed computing platform is HTTP, for which two request methods are defined; GET and POST. The <span class="bold"><b>onlineResource</b></span> attribute indicates the URL prefix for HTTP GET requests (everything before the question mark and query string: http://hostname[:port]/path/scriptname); for HTTP POST requests, <span class="bold"><b>onlineResource</b></span> is the complete URL. </p><p><a id="N4001A612" />The <span class="bold"><b>&lt;VendorSpecificCapabilities&gt;</b></span> element can be defined to include vendor specific extensions. </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4001AE12" />19.3.5. FeatureTypeList section</h4></div></div><div xmlns="" /></div><p><a id="N4001B312" />The purpose of the <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span> element is to contain a list of feature types that a WFS can service and define the transaction and query elements that are supported on each feature type. The possible transaction and query elements are:</p><div class="table"><a id="N4001BA12" /><p class="title"><b>Table 5. Table 4 - Web feature service operations</b></p><table xmlns="" summary="Table 4 - Web feature service operations" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ELEMENT NAME</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>Insert</td><td>The <span class="bold"><b>&lt;Insert&gt;</b></span> element is used to indicate that the WFS is capable of creating new instances of a feature type.</td></tr><tr><td>Update</td><td>The <span class="bold"><b>&lt;Update&gt;</b></span> element indicates that the WFS can change the existing state of a feature.</td></tr><tr><td>Delete</td><td>The <span class="bold"><b>&lt;Delete&gt;</b></span> element indicates that the WFS can delete or remove instances of a feature type from the datastore.</td></tr><tr><td>Query</td><td>The <span class="bold"><b>&lt;Query&gt;</b></span> element indicates that the WFS is capable of executing a query on a feature type. </td></tr><tr><td>Lock</td><td>The <span class="bold"><b>&lt;Lock&gt;</b></span> element indicates that the WFS is capable of locking instances of a feature type. </td></tr></tbody></table></div><p><a id="N40021412" />Transaction and query elements can be specified globally for all feature types or locally for each specific feature type contained in the <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span> element. Globally specified transaction and query elements are inherited by every feature type contained in the <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span> element and can be augmented by specifying local transaction and query elements. For example, the <span class="bold"><b>&lt;Query&gt;</b></span> element may be specified globally for all feature types contained in the <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span>, but the <span class="bold"><b>&lt;Update&gt;</b></span> element may only be specified locally for a small number of feature types. If no transaction or query elements are defined anywhere, then the default element <span class="bold"><b>&lt;Query&gt;</b></span> will be implied for all feature types contained in the <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span> element.</p><p><a id="N40023312" />The following elements can be used to describe each feature type contained in a <span class="bold"><b>&lt;FeatureTypeList&gt;</b></span> element:</p><div class="table"><a id="N40023A12" /><p class="title"><b>Table 6. Table 4 - Web feature service operations</b></p><table xmlns="" summary="Table 4 - Web feature service operations" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>ELEMENT NAME</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>Name</td><td>The namespace qualified name of the feature type. This element is mandatory.</td></tr><tr><td>Title</td><td>The <span class="bold"><b>&lt;Title&gt;</b></span> is a human-readable title to briefly identify this feature type in menus.</td></tr><tr><td>Abstract</td><td>The <span class="bold"><b>&lt;Abstract&gt;</b></span> is a descriptive narrative for more information about the feature type.</td></tr><tr><td>Keyword</td><td>The <span class="bold"><b>&lt;Keyword&gt;</b></span> element contains short words to aid catalog searching.</td></tr><tr><td>SRS</td><td>The <span class="bold"><b>&lt;SRS&gt;</b></span> element is used to indicate which spatial reference system should be used to express the state of a feature. The SRS may be indicated using either the Petrotechnical Open Software Corporation form ‘EPSG:&lt;POSC Code&gt;’ or the URL format defined in section 4.3.2 of reference [2].</td></tr><tr><td>Operations</td><td>The <span class="bold"><b>&lt;Operations&gt;</b></span> element defines which are operations are supported on a feature type. Any locally defined operations take precedence over any globally defined operations.</td></tr><tr><td>LatLongBoundingBox</td><td>The <span class="bold"><b>LatLongBoundingBox</b></span> element is used to indicate the edges of an enclosing rectangle in the SRS of the associated feature type. Its purpose is to facilitate geographic searches by indicating where instances of the particular feature type exist. Since multiple LatLongBoundingBoxes can be specified, a WFS can indicate where various clusters of data may exist. This knowledge aids client applications by letting them know where they should query in order to have a high probability of finding data.</td></tr><tr><td>MetadataURL</td><td>A WFS may use zero or more <span class="bold"><b>&lt;MetadataURL&gt;</b></span> elements to offer detailed, standardized metadata about the data in a particular feature type. The type attribute indicates the standard to which the metadata complies; the format attribute indicates how the metadata is structured. Two types are defined at present: 'TC211' = ISO TC211 19115; 'FGDC' = FGDC CSDGM. </td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4002B912" />19.4. Exception</h3></div></div><div xmlns="" /></div><p><a id="N4002BE12" />In the event that a web feature service encounters an error servicing a <span class="bold"><b>GetCapabilities</b></span> request, it shall raise an exception as described in Section 7.7.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N4002C612" />19.5. Examples</h3></div></div><div xmlns="" /></div><p><a id="N4002CB12" />This example shows what a capabilities document might look like for a basic web feature service. To request a capabilities document, a client would issue the following request: </p><pre class="programlisting">&lt;?xml version="1.0" ?&gt;
&lt;GetCapabilities
   service="WFS"
   xmlns="http://www.opengis.net/wfs"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.0.0/WFS-basic.xsd"/&gt;</pre><p><a id="N4002D112" />In response to such a request, a web feature service might generate a document that looks like: </p><pre class="programlisting">?xml version="1.0" ?&gt;
&lt;WFS_Capabilities
   version="1.0.0"
   xmlns="http://www.opengis.net/wfs"
   xmlns:myns="http://www.someserver.com/myns"
   xmlns:ogc="http://www.opengis.net/ogc"
   "&gt;

   &lt;!--  The SERVICE section says something about who is providing the  --&gt;
   &lt;!--  service and where one can go to obtain more information about  --&gt;
   &lt;!--  the service.                                                   --&gt;
   &lt;Service&gt;
      &lt;Name&gt;CubeWerx WFS&lt;/Name&gt;
      &lt;Title&gt;CubeWerx Web Feature Service&lt;/Title&gt;
      &lt;Abstract&gt;Web Feature Server maintained by CubeWerx Inc.&lt;/Abstract&gt;
      &lt;OnlineResource&gt;http://www.someserver.com/wfs/cwwfs.cgi?&lt;/OnlineResource&gt;
   &lt;/Service&gt;

   &lt;!-- The CAPABILITY section defines which WFS operations this        --&gt;
   &lt;!-- service instance supports, what distributed computing platform  --&gt;
   &lt;!-- is supported for each service and what the entry point is for   --&gt;
   &lt;!-- each operation.                                                 --&gt;
   &lt;Capability&gt;
      &lt;Request&gt;
         &lt;GetCapabilities&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/GetCapabilities&gt;
         &lt;DescribeFeatureType&gt;
            &lt;SchemaDescriptionLanguage&gt;
               &lt;XMLSCHEMA/&gt;
            &lt;/SchemaDescriptionLanguage&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/DescribeFeatureType&gt;
         &lt;GetFeature&gt;
            &lt;ResultFormat&gt;
               &lt;GML2/&gt;
            &lt;/ResultFormat&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/GetFeature&gt;
         &lt;GetFeatureWithLock&gt;
            &lt;ResultFormat&gt;
               &lt;GML2/&gt;
            &lt;/ResultFormat&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/GetFeatureWithLock&gt;
         &lt;Transaction&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/Transaction&gt;
         &lt;LockFeature&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Get onlineResource="http://www.someserver.com/wfs/cwwfs.cgi?"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
            &lt;DCPType&gt;
               &lt;HTTP&gt;
                  &lt;Post onlineResource="http://www.someserver.com/wfs/cwwfs.cgi"/&gt;
               &lt;/HTTP&gt;
            &lt;/DCPType&gt;
         &lt;/LockFeature&gt;
      &lt;/Request&gt;
   &lt;/Capability&gt;

   &lt;!-- The FEATURETYPELIST section defines the list of feature types   --&gt;
   &lt;!-- that this service instance can operate upon as well as which    --&gt;
   &lt;!-- operations are supported on each feature type.                  --&gt;
   &lt;FeatureTypeList&gt;
      &lt;Operations&gt;
         &lt;Query/&gt;
      &lt;/Operations&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:BUILTUPA_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;Operations&gt;
            &lt;Insert/&gt;
            &lt;Update/&gt;
            &lt;Delete/&gt;
         &lt;/Operations&gt;
         &lt;LatLongBoundingBox minx="-179.1296081543" miny="-53.167423248291"
                             maxx="178.44325256348" maxy="70.992721557617"/&gt;
      &lt;/FeatureType&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:COASTL_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;LatLongBoundingBox minx="-179.99942016602" miny="-85.582763671875"
                             maxx="179.9999" maxy="83.627418518066"/&gt;
      &lt;/FeatureType&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:ELEVP_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;Operations&gt;
            &lt;Insert/&gt;
            &lt;Update/&gt;
            &lt;Delete/&gt;
         &lt;/Operations&gt;
         &lt;LatLongBoundingBox minx="-179.9984893715" miny="-89.83837892767"
                             maxx="179.99234007206" maxy="83.520408603363"/&gt;
      &lt;/FeatureType&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:OCEANSEA_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;Operations&gt;
            &lt;Insert/&gt;
            &lt;Update/&gt;
            &lt;Delete/&gt;
         &lt;/Operations&gt;
         &lt;LatLongBoundingBox minx="-179.9999" miny="-85.582763671875"
                             maxx="179.99996948242" maxy="89.9999"/&gt;
      &lt;/FeatureType&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:RAILRDL_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;Operations&gt;
            &lt;Insert/&gt;
            &lt;Update/&gt;
            &lt;Delete/&gt;
         &lt;/Operations&gt;
         &lt;LatLongBoundingBox minx="-165.24467468262" miny="-53.138427734375"
                             maxx="179.60989379883" maxy="78.16796875"/&gt;
      &lt;/FeatureType&gt;
      &lt;FeatureType&gt;
         &lt;Name&gt;myns:TREESA_1M&lt;/Name&gt;
         &lt;SRS&gt;EPSG:4326&lt;/SRS&gt;
         &lt;Operations&gt;
            &lt;Insert/&gt;
            &lt;Update/&gt;
            &lt;Delete/&gt;
         &lt;/Operations&gt;
         &lt;LatLongBoundingBox minx="-139.99757385254" miny="25.281270980835"
                             maxx="-52.661720275879" maxy="66.718765258789"/&gt;
      &lt;/FeatureType&gt;
   &lt;/FeatureTypeList&gt;

   &lt;!-- The FILTER_CAPABILITIES section defines the capabilities of the --&gt;
   &lt;!-- filter supported by this feature instance.  For example, in     --&gt;
   &lt;!-- this case all spatial operator are supported.  Another, simpler --&gt;
   &lt;!-- WFS implementation, may only support the BBOX operator.         --&gt;
   &lt;ogc:Filter_Capabilities&gt;
      &lt;ogc:Spatial_Capabilities&gt;
         &lt;ogc:Spatial_Operators&gt;
            &lt;ogc:BBOX/&gt;
            &lt;ogc:Equals/&gt;
            &lt;ogc:Disjoint/&gt;
            &lt;ogc:Intersect/&gt;
            &lt;ogc:Touches/&gt;
            &lt;ogc:Crosses/&gt;
            &lt;ogc:Contains/&gt;
            &lt;ogc:Overlaps/&gt;
         &lt;/ogc:Spatial_Operators&gt;
      &lt;/ogc:Spatial_Capabilities&gt;
      &lt;ogc:Scalar_Capabilities&gt;
         &lt;ogc:Logical_Operators/&gt;
         &lt;ogc:Comparison_Operators&gt;
            &lt;ogc:Simple_Comparisons/&gt;
            &lt;ogc:Like/&gt;
            &lt;ogc:Between/&gt;
            &lt;ogc:NullCheck/&gt;
         &lt;/ogc:Comparison_Operators&gt;
         &lt;ogc:Arithmetic_Operators&gt;
            &lt;ogc:Simple_Arithmetic/&gt;
            &lt;ogc:Functions&gt;
               &lt;ogc:Function_Names&gt;
                  &lt;ogc:Function_Name nArgs="1"&gt;MIN&lt;/ogc:Function_Name&gt;
                  &lt;ogc:Function_Name nArgs="1"&gt;MAX&lt;/ogc:Function_Name&gt;
                  &lt;ogc:Function_Name nArgs="1"&gt;COUNT&lt;/ogc:Function_Name&gt;
                  &lt;ogc:Function_Name nArgs="1"&gt;DISTINCT&lt;/ogc:Function_Name&gt;
               &lt;/ogc:Function_Names&gt;
            &lt;/ogc:Functions&gt;
         &lt;/ogc:Arithmetic_Operators&gt;
      &lt;/ogc:Scalar_Capabilities&gt;
   &lt;/ogc:Filter_Capabilities&gt;
&lt;/WFS_Capabilities&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="KVP" />20. Keyword-value pair encoding</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40000713" />20.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000C13" />This section describes how to encode WFS operations using the standard CGI style of keyword-value pairs. This means that parameters consist of name-value pairs in the form of "name=value" and the pairs are separated by the "&amp;" character. This form of encoding is also known as URL-Encoding.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40000F13" />20.1.1. A note about the examples</h4></div></div><div xmlns="" /></div><p><a id="N40001413" />In general, URL-encoding requires that certain characters, such as ‘&amp;’, be escaped [10] when they are not used in their intended manner. In this section, however, such characters may not be escaped for the sake of clarity.</p><p><a id="N40001713" />In addition, many of the examples in this section include a <span class="bold"><b>FILTER</b></span> parameter whose value is an XML encoded filter as specified in the Filter Encoding Implementation Specification [3]. To be rigorously correct, these examples should include namespace and schema location information in the root element <span class="bold"><b>&lt;Filter&gt;</b></span>, such that the XML may be validated. Thus the parameter:</p><pre class="programlisting">FILTER=&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;
       &lt;gml:Box&gt;&lt;gml&gt;&lt;coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
       &lt;/Within&gt;&lt;/Filter&gt;</pre><p><a id="N40002513" />should more correctly be specified as:</p><pre class="programlisting">FILTER=&lt;Filter xmlns="http://www.opengis.net/ogc"
               xmlns:gml="http://www.opengis.net/gml"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.opengis.net/ogc
                                   ../filter/1.0.0/filter.xsd
                                   http://www.opengis.net/gml
                                   ../gml/2.1/geometry.xsd"&gt;
       &lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;
       &lt;gml:Box&gt;&lt;gml&gt;&lt;coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
       &lt;/Within&gt;&lt;/Filter&gt;</pre><p><a id="N40002B13" />In order to not obfuscate the essential information, however, the namespace and schema location attribute tags have been omitted from the examples in this section. In addition, the schema locations shown are only example locations and the correct schema locations would need to be substituted.</p><p><a id="N40002E13" />Finally, the values of the FILTER and other parameters are broken up over several lines again for clarities sake. A FILTER parameter’s value, in practice, would be composed of a single long string.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40003313" />20.2. Request parameter rules</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40003813" />20.2.1. Parameter ordering and case</h4></div></div><div xmlns="" /></div><p><a id="N40003D13" />Parameter <span class="underline">names</span>
        <span class="bold"><b>shall not</b></span> be case sensitive, but parameter <span class="underline">values</span>
        <span class="bold"><b>shall</b></span> be case sensitive. In this document, parameter names are typically shown in uppercase for typographical clarity, not as a requirement.</p><p><a id="N40005013" />Parameters in a request <span class="bold"><b>may</b></span> be specified in any order.</p><p><a id="N40005713" />An OGC Web Service <span class="bold"><b>must</b></span> be prepared to encounter parameters that are not part of this specification. In terms of producing results per this specification, an OGC Web Service <span class="bold"><b>shall</b></span> ignore such parameters.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40006313" />20.2.2. Parameter lists</h4></div></div><div xmlns="" /></div><p><a id="N40006813" />Parameters consisting of lists shall use the comma (",") as the delimiter between items in the list. In addition, multiple lists can be specified as the value of a parameter by enclosing each list in parentheses; "(", ")".</p><div class="example"><a id="N10FFF" /><p class="title"><b>Example 40. Example 1</b></p><p xmlns=""><a id="N40007013" />An example of a list of items.</p><pre class="programlisting">parameter=item1,item2,item2</pre></div><div class="example"><a id="N11007" /><p class="title"><b>Example 41. Example 2</b></p><p xmlns=""><a id="N40007C13" />An example of multiple lists of items assigned to a single parameter.</p><pre class="programlisting">parameter=(item11,item12,item13)(item21,item22,item23)</pre><p><a id="N40008213" />Parentheses may also be used to delimit multiple local filters when more than one feature type is specified for the <span class="bold"><b>TYPENAME</b></span> parameter. The following URL fragment shows how this may be done:</p><pre class="programlisting">typename=FEAT1,FEAT2&amp;filter=(&lt;Filter&gt;… FEAT1 filter…&lt;/Filter&gt;)(&lt;Filter&gt;… FEAT2 filter…&lt;/Filter&gt;)</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="KVP.Common" />20.3. Common request parameters</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40009413" />20.3.1. Version parameter</h4></div></div><div xmlns="" /></div><p><a id="N40009913" />The <span class="bold"><b>VERSION</b></span> parameter specifies the protocol version number. The format of the version number and version negotiation are described in Section 6.2.4.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000A113" />20.3.2. Request parameter</h4></div></div><div xmlns="" /></div><p><a id="N4000A613" />The <span class="bold"><b>REQUEST</b></span> parameter indicates which service operation is being invoked. The value operation_name must be one of those offered by the OGC Web Service Instance.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N4000AE13" />20.3.3. Bounding box</h4></div></div><div xmlns="" /></div><p><a id="N4000B313" />The bounding box parameter, <span class="bold"><b>BBOX</b></span>, is included in this specification for convenience as a shorthand representation of the very common a bounding box filter which would be expressed in much longer form using XML and the filter encoding described in [3]. A <span class="bold"><b>BBOX</b></span> applies to all feature types listed in the request.</p><p><a id="N4000BE13" />The Bounding Box (BBOX) is a set of four comma-separated decimal, scientific notation, or integer values (if integers are provided where floating point is needed, the decimal point is assumed at the end of the number). These values specify the minimum X, minimum Y, maximum X, and maximum Y ranges, in that order, expressed in units of the SRS of the feature type(s) begin queried. The four bounding box values indicate the outside edges of a rectangle, as in Figure 5; minimum X is the left edge, maximum X the right, minimum Y the bottom, and maximum Y the top.</p><div class="figure"><a id="N11044" /><p class="title"><b>Figure 5. Figure 5 - Bounding Box representation</b></p><div xmlns="" class="mediaobject"><img src="images/13_BoundingBox.gif" alt="Figure 5 - Bounding Box representation" /></div></div><p><a id="N4000D013" />A Bounding Box <span class="bold"><b>should</b></span> not have zero area.</p><p><a id="N4000D713" />If a request contains an invalid Bounding Box (e.g., one whose minimum X is greater than or equal to the maximum X, or whose minimum Y is greater than or equal to the maximum Y) the server <span class="bold"><b>must</b></span> throw an exception.</p><p><a id="N4000DE13" />If a request contains a Bounding Box whose area does not overlap at all with the <span class="bold"><b>LatLongBoundingBox(s)</b></span> advertised in the Capabilities XML for the requested geodata object, the server <span class="bold"><b>should</b></span> return empty content (e.g. null feature set) for that element. Any elements that are partly or entirely contained in the Bounding Box should be returned in the appropriate format.</p><p class="bold"><a id="N4000E913" />The SRS of the bounding box <span class="bold"><b>must</b></span> be the same as the SRS of the feature type(s) in a request. The SRS of a feature type is advertised by a WFS in the capabilities document. If more than one feature type is specified in a request, the feature types <span class="bold"><b>must</b></span> all be in the same SRS and the BBOX must be specified in the common SRS as well.</p><p><a id="N4000F513" />If the Bounding Box values are not defined for the given SRS (e.g., latitudes greater than 90 degrees in EPSG:4326), the server <span class="bold"><b>should</b></span> return empty content for areas outside the valid range of the SRS.</p><p><a id="N4000FC13" />In the particular case of longitude, the following behavior applies regarding the anti-meridian at 180 degrees of longitude. There is a legitimate desire for maps that span the anti-meridian (for example, a map centered on the Pacific Ocean). If Xmin is the west-most longitude in degrees and Xmax is the east-most, then the following constraint applies:</p><pre class="programlisting">-180 &lt;= Xmin &lt; Xmax &lt; 540</pre><div class="example"><a id="N1107C" /><p class="title"><b>Example 42. Example</b></p><p xmlns=""><a id="N40010713" />Xmin,Xmax values and the corresponding scope of the bounding box:</p><p><a id="N40010A13" />-180,180 = Earth centered at Greenwich 0,360 = Earth with Greenwich at left edge 120,250 = Pacific Ocean</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40010F13" />20.3.4. Vendor-specific parameters</h4></div></div><div xmlns="" /></div><p><a id="N40011413" />Requests may allow for optional vendor-specific parameters (VSPs) that will enhance the results of a request. Typically, these are used for private testing of non-standard functionality prior to possible standardization. A generic client is <span class="bold"><b>not</b></span> required or expected to make use of these VSPs.</p><p><a id="N40011B13" />An OGC Web Service <span class="bold"><b>must</b></span> produce a valid result even if VSPs are missing or malformed (i.e., the Service <span class="bold"><b>shall</b></span> supply a default value), or if VSPs are supplied that are not known to the Service (i.e., the Service <span class="bold"><b>shall</b></span> ignore unknown request parameters).</p><p><a id="N40012A13" />An OGC Web Service <span class="bold"><b>may</b></span> choose not to advertise some or all of its VSPs. If VSPs are included in the Capabilities XML, the <span class="bold"><b>VendorSpecificCapabilities</b></span> element must be redefined accordingly. Additional schema documents may be imported containing the redefinition of the element.</p><p><a id="N40013513" />Clients <span class="bold"><b>may</b></span> read the vendor specific definition from the capabilities schemas and formulate requests using any VSPs advertised therein.</p><p><a id="N40013C13" />Vendors <span class="bold"><b>should</b></span> choose vendor-specific parameter names with care to avoid clashes with standard parameters.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40014513" />20.4. Common parameters</h3></div></div><div xmlns="" /></div><p><a id="N40014A13" />The following table describes parameters common to all WFS requests. Subsequent tables may redefine some of the facets of one or more of the parameters in this table.</p><div class="table"><a id="N40014D13" /><p class="title"><b>Table 7. Table 7 - Common parameters for WFS requests</b></p><table xmlns="" summary="Table 7 - Common parameters for WFS requests" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M<sup>[<a href="#ftn.N110CB" id="N110CB">a</a>]</sup></th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>http:/server_address/path/script</td><td>M</td><td> </td><td>URL prefix of web feature service</td></tr><tr><td>VERSION</td><td>M<sup>[<a href="#ftn.N110E1" id="N110E1">b</a>]</sup></td><td>1.0.0</td><td>Request version.</td></tr><tr><td>SERVICE</td><td>M</td><td>WFS</td><td>Service type.</td></tr><tr><td>REQUEST</td><td>M</td><td> </td><td>Name of WFS request.</td></tr><tr><td>Additional parameters</td><td>O</td><td> </td><td>As described in this section.</td></tr><tr><td>Vendor-specific parameters</td><td>O</td><td> </td><td>Optional vendor specific parameters.</td></tr></tbody><tbody class="footnotes"><tr><td colspan="4"><div class="footnote"><p><sup>[<a href="#N110CB" id="ftn.N110CB">a</a>] </sup>O = Optional, M=Mandatory</p></div><div class="footnote"><p><sup>[<a href="#N110E1" id="ftn.N110E1">b</a>] </sup>VERSION is mandatory for all operations except the GetCapabilities operation.</p></div></td></tr></tbody></table></div><p><a id="N4001CE13" />The mandatory <span class="bold"><b>VERSION</b></span> parameter specifies the protocol version number and allows for negotiation as described in Section 6.2.4.</p><p><a id="N4001D513" />The mandatory <span class="emphasis"><em>
        <span class="bold"><b>SERVICE</b></span>
      </em></span> parameter specifies which of the available service types at a particular service instance is being invoked. The value <span class="bold"><b>WFS</b></span> is used to indicate that the Web Feature Service should be invoked.</p><p><a id="N4001E313" />The parameter <span class="bold"><b>REQUEST</b></span> must also be included and it indicates which of the web feature service operations to invoke. The possible values of the <span class="bold"><b>REQUEST</b></span> parameters are: DescribeFeatureType, LockFeature, Transaction, GetFeature, GetFeatureWithLock or GetCapabilities.</p><p><a id="N4001EE13" />Additional <span class="bold"><b>GET</b></span> parameters, as described in this section, shall be expressed as name-value pairs. Parameter names <span class="bold"><b>shall not</b></span> be case sensitive. Parameter values <span class="bold"><b>shall</b></span> be case sensitive. Parameters in a request may be specified in any order.</p><p><a id="N4001FD13" />A WFS must be prepared to encounter parameters that are not part of the specification. These are known as vendor-specific parameters. Vendor-specific parameters allow vendors to specify additional parameters which will enhance the results of requests. A WFS must produce valid results even if the vendor-specific parameters are missing or malformed. A WFS may declare vendor-specific parameters within its capabilities XML. A WFS may choose to advertise some or all of its vendor specific parameters. Clients may read the capabilities schema and formulate requests using any vendor-specific parameters advertised therein.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40020113" />20.5. Response</h3></div></div><div xmlns="" /></div><p><a id="N40020613" />The response to any request encoded using keyword-value pair encoding shall be identical to the responses generated for requests encoded in XML and described in earlier sections of this document.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40020A13" />20.6. Exceptions</h3></div></div><div xmlns="" /></div><p><a id="N40020F13" />Exception reporting for requests encoded using keyword-value pairs shall be identical to that generated by requests encoded using XML. Refer to Sections 7.7 and 11.4 for a detailed discussion of exception reporting.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40021313" />20.7. Operations</h3></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="N40021813" />20.7.1. Introduction</h4></div></div><div xmlns="" /></div><p><a id="N40021D13" />This section describes how to formulate WFS requests using standard CGI style keyword-value pair encoding. Heavy use is made of examples that illustrate the various forms possible. In addition, for clarity, each parameter specification in the examples is placed on a separate line.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="KVP.DescribeFeatureType" />20.7.2. DescribeFeatureType operation</h4></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40022613" />20.7.2.1. Request</h5></div></div><div xmlns="" /></div><div class="table"><a id="N40022B13" /><p class="title"><b>Table 8. Table 8 - DescribeFeatureType encoding</b></p><table xmlns="" summary="Table 8 - DescribeFeatureType encoding" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M</th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST=DescribeFeatureType</td><td>M</td><td> </td><td>Name of request.</td></tr><tr><td>TYPENAME</td><td>O</td><td> </td><td>A comma separated list of feature types to describe. If no value is specified that is to be interpreted as all feature types.</td></tr><tr><td>OUTPUTFORMAT</td><td>O</td><td>XMLSCHEMA</td><td>The output format to use to describe the feature. XMLSCHEMA must be supported. Other output formats, such as DTD are possible.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40027613" />20.7.2.2. Examples</h5></div></div><div xmlns="" /></div><div class="example"><a id="N1118B" /><p class="title"><b>Example 43. Example 1</b></p><p xmlns=""><a id="N40028013" />The following example requests the schema description of the feature type TREESA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=DescribeFeatureType&amp;
       TYPENAME=TREESA_1M</pre></div><div class="example"><a id="N11193" /><p class="title"><b>Example 44. Example 2</b></p><p xmlns=""><a id="N40028C13" />The following example requests the schema description of the feature types INWATERA_1M and BUILTUPA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=DescribeFeatureType&amp;
       TYPENAME=TREESA_1M,BUILTUPA_1M</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="KVP.GetFeature" />20.7.3. GetFeature &amp; GetFeatureWithLock operation</h4></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40029A13" />20.7.3.1. Request</h5></div></div><div xmlns="" /></div><div class="table"><a id="N40029F13" /><p class="title"><b>Table 9. Table 9 - GetFeature &amp; GetFeatureWithLock encoding</b></p><table xmlns="" summary="Table 9 - GetFeature &amp; GetFeatureWithLock encoding" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M</th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST=[GetFeature | GetFeatureWithLock]</td><td>M</td><td> </td><td>The name of the WFS request.</td></tr><tr><td>PROPERTYNAME</td><td>O</td><td> </td><td>A list of properties may be specified for each feature type that is being queried. Refer to Section [13.2.2] on how to form lists of parameters. A "*" character can be used to indicate that all properties should be retrieved. There is a 1:1 mapping between each element in a FEATUREID or TYPENAME list and the PROPERTYNAME list. The absense of a value also indicates that all properties should be fetched.</td></tr><tr><td>FEATUREVERSION=[ALL | N]</td><td>O</td><td> </td><td>If versioning is supported, the FEATUREVERSION parameter directs the WFS on which feature version to fetch.. A value of ALL indicates to fetch all versions of a feature. An integer value fetches the Nth version of a feature. No value indicates that the latest version of the feature should be fetched.</td></tr><tr><td>MAXFEATURES=N</td><td>O</td><td> </td><td>A positive integer indicating the maximum number of features that the WFS should return in response to a query. If no value is specified then all result instances should be presented.</td></tr><tr><td>TYPENAME <span class="bold"><b>(Optional</b></span> if FEATUREID is specified.)</td><td>M</td><td> </td><td>A list of feature type names to query.</td></tr><tr><td>FEATUREID (<span class="bold"><b>Mutually exclusive</b></span> with FILTER and BBOX)</td><td>O</td><td> </td><td>An enumerated list of feature instances to fetch identified by their feature identifiers.</td></tr><tr><td>FILTER (<span class="bold"><b>Prerequisite</b></span>: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FEATUREID and BBOX)</td><td>O</td><td> </td><td>A filter specification describes a set of features to operate upon. The filter is defined as specified in the Filter Encoding Specification [3]. If the FILTER parameter is used, one filter must be specified for each feature type listed in the TYPENAME parameter. Individual filters encoded in the FILTER parameter are enclosed in parentheses “(“ and “)”.</td></tr><tr><td>BBOX (<span class="bold"><b>Prerequisite</b></span>: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FEATUREID and BBOX)</td><td>O</td><td> </td><td>In lieu of a FEATUREID or FILTER, a client may specify a bounding box as described in Section 13.3.3.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40034713" />20.7.3.2. Examples</h5></div></div><div xmlns="" /></div><p><a id="N40034C13" />Many of the examples in this section include a FILTER parameter whose value is an XML encoded filter as specified in the Filter Encoding Implementation Specification [3]. To be rigorously correct, these examples should include namespace and schema location information in the root element <span class="bold"><b>&lt;Filter&gt;</b></span>, such that the XML may be validated. Thus the parameter:</p><pre class="programlisting">FILTER=&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;
       &lt;gml:Box&gt;&lt;gml&gt;&lt;coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
       &lt;/Within&gt;&lt;/Filter&gt;</pre><p><a id="N40035613" />should more correctly be:</p><pre class="programlisting">FILTER=&lt;Filter xmlns="http://www.opengis.net/ogc"
               xmlns:gml="http://www.opengis.net/gml"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.opengis.net/ogc
                                   ../filter/1.0.0/filter.xsd
                                   http://www.opengis.net/gml
                                   ../gml/2.1/geometry.xsd"&gt;
       &lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;
       &lt;gml:Box&gt;&lt;gml&gt;&lt;coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
       &lt;/Within&gt;&lt;/Filter&gt;</pre><p><a id="N40035C13" />For the sake of clarify, however, the namespace and schema location attribute tags have been omitted from the examples in this section. In addition, the schema locations shown are only example locations and the correct schema locations would need to be specified.</p><p><a id="N40035F13" />Finally, the value of the <span class="bold"><b>FILTER</b></span> parameter is broken up over several lines again for clarities sake. An actual <span class="bold"><b>FILTER</b></span> parameter would have a single long string as its argument.</p><div class="example"><a id="N1122C" /><p class="title"><b>Example 45. Example 1</b></p><p xmlns=""><a id="N40036F13" />Query all properties of all instances of type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       TYPENAME=INWATERA_1M</pre></div><div class="example"><a id="N11234" /><p class="title"><b>Example 46. Example 2</b></p><p xmlns=""><a id="N40037B13" />Query some properties of all instances of type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTYNAME=INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID&amp;
       TYPENAME=INWATERA_1M</pre></div><div class="example"><a id="N1123C" /><p class="title"><b>Example 47. Example 3</b></p><p xmlns=""><a id="N40038713" />Query all properties of the feature instance identified by the feature identifier "INWATERA_1M.1013".</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       FEATUREID=INWATERA_1M.1013</pre></div><div class="example"><a id="N11244" /><p class="title"><b>Example 48. Example 4</b></p><p xmlns=""><a id="N40039313" />Query some properties of the feature instance identified by the feature identifier "INWATERA_1M.1013".</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTYNAME=INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID&amp;
       FEATUREID=INWATERA_1M.1013</pre></div><div class="example"><a id="N1124C" /><p class="title"><b>Example 49. Example 5</b></p><p xmlns=""><a id="N40039F13" />Query all properties of an enumerated set of feature instances of type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       FEATUREID=INWATERA_1M.1013,INWATERA_1M.1014,INWATERA_1M.1015</pre></div><div class="example"><a id="N11254" /><p class="title"><b>Example 50. Example 6</b></p><p xmlns=""><a id="N4003AB13" />Query some properties of an enumerated set of feature instances of type INWATERA_1M. In this example, the WKB_GEOM and TILE_ID properties are selected for each feature instance.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
     SERVICE=WFS&amp;
     VERSION=1.0.0&amp;
     REQUEST=GetFeature&amp;
     PROPERTYNAME=(INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID)
                  (INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID)
                  (INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID)&amp;
     FEATUREID=INWATERA_1M.1013,INWATERA_1M.1014,INWATERA_1M.1015</pre></div><div class="example"><a id="N1125C" /><p class="title"><b>Example 51. Example 7</b></p><p xmlns=""><a id="N4003B713" />Query all properties of a constrained set of feature instances of type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       TYPENAME=INWATERA_1M&amp;
       FILTER=&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;
              &lt;gml:Box&gt;&lt;gml&gt;&lt;coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;
              &lt;/Within&gt;&lt;/Filter&gt;</pre></div><div class="example"><a id="N11264" /><p class="title"><b>Example 52. Example 8</b></p><p xmlns=""><a id="N4003C313" />Query some properties of a constrained set of features instances of type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTYNAME=INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID&amp;
       TYPENAME=INWATERA_1M&amp;
       FILTER=&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;&lt;gml:Box&gt;
              &lt;gml:coordinates&gt;10,1020,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;&lt;/Within&gt;&lt;/Filter&gt;</pre></div><div class="example"><a id="N1126C" /><p class="title"><b>Example 53. Example 9</b></p><p xmlns=""><a id="N4003CF13" />Query all properties of a list of feature types.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       TYPENAME=INWATERA_1M,BUILTUPA_1M</pre></div><div class="example"><a id="N11274" /><p class="title"><b>Example 54. Example 10</b></p><p xmlns=""><a id="N4003DB13" />Query some properties of a list of feature types. In this case, the attributes WKB_GEOM and TILE_ID are fetched for the INWATERA_1M feature type and all the attributes of feature type BUILTUPA_1M are fetched.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTY=(INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID)(BUILTUPA_1M/*)&amp;
       TYPENAME=INWATERA_1M,BUILTUPA_1M</pre></div><div class="example"><a id="N1127C" /><p class="title"><b>Example 55. Example 11</b></p><p xmlns=""><a id="N4003E713" />Query all properties of an enumerated set of feature instances.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       FEATUREID=INWATERA_1M.1013,BUILTUP_1M.3456</pre></div><div class="example"><a id="N11284" /><p class="title"><b>Example 56. Example 12</b></p><p xmlns=""><a id="N4003F313" />Query some properties of an enumerated set of feature instances. In this case, the WKB_GEOM and TILE_ID attributes are fetched for feature instance "INWATERA_1M.1013". The attribute WKB_GEOM is fetched for feature instance "BUILTUPA_1M.3456".</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTYNAME=INWATERA_1M/WKB_GEOM,INWATERA_1M/TILE_ID,BUILTUPA_1M/WKB_GEOM)&amp;
       FEATUREID=INWATERA_1M.1013,BUILTUPA_1M.3456</pre></div><div class="example"><a id="N1128C" /><p class="title"><b>Example 57. Example 13</b></p><p xmlns=""><a id="N4003FF13" />Query all properties of all feature instances of the feature type INWATERA_1M and BUILTUPA_1M that lie within the specified box.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       TYPENAME=INWATERA_1M,BUILTUPA_1M&amp;
       FILTER=(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM
              &lt;PropertyName&gt;&lt;gml:Box&gt;&lt;gml:coordinates&gt;10,10 20,20&lt;/gml:Box&gt;
              &lt;/gml:coordinates&gt;&lt;/Within&gt;&lt;/Filter&gt;)(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;
              BUILTUPA_1M/WKB_GEOM&lt;PropertyName&gt;&lt;gml:Box&gt;&lt;gml:coordinates&gt;10,10
              20,20&lt;/gml:Box&gt;&lt;/gml:coordinates&gt;&lt;/Within&gt;&lt;/Filter&gt;)</pre></div><div class="example"><a id="N11294" /><p class="title"><b>Example 58. Example 14</b></p><p xmlns=""><a id="N40040B13" />Query some properties of a constrained set of feature instances of types INWATERA_1M and BUILTUPA_1M.</p><pre class="programlisting">http://www.SiriusCyberneticsCorp.com/wfs.cgi&amp;
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=GetFeature&amp;
       PROPERTYNAME=(INWATERA_1M/WKB_GEOM,INWATERA_1MTILE_ID)(BUILTUPA_1M/WKB_GEOM)&amp;
       TYPENAME=INWATERA_1M,BUILTUPA_1M&amp;
       FILTER=(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM|INWATERA_1M/WKB_GEOM
              &lt;PropertyName&gt;&lt;gml:Box&gt;&lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;
              &lt;/gml:Box&gt;&lt;/Within&gt;&lt;/Filter&gt;)(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;
              INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;&lt;gml:Box&gt;&lt;gml:coordinates&gt;10,10
              20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;&lt;/Within&gt;&lt;/Filter&gt;)</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="KVP.LockFeature" />20.7.4. LockFeature operation</h4></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40041913" />20.7.4.1. Request</h5></div></div><div xmlns="" /></div><div class="table"><a id="N40041E13" /><p class="title"><b>Table 10. Table 10 - LockFeature encoding</b></p><table xmlns="" summary="Table 10 - LockFeature encoding" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M</th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST=LockFeature</td><td>M</td><td> </td><td>The name of the request.</td></tr><tr><td>TYPENAME (<span class="bold"><b>Optional</b></span> if FEATUREID is specified.)</td><td>O</td><td> </td><td>Names or one or more feature types whose feature instances are to be locked.</td></tr><tr><td>EXPIRY</td><td>O</td><td> </td><td>The number of minutes the lock should persist before being cleared. If no value is specified then the lock should persist indefinitely.</td></tr><tr><td>LOCKACTION=[<span class="underline">ALL</span> | SOME]</td><td xmlns="">O</td><td> </td><td>Specify how the lock should be acquired. ALL indicates to try to get all feature locks otherwise fail. SOME indicates to try to get as many feature locks as possible.</td></tr><tr><td>FEATUREID (<span class="bold"><b>Mutually exclusive</b></span> with FILTER and BBOX.)</td><td>O</td><td> </td><td>An enumerated list of feature instance identifiers indicating which feature instances to lock.</td></tr><tr><td>FILTER (Prerequisite: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FEATUREID and BBOX.)</td><td>O</td><td> </td><td>An XML string encoded as described in [3] indicating which features to operate upon. If the FILTER parameter is used, one filter must be specified for each feature type listed in the TYPENAME parameter. Individual filters encoded in the FILTER parameter are enclosed in parentheses “(“ and “)”.</td></tr><tr><td>BBOX (<span class="bold"><b>Prerequisite</b></span>: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FEATUREID and FILTER.)</td><td>O</td><td> </td><td>In lieu of a FEATUREID or FILTER, a client may specify a bounding box as described in Section 13.3.3.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N4004B813" />20.7.4.2. Examples</h5></div></div><div xmlns="" /></div><div class="example"><a id="N11309" /><p class="title"><b>Example 59. Example 1</b></p><p xmlns=""><a id="N4004C213" />The following example locks all instances of feature type INWATERA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=LockFeature&amp;
       TYPENAME=INWATERA_1M</pre></div><div class="example"><a id="N11311" /><p class="title"><b>Example 60. Example 2</b></p><p xmlns=""><a id="N4004CE13" />The following example locks the feature identified by "ROADL_1M.1013".</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=LockFeature&amp;
       FEATUREID=ROADL_1M.1013</pre></div><div class="example"><a id="N11319" /><p class="title"><b>Example 61. Example 3</b></p><p xmlns=""><a id="N4004DA13" />The following example locks all feature instances of feature type INWATERA_1M and BUILTUPA_1M.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=LockFeature&amp;
       TYPENAME=INWATER_1M,BUILTUPA_1M</pre></div><div class="example"><a id="N11321" /><p class="title"><b>Example 62. Example 4</b></p><p xmlns=""><a id="N4004E613" />The following example locks all features of feature type INWATERA_1M and BUILTUPA_1M that lie INSIDE a user specified region of interest.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
     SERVICE=WFS&amp;
     VERSION=1.0.0&amp;
     REQUEST=LockFeature&amp;
     LOCKACTION=ALL&amp;
     TYPENAME=INWATER_1M,BUILTUPA_1M&amp;
     FILTER=(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;WKB_GEOM&lt;/PropertyName&gt;&lt;gml:Box&gt;
             &lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;&lt;/Within&gt;
             &lt;/Filter&gt;)(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;WKB_GEOM&lt;/PropertyName&gt;&lt;gml:Box&gt;
             &lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;&lt;/Within&gt;
             &lt;/Filter&gt;)</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="KVP.Transaction" />20.7.5. Transaction</h4></div></div><div xmlns="" /></div><p><a id="N4004F413" />The only supported operation of the transaction interface is the DELETE operation. Expressing INSERT or UPDATE requests, which can be quite lengthy, is not convenient using keyword-value pair encoding.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N4004F713" />20.7.5.1. Request</h5></div></div><div xmlns="" /></div><div class="table"><a id="N4004FC13" /><p class="title"><b>Table 11. Table 11 - Transaction encoding</b></p><table xmlns="" summary="Table 11 - Transaction encoding" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M</th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST=Transaction</td><td>M</td><td> </td><td>The name of the WFS request.</td></tr><tr><td>OPERATION=Delete</td><td>M</td><td> </td><td>Transaction operation to execute. Currently only <span class="emphasis"><em>Delete</em></span> is defined.</td></tr><tr><td>TYPENAME (<span class="bold"><b>Optional</b></span> if FEATUREID is specified.)</td><td>M</td><td> </td><td>A list of feature types upon which to apply the operation.</td></tr><tr><td>RELEASEACTION=[<span class="underline">ALL</span>|SOME]</td><td xmlns="">O</td><td> </td><td>A value of ALL indicates that all feature locks should be released when a transaction terminates. A value of SOME indicates that only those records that are modified should be released. The remaining locks are maintained</td></tr><tr><td>FEATUREID (<span class="bold"><b>Mutually exclusive</b></span> with FILTER and BBOX)</td><td>O</td><td> </td><td>A list of feature identifiers upon which the specified operation shall be applied. Optional. No default.</td></tr><tr><td>FILTER (<span class="bold"><b>Prerequisite</b></span>: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FEATUREID and BBOX)</td><td>O</td><td> </td><td>A filter specification describes a set of features to operate upon. The format of the filter is defined in the Filter Encoding Specification [3]. If the FILTER parameter is used, one filter must be specified for each feature type listed in the TYPENAME parameter. Individual filters encoded in the FILTER parameter are enclosed in parentheses "(" and ")".</td></tr><tr><td>BBOX (<span class="bold"><b>Prerequisite</b></span>: TYPENAME) (<span class="bold"><b>Mutually exclusive</b></span> with FILTER and FEATUREID)</td><td>O</td><td> </td><td>In lieu of a FEATUREID or FILTER, a client may specify a bounding box as described in Section 13.3.3.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40059D13" />20.7.5.2. Examples</h5></div></div><div xmlns="" /></div><div class="example"><a id="N113A0" /><p class="title"><b>Example 63. Example 1</b></p><p xmlns=""><a id="N4005A713" />Delete the feature instance identified by "ROADL_1M.1013".</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=Transaction&amp;
       OPERATION=Delete&amp;
       FEATUREID=ROADL_1M.1013</pre></div><div class="example"><a id="N113A8" /><p class="title"><b>Example 64. Example 2</b></p><p xmlns=""><a id="N4005B313" />The following example deletes all features of type INWATERA_1M and BUILTUPA_1M that lie INSIDE the specified box.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=Transaction&amp;
       OPERATION=Delete&amp;
       TYPENAME=INWATER_1M,BUILTUPA_1M&amp;
       FILTER=(&lt;Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;INWATERA_1M/WKB_GEOM&lt;PropertyName&gt;&lt;gml:Box&gt;
               &lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;&lt;/gml:Box&gt;&lt;/Within&gt;
               &lt;/Filter&gt;)(&lt; Filter&gt;&lt;Within&gt;&lt;PropertyName&gt;BUILTUPA_1M/WKB_GEOM
               &lt;PropertyName&gt;&lt;gml:Box&gt;&lt;gml:coordinates&gt;10,10 20,20&lt;/gml:coordinates&gt;
               &lt;/gml:Box&gt;&lt;/Within&gt;&lt;/Filter&gt;)</pre></div><div class="example"><a id="N113B0" /><p class="title"><b>Example 65. Example 3</b></p><p xmlns=""><a id="N4005BF13" />The following example is the same as Example 2, except that the BBOX parameter is used to specify the spatial constraint on the Delete command.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       SERVICE=WFS&amp;
       VERSION=1.0.0&amp;
       REQUEST=Transaction&amp;
       OPERATION=Delete&amp;
       TYPENAME=INWATER_1M,BUILTUPA_1M&amp;
       BBOX=10,10,20,20</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="KVP.GetCapabilities" />20.7.6. GetCapabilities Operation</h4></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N4005CD13" />20.7.6.1. Request</h5></div></div><div xmlns="" /></div><div class="table"><a id="N4005D213" /><p class="title"><b>Table 12. Table 12 – GetCapabilities encoding</b></p><table xmlns="" summary="Table 12 – GetCapabilities encoding" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>URL Component</th><th>O/M</th><th>DEFAULT</th><th>Description</th></tr></thead><tbody><tr><td>REQUEST=GetCapabilities</td><td>M</td><td> </td><td>Name of request.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="N40060013" />20.7.6.2. Response</h5></div></div><div xmlns="" /></div><div class="example"><a id="N113DD" /><p class="title"><b>Example 66. Example 1</b></p><p xmlns=""><a id="N40060A13" />Request the capabilities document from a WFS.</p><pre class="programlisting">http://www.someserver.com/wfs.cgi?
       VERSION=1.0.0&amp;
       SERVICE=WFS&amp;
       REQUEST=GetCapabilities</pre></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="SchemaDefinitions" />21. XML Schema definitions (Normative)</h2></div></div><div xmlns="" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N400007A" />21.1. Introduction</h3></div></div><div xmlns="" /></div><p><a id="N40000CA" />This annex contains the normative XML Schema definitions of the WFS
    operations, capabilities document, and exceptions.</p><p><a id="N40000FA" />Annex A.2 contains the XML Schema definition for exception messages
    generated by a web feature service. All exception messages generated by a
    WFS must validate against this schema.</p><p><a id="N400012A" />Annex A.3 contains the XML Schema definition of the basic operations
    that a web feature service must provide. The basic set of operations
    includes GetCapabilities, DescribeFeatureType and GetFeature. A web
    feature service must implement this set of operations.</p><p><a id="N400015A" />Annex A.4 contains the XML Schema definitions of optional operations
    related to transaction processing. The set of operations includes
    GetFeatureWithLock, LockFeature and Transaction. A web feature service may
    implement some or all of these operations.</p><p><a id="N400018A" />Annex A.5 contains the XML Schema definition of the capabilities
    document that a web feature service must generate in response to a
    GetCapabilities request. The GetCapabilities response of a web feature
    service must validate against this schema. Further, if a web feature
    service implements vendor specific extensions, this schema in Annex A.5
    must be extended in the places indicated so that the vendor extensions can
    be discovered by a client application wishing to do so.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N40001CA" />21.2. OGC-exception.xsd</h3></div></div><div xmlns="" /></div><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsd:schema
   targetNamespace="http://www.opengis.net/ogc"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"&gt;

   &lt;xsd:element name="ServiceExceptionReport"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The ServiceExceptionReport element contains one
            or more ServiceException elements that describe
            a service exception.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:complexType&gt;
         &lt;xsd:sequence&gt;
            &lt;xsd:element name="ServiceException"
                         type="ogc:ServiceExceptionType"
                         minOccurs="0" maxOccurs="unbounded"&gt;
               &lt;xsd:annotation&gt;
                  &lt;xsd:documentation&gt;
                     The Service exception element is used to describe
                     a service exception.
                  &lt;/xsd:documentation&gt;
               &lt;/xsd:annotation&gt;
            &lt;/xsd:element&gt;
         &lt;/xsd:sequence&gt;
         &lt;xsd:attribute name="version" type="xsd:string" fixed="1.2.0"/&gt;
      &lt;/xsd:complexType&gt;
   &lt;/xsd:element&gt;

   &lt;xsd:complexType name="ServiceExceptionType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The ServiceExceptionType type defines the ServiceException
            element.  The content of the element is an exception message
            that the service wished to convey to the client application.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
         &lt;xsd:extension base="xsd:string"&gt;
            &lt;xsd:attribute name="code" type="xsd:string"&gt;
               &lt;xsd:annotation&gt;
                  &lt;xsd:documentation&gt;
                     A service may associate a code with an exception
                     by using the code attribute.
                  &lt;/xsd:documentation&gt;
               &lt;/xsd:annotation&gt;
            &lt;/xsd:attribute&gt;
            &lt;xsd:attribute name="locator" type="xsd:string"&gt;
               &lt;xsd:annotation&gt;
                  &lt;xsd:documentation&gt;
                     The locator attribute may be used by a service to
                     indicate to a client where in the client's request
                     an exception was encountered.  If the request included
                     a 'handle' attribute, this may be used to identify the
                     offending component of the request.  Otherwise the
                     service may try to use other means to locate the
                     exception such as line numbers or byte offset from the
                     begining of the request, etc ...
                  &lt;/xsd:documentation&gt;
               &lt;/xsd:annotation&gt;
            &lt;/xsd:attribute&gt;
         &lt;/xsd:extension&gt;
      &lt;/xsd:simpleContent&gt;
   &lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N400028A" />21.3. WFS-basic.xsd</h3></div></div><div xmlns="" /></div><pre class="programlisting">
&lt;?xml version="1.0"?&gt;
&lt;xsd:schema
   targetNamespace="http://www.opengis.net/wfs"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"&gt;

   &lt;!-- ==============================================================
        Includes and Imports
        ============================================================== --&gt;
   &lt;xsd:import namespace="http://www.opengis.net/gml"
               schemaLocation="../../gml/2.1/feature.xsd"/&gt;
   &lt;xsd:import namespace="http://www.opengis.net/ogc"
               schemaLocation="../../filter/1.0.0/filter.xsd"/&gt;

   &lt;!-- ==============================================================
        REQUEST MESSAGES
        ============================================================== --&gt;
   &lt;xsd:element name="GetCapabilities" type="wfs:GetCapabilitiesType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The GetCapapbilities element is used to request that a Web Feature
            Service generate an XML document describing the organization
            providing the service, the WFS operations that the service
            supports, a list of feature types that the service can operate
            on and list of filtering capabilities that the service support.
            Such an XML document is called a capabilities document.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="DescribeFeatureType" type="wfs:DescribeFeatureTypeType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The DescribeFeatureType element is used to request that a Web
            Feature Service generate a document describing one or more
            feature types.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="GetFeature" type="wfs:GetFeatureType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The GetFeature element is used to request that a Web Feature
            Service return feature instances of one or more feature types.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;

   &lt;!-- ==============================================================
        RESPONSE MESSAGES
        ============================================================== --&gt;
   &lt;xsd:element name="FeatureCollection"
                type="wfs:FeatureCollectionType"
                substitutionGroup="gml:_FeatureCollection"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This element is a container for the response to a GetFeature
            or GetFeatureWithLock (WFS-transaction.xsd) request.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;

   &lt;!-- ==============================================================
        COMMON ATTRIBUTES DOCUMENTATION
        ==============================================================
        VERSION:
           The version attribute is used to indicate to which version
           of the Web Feature Service Implementation Specification a
           request conforms.

        SERVICE:
           The service attribute is used to indicate which service
           should process an operation.  This attribute is particularly
           useful in the case where a single server implements multiple
           services (e.g. WMS, WFS, WCS, etc ...).

        HANDLE:
           The purpose of the handle attribute is to allow a client app
           to associate a mnemonic name with a request for error handling
           purposes.  If a "handle" is specified, and an exception occurs,
           a Web Feature Service may use the handle to identify the
           offending element.

        TYPENAME:
           The typeName attribute is used to specify the name of the
           feature type to be queried.  The term "feature type" is a
           term used by convention to refer to the container storing
           feature instances.  It does not mean type in the programmatic
           sense.  The typeName attribute should, instead, be thought
           of as the feature name. --&gt;

   &lt;!-- ==============================================================
        TYPES
        ============================================================== --&gt;
   &lt;!-- GETCAPABILITIES --&gt;
   &lt;xsd:complexType name="GetCapabilitiesType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This type defines the GetCapabilities operation.  In response
            to a GetCapabilities request, a Web Feature Service must
            generate a capabilities XML document that validates against
            the schemas defined in WFS-capabilities.xsd.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="optional" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- DESCRIBEFEATURETYPE --&gt;
   &lt;xsd:complexType name="DescribeFeatureTypeType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The DescribeFeatureType operation allows a client application
            to request that a Web Feature Service describe one or more
            feature types.   A Web Feature Service must be able to generate
            feature descriptions as valid GML2 application schemas.

            The schemas generated by the DescribeFeatureType operation can
            be used by a client application to validate the output.

            Feature instances within the WFS interface must be specified
            using GML2.  The schema of feature instances specified within
            the WFS interface must validate against the feature schemas
            generated by the DescribeFeatureType request.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="TypeName" type="xsd:QName"
                      minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The TypeName element is used to enumerate the feature types
                  to be described.  If no TypeName elements are specified
                  then all features should be described.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="outputFormat"
                     type="xsd:string" use="optional" default="XMLSCHEMA"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The outputFormat attribute is used to specify what schema
               description language should be used to describe features.
               The default value of XMLSCHEMA means that the Web Feature
               Service must generate a GML2 application schema that can
               be used to validate the GML2 output of a GetFeature request
               or feature instances specified in Transaction operations.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- GETFEATURE --&gt;
   &lt;xsd:complexType name="GetFeatureType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            A GetFeature element contains one or more Query elements
            that describe a query operation on one feature type.  In
            response to a GetFeature request, a Web Feature Service
            must be able to generate a GML2 response that validates
            using a schema generated by the DescribeFeatureType request.
            A Web Feature Service may support other possibly non-XML
            (and even binary) output formats as long as those formats
            are advertised in the capabilities document.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:Query" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="outputFormat"
                     type="xsd:string" use="optional" default="GML2"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The outputFormat attribute is used to specify the output
               format that the Web Feature Service should generate in
               response to a GetFeature or GetFeatureWithLock element.
               The default value of GML2 indicates that the output is an
               XML document that conforms to the Geography Markup Language
               (GML) Implementation Specification V2.0.

               Other values may be used to specify other formats as long
               as those values are advertised in the capabilities document.
               For example, the value WKB may be used to indicate that a
               Well Known Binary format be used to encode the output.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
      &lt;xsd:attribute name="maxFeatures" type="xsd:positiveInteger"
                     use="optional"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The maxFeatures attribute is used to specify the maximum
               number of features that a GetFeature operation should
               generate (regardless of the actual number of query hits).
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Query" type="wfs:QueryType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The Query element is used to describe a single query.
            One or more Query elements can be specified inside a
            GetFeature element so that multiple queries can be
            executed in one request.  The output from the various
            queries are combined in a wfs:FeatureCollection element
            to form the response to the request.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="QueryType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The Query element is of type QueryType.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
     &lt;xsd:sequence&gt;
       &lt;xsd:element ref="ogc:PropertyName" minOccurs="0" maxOccurs="unbounded"&gt;
          &lt;xsd:annotation&gt;
             &lt;xsd:documentation&gt;
                The PropertyName element is used to specify one or more
                properties of a feature whose values are to be retrieved
                by a Web Feature Service.

                While a Web Feature Service should endeavour to satisfy
                the exact request specified, in some instance this may
                not be possible.  Specifically, a Web Feature Service
                must generate a valid GML2 response to a Query operation.
                The schema used to generate the output may include
                properties that are mandatory.  In order that the output
                validates, these mandatory properties must be specified
                in the request.  If they are not, a Web Feature Service
                may add them automatically to the Query before processing
                it.  Thus a client application should, in general, be
                prepared to receive more properties than it requested.

                Of course, using the DescribeFeatureType request, a client
                application can determine which properties are mandatory
                and request them in the first place.
             &lt;/xsd:documentation&gt;
          &lt;/xsd:annotation&gt;
       &lt;/xsd:element&gt;
       &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"&gt;
          &lt;xsd:annotation&gt;
             &lt;xsd:documentation&gt;
                The Filter element is used to define spatial and/or non-spatial
                constraints on query.  Spatial constrains use GML2 to specify
                the constraining geometry.  A full description of the Filter
                element can be found in the Filter Encoding Implementation
                Specification.
             &lt;/xsd:documentation&gt;
          &lt;/xsd:annotation&gt;
       &lt;/xsd:element&gt;
     &lt;/xsd:sequence&gt;
     &lt;xsd:attribute name="handle"
                    type="xsd:string" use="optional"/&gt;
     &lt;xsd:attribute name="typeName"
                    type="xsd:QName" use="required"/&gt;
     &lt;xsd:attribute name="featureVersion"
                    type="xsd:string" use="optional"&gt;
        &lt;xsd:annotation&gt;
           &lt;xsd:documentation&gt;
              For systems that implement versioning, the featureVersion
              attribute is used to specify which version of a particular
              feature instance is to be retrieved.  A value of ALL means
              that all versions should be retrieved.  An integer value
              'i', means that the ith version should be retrieve if it
              exists or the most recent version otherwise.
           &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
     &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- RESPONSE TYPE --&gt;
   &lt;xsd:complexType name="FeatureCollectionType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This type defines a container for the response to a
            GetFeature or GetFeatureWithLock request.  If the
            request is GetFeatureWithLock, the lockId attribute
            must be populated.  The lockId attribute can otherwise
            be safely ignored.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
     &lt;xsd:complexContent&gt;
       &lt;xsd:extension base="gml:AbstractFeatureCollectionType"&gt;
         &lt;xsd:attribute name="lockId" type="xsd:string" use="optional"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The value of the lockId attribute is an identifier
                  that a Web Feature Service generates and which a
                  client application can use in subsequent operations
                  (such as a Transaction request) to reference the set
                  of locked features.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:attribute&gt;
       &lt;/xsd:extension&gt;
     &lt;/xsd:complexContent&gt;
   &lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N400034A" />21.4. WFS-transaction.xsd</h3></div></div><div xmlns="" /></div><pre class="programlisting">
&lt;?xml version="1.0"?&gt;
&lt;xsd:schema
   targetNamespace="http://www.opengis.net/wfs"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:wfs="http://www.opengis.net/wfs"
   elementFormDefault="qualified"&gt;

   &lt;!-- ==============================================================
        Includes and Imports
        ============================================================== --&gt;
   &lt;xsd:include schemaLocation="WFS-basic.xsd"/&gt;
   &lt;xsd:import namespace="http://www.opengis.net/gml"
               schemaLocation="../../gml/2.1/feature.xsd"/&gt;
   &lt;xsd:import namespace="http://www.opengis.net/ogc"
               schemaLocation="../../filter/1.0.0/filter.xsd"/&gt;

   &lt;!-- ==============================================================
         REQUEST MESSAGES
         ============================================================== --&gt;
   &lt;xsd:element name="GetFeatureWithLock" type="wfs:GetFeatureWithLockType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This is the root element for the GetFeatureWithLock request.
            The GetFeatureWithLock operation performs identically to a
            GetFeature request except that the GetFeatureWithLock request
            locks all the feature instances in the result set and returns
            a lock identifier to a client application in the response.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="LockFeature" type="wfs:LockFeatureType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This is the root element for a LockFeature request.
            The LockFeature request can be used to lock one or
            more feature instances.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="Transaction" type="wfs:TransactionType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This is the root element for a Transaction request.
            A transaction request allows insert, update and
            delete operations to be performed to create, change
            or remove feature instances.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;

   &lt;!-- ==============================================================
         RESPONSE MESSAGES
         ============================================================== --&gt;
   &lt;xsd:element name="WFS_LockFeatureResponse"
                type="wfs:WFS_LockFeatureResponseType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The WFS_LockFeatureResponse element contains a report
            about the completion status of a LockFeature request.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="WFS_TransactionResponse"
                type="wfs:WFS_TransactionResponseType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The WFS_TransactionResponse element contains a report
            about the completion status of a Transaction operation.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;

   &lt;!-- ==============================================================
         COMMON ATTRIBUTE DOCUMENTATION
         ==============================================================
         EXPIRY:
            The expiry attribute value is specified in minutes. It
            indicates how long a Web Feature Service should wait to
            receive a request from the client application that locked
            the feature instances.  If the specified time elapses and
            no request has been received by a Web Feature Service that
            references the lockId given to the client application, then
            the locks maintained by the Web Feature Service shall be
            released and the lockId that references the locked features
            shall now be invalid.  If the expiry attribute is not specified,
            then the feature instances shall be locked indefinitely and the
            intervention of an administrator may be required to release
            the locks. --&gt;

   &lt;!-- ==============================================================
         TYPES
         ============================================================== --&gt;
   &lt;!-- GETFEATUREWITHLOCK --&gt;
   &lt;xsd:complexType name="GetFeatureWithLockType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            A GetFeatureWithLock request operates identically to a
            GetFeature request expect that it attempts to lock the
            feature instances in the result set and includes a lock
            identifier in its response to a client.  A lock identifier
            is an identifier generated by a Web Feature Service that
            a client application can use, in subsequent operations,
            to reference the locked set of feature instances.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:Query" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="expiry"
                     type="xsd:positiveInteger" use="optional"/&gt;
      &lt;xsd:attribute name="outputFormat"
                     type="xsd:string" use="optional" default="GML2"/&gt;
      &lt;xsd:attribute name="maxFeatures"
                     type="xsd:positiveInteger" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- LOCKFEATURE --&gt;
   &lt;xsd:complexType name="LockFeatureType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This type defines the LockFeature operation.  The LockFeature
            element contains one or more Lock elements that define
            which features of a particular type should be locked.  A lock
            identifier (lockId) is returned to the client application which
            can be used by subsequent operations to reference the locked
            features.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Lock" type="wfs:LockType" maxOccurs="unbounded"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The lock element is used to indicate which feature
                  instances of particular type are to be locked.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="expiry"
                     type="xsd:positiveInteger" use="optional"/&gt;
      &lt;xsd:attribute name="lockAction"
                     type="wfs:AllSomeType" use="optional"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The lockAction attribute is used to indicate what
               a Web Feature Service should do when it encounters
               a feature instance that has already been locked by
               another client application.

               Valid values are ALL or SOME.

               ALL means that the Web Feature Service must acquire
               locks on all the requested feature instances.  If it
               cannot acquire those locks then the request should
               fail.  In this instance, all locks acquired by the
               operation should be released.

               SOME means that the Web Feature Service should lock
               as many of the requested features as it can.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="LockType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            This type defines the Lock element.  The Lock element
            defines a locking operation on feature instances of
            a single type. An OGC Filter is used to constrain the
            scope of the operation.  Features to be locked can be
            identified individually by using their feature identifier
            or they can be locked by satisfying the spatial and
            non-spatial constraints defined in the filter.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName"
                     type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- TRANSACTION --&gt;
   &lt;xsd:complexType name="TransactionType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The TranactionType defines the Transaction operation.  A
            Transaction element contains one or more Insert, Update
            Delete and Native elements that allow a client application
            to create, modify or remove feature instances from the
            feature repository that a Web Feature Service controls.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:LockId" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  In order for a client application to operate upon locked
                  feature instances, the Transaction request must include
                  the LockId element.  The content of this element must be
                  the lock identifier the client application obtained from
                  a previous GetFeatureWithLock or LockFeature operation.

                  If the correct lock identifier is specified the Web
                  Feature Service knows that the client application may
                  operate upon the locked feature instances.

                  No LockId element needs to be specified to operate upon
                  unlocked features.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xsd:element ref="wfs:Insert"/&gt;
            &lt;xsd:element ref="wfs:Update"/&gt;
            &lt;xsd:element ref="wfs:Delete"/&gt;
            &lt;xsd:element ref="wfs:Native"/&gt;
         &lt;/xsd:choice&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
      &lt;xsd:attribute name="service"
                     type="xsd:string" use="required" fixed="WFS"/&gt;
      &lt;xsd:attribute name="handle"
                     type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="releaseAction"
                     type="wfs:AllSomeType" use="optional"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The releaseAction attribute is used to control how a Web
               Feature service releases locks on feature instances after
               a Transaction request has been processed.

               Valid values are ALL or SOME.

               A value of ALL means that the Web Feature Service should
               release the locks of all feature instances locked with the
               specified lockId, regardless or whether or not the features
               were actually modified.

               A value of SOME means that the Web Feature Service will
               only release the locks held on feature instances that
               were actually operated upon by the transaction.  The lockId
               that the client application obtained shall remain valid and
               the other, unmodified, feature instances shall remain locked.
               If the expiry attribute was specified in the original operation
               that locked the feature instances, then the expiry counter
               will be reset to give the client application that same amount
               of time to post subsequent transactions against the locked
               features.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="LockId" type="xsd:string"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The LockId element contains the value of the lock identifier
            obtained by a client application from a previous GetFeatureWithLock
            or LockFeature request.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:element name="Insert" type="wfs:InsertElementType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The Insert element is used to indicate that the Web Feature
            Service should create a new instance of a feature type.  The
            feature instance is specified using GML2 and one or more
            feature instances to be created can be contained inside the
            Insert element.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="InsertElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="gml:_Feature" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Update" type="wfs:UpdateElementType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            One or more existing feature instances can be changed by
            using the Update element.  Changing a feature instance
            means that the current value of one or more properties of
            the feature are replaced with new values.  The Update
            element contains  one or more Property elements.  A
            Property element contains the name or a feature property
            who's value is to be changed and the replacement value
            for that property.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="UpdateElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:Property" maxOccurs="unbounded" /&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="0" maxOccurs="1"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Filter element is used to constrain the scope
                  of the update operation to those features identified
                  by the filter.  Feature instances can be specified
                  explicitly and individually using the identifier of
                  each feature instance OR a set of features to be
                  operated on can be identified by specifying spatial
                  and non-spatial constraints in the filter.
                  If no filter is specified, then the update operation
                  applies to all feature instances.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName" type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Delete" type="wfs:DeleteElementType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The Delete element is used to indicate that one or more
            feature instances should be removed from the feature
            repository.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="DeleteElementType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:Filter" minOccurs="1" maxOccurs="1"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Filter element is used to constrain the scope
                  of the delete operation to those features identified
                  by the filter.  Feature instances can be specified
                  explicitly and individually using the identifier of
                  each feature instance OR a set of features to be
                  operated on can be identified by specifying spatial
                  and non-spatial constraints in the filter.
                  If no filter is specified then an exception should
                  be raised since it is unlikely that a client application
                  intends to delete all feature instances.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
      &lt;xsd:attribute name="typeName" type="xsd:QName" use="required"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="Native" type="wfs:NativeType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            Many times, a Web Feature Service interacts with a repository
            that may have special vendor specific capabilities.  The native
            element allows vendor specific command to be passed to the
            repository via the Web Feature Service.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="NativeType"&gt;
      &lt;xsd:attribute name="vendorId" type="xsd:string" use="required"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               The vendorId attribute is used to specify the name of
               vendor who's vendor specific command the client
               application wishes to execute.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
      &lt;xsd:attribute name="safeToIgnore" type="xsd:boolean" use="required"&gt;
         &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
               In the event that a Web Feature Service does not recognize
               the vendorId or does not recognize the vendor specific command,
               the safeToIgnore attribute is used to indicate whether the
               exception can be safely ignored.  A value of TRUE means that
               the Web Feature Service may ignore the command.  A value of
               FALSE means that a Web Feature Service cannot ignore the
               command and an exception should be raised if a problem is
               encountered.
            &lt;/xsd:documentation&gt;
         &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- define structure to specify a property value --&gt;
   &lt;xsd:element name="Property" type="wfs:PropertyType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The Property element is used to specify the new
            value of a feature property inside an Update element.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
   &lt;/xsd:element&gt;
   &lt;xsd:complexType name="PropertyType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Name" type="xsd:string"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Name element contains the name of a feature property
                  to be updated.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="Value" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Value element contains the replacement value for the
                  named property.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;!-- RESPONSE TYPES --&gt;
   &lt;xsd:complexType name="WFS_LockFeatureResponseType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The WFS_LockFeatureResponseType is used to define an
            element to contains the response to a LockFeature
            operation.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="wfs:LockId"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The WFS_LockFeatureResponse includes a LockId element
                  that contains a lock identifier.  The lock identifier
                  can be used by a client, in subsequent operations, to
                  operate upon the locked feature instances.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="FeaturesLocked"
                      type="wfs:FeaturesLockedType" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The LockFeature or GetFeatureWithLock operations
                  identify and attempt to lock a set of feature
                  instances that satisfy the constraints specified
                  in the request.  In the event that the lockAction
                  attribute (on the LockFeature or GetFeatureWithLock
                  elements) is set to SOME, a Web Feature Service will
                  attempt to lock as many of the feature instances from
                  the result set as possible.

                  The FeaturesLocked element contains list of ogc:FeatureId
                  elements enumerating the feature instances that a WFS
                  actually managed to lock.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="FeaturesNotLocked"
                      type="wfs:FeaturesNotLockedType" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  In contrast to the FeaturesLocked element, the
                  FeaturesNotLocked element contains a list of
                  ogc:Filter elements identifying feature instances
                  that a WFS did not manage to lock because they were
                  already locked by another process.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="FeaturesLockedType"&gt;
     &lt;xsd:sequence maxOccurs="unbounded"&gt;
       &lt;xsd:element ref="ogc:FeatureId"/&gt;
     &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="FeaturesNotLockedType"&gt;
     &lt;xsd:sequence maxOccurs="unbounded"&gt;
       &lt;xsd:element ref="ogc:FeatureId"/&gt;
     &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="WFS_TransactionResponseType"&gt;
      &lt;xsd:annotation&gt;
         &lt;xsd:documentation&gt;
            The WFS_TransactionResponseType defines the format of
            the XML document that a Web Feature Service generates
            in response to a Transaction request.  The response
            includes the completion status of the transaction
            and the feature identifiers of any newly created
            feature instances.
         &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="InsertResult"
                      type="wfs:InsertResultType"
                      minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The InsertResult element contains a list of ogc:FeatureId
                  elements that identify any newly created feature instances.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="TransactionResult"
                      type="wfs:TransactionResultType"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The TransactionResult element contains a Status element
                  indicating the completion status of a transaction.  In
                  the event that the transaction fails, additional element
                  may be included to help locate which part of the transaction
                  failed and why.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" use="required" fixed="1.0.0"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="TransactionResultType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Status" type="wfs:StatusType"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Status element contains an element indicating the
                  completion status of a transaction.  The SUCCESS element
                  is used to indicate successful completion.  The FAILED
                  element is used to indicate that an exception was
                  encountered.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="Locator" type="xsd:string" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  In the event that an exception was encountered while
                  processing a transaction, a Web Feature Service may
                  use the Locator element to try and identify the part
                  of the transaction that failed.  If the element(s)
                  contained in a Transaction element included a handle
                  attribute, then a Web Feature Service may report the
                  handle to identify the offending element.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element name="Message" type="xsd:string" minOccurs="0"&gt;
            &lt;xsd:annotation&gt;
               &lt;xsd:documentation&gt;
                  The Message element may contain an exception report
                  generated by a Web Feature Service when an exception
                  is encountered.
               &lt;/xsd:documentation&gt;
            &lt;/xsd:annotation&gt;
         &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="InsertResultType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element ref="ogc:FeatureId" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="handle" type="xsd:string" use="optional"/&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="StatusType"&gt;
      &lt;xsd:choice&gt;
         &lt;xsd:element ref="wfs:SUCCESS"/&gt;
         &lt;xsd:element ref="wfs:FAILED"/&gt;
         &lt;xsd:element ref="wfs:PARTIAL"/&gt;
      &lt;/xsd:choice&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:element name="SUCCESS" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="FAILED" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="PARTIAL" type="wfs:EmptyType"/&gt;
   &lt;!-- MISC TYPES --&gt;
   &lt;xsd:complexType name="EmptyType"/&gt;
   &lt;xsd:simpleType name="AllSomeType"&gt;
      &lt;xsd:restriction base="xsd:string"&gt;
         &lt;xsd:enumeration value="ALL"/&gt;
         &lt;xsd:enumeration value="SOME"/&gt;
      &lt;/xsd:restriction&gt;
   &lt;/xsd:simpleType&gt;
&lt;/xsd:schema&gt;

</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="N400040A" />21.5. WFS-capabilities.xsd</h3></div></div><div xmlns="" /></div><pre class="programlisting">
&lt;?xml version="1.0" ?&gt;
&lt;xsd:schema
   targetNamespace="http://www.opengis.net/wfs"
   xmlns:wfs="http://www.opengis.net/wfs"
   xmlns:gml="http://www.opengis.net/gml"
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   elementFormDefault="qualified"&gt;

   &lt;!-- Comments in this document may impose additional constraints
        beyond those codified in the schema syntax.  A conformant
        Web Feature Server must provide Capabilities XML that
           (1) validates against this schema
           (2) does not violate the constraints stated in
               comments herein. --&gt;

   &lt;!-- ==============================================================
        Imports ...
        ============================================================== --&gt;
   &lt;xsd:import namespace="http://www.opengis.net/ogc"
               schemaLocation="../../filter/1.0.0/filterCapabilities.xsd" /&gt;

   &lt;!-- ==============================================================
        Global elements and attributes
        ============================================================== --&gt;
   &lt;!-- A descriptive narrative for more
        information about this server. --&gt;
   &lt;xsd:element name="Abstract" type="xsd:string"/&gt;
   &lt;!-- Elements containing text blocks indicating what
        fees or access constraints are imposed by the
        service provider on the service or data retrieved
        from the server. The reserved keyword "NONE"
        indicates no constraint exists. --&gt;
   &lt;xsd:element name="AccessConstraints" type="xsd:string"/&gt;
   &lt;xsd:element name="Fees" type="xsd:string"/&gt;
   &lt;!-- Short words to help catalog searching.
        Currently, no controlled vocabulary has
        been defined. --&gt;
   &lt;xsd:element name="Keywords" type="xsd:string"/&gt;
   &lt;!-- The top-level HTTP URL of this service.
        Typically the URL of a "home page" for
        the service.  See also the onlineResource
        attributes of &lt;DCPType&gt; children, below.
        Currently, no non-HTTP platforms have been
        specified. --&gt;
   &lt;xsd:element name="OnlineResource"/&gt;
   &lt;xsd:element name="SRS" type="xsd:string"/&gt;
   &lt;!-- A human-readable title to briefly identify
        this server in menus. --&gt;
   &lt;xsd:element name="Title" type="xsd:string"/&gt;

   &lt;xsd:element name="Query"  type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="Insert" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="Update" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="Delete" type="wfs:EmptyType"/&gt;
   &lt;xsd:element name="Lock"   type="wfs:EmptyType"/&gt;

   &lt;!-- REDEFINE THIS ELEMENT AS NEEDED IN YOUR XML  --&gt;
   &lt;xsd:element name="VendorSpecificCapabilities" type="xsd:string"/&gt;

   &lt;!-- ==============================================================
        Root element
        ============================================================== --&gt;
   &lt;!-- The parent element of the Capabilities document includes as
        children a Service element with general information about the
        server, a Capability element with specific information about
        the kinds of functionality offered by the server, a FeatureTypeList
        element defining the list of all feature types available from
        this server and a FeatureCapabilities element describing the
        filter capabilities of the server. --&gt;
   &lt;xsd:element name="WFS_Capabilities" type="wfs:WFS_CapabilitiesType"/&gt;

   &lt;!-- ==============================================================
        Types
        ============================================================== --&gt;
   &lt;xsd:complexType name="WFS_CapabilitiesType"&gt;
      &lt;xsd:sequence&gt;
         &lt;!-- The Service element provides metadata for
              the service as a whole. --&gt;
         &lt;xsd:element name="Service" type="wfs:ServiceType"/&gt;

         &lt;!-- A Capability lists available request
              types, how exceptions may be reported, and
              whether any vendor-specific capabilities
              are defined.  It also lists all the
              feature types available from this feature
              server. --&gt;
         &lt;xsd:element name="Capability" type="wfs:CapabilityType"/&gt;
         &lt;xsd:element name="FeatureTypeList" type="wfs:FeatureTypeListType"/&gt;
         &lt;xsd:element ref="ogc:Filter_Capabilities" /&gt;
      &lt;/xsd:sequence&gt;

      &lt;!-- The version attribute specifies the specification revision
           to which this schema applies.  Its format is one,t two or three
           integers separated by periods: "x", or "x.y", or "x.y.z",
           with the most significant number appearing first.  Future
           revisions are guaranteed to be numbered in monotonically
           increasing fashion, though gaps may appear in the sequence. --&gt;
      &lt;xsd:attribute name="version"
                     type="xsd:string" fixed="1.0.0"/&gt;

      &lt;!-- The updateSequence attribute is a sequence number for
           managing propagation of the contents of this document.
           For example, if a Feature Server adds some data feature
           types it can increment the update sequence to inform
           catalog servers that their previously cached versions
           are now stale. The format is a positive integer. --&gt;
      &lt;xsd:attribute name="updateSequence"
                     type="xsd:nonNegativeInteger" default="0"/&gt;
   &lt;/xsd:complexType&gt;

   &lt;xsd:complexType name="ServiceType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Name" type="xsd:string"/&gt;
         &lt;xsd:element ref="wfs:Title"/&gt;
         &lt;xsd:element ref="wfs:Abstract" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:Keywords" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:OnlineResource"/&gt;
         &lt;xsd:element ref="wfs:Fees" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:AccessConstraints" minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;

   &lt;xsd:complexType name="CapabilityType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Request" type="wfs:RequestType"/&gt;
         &lt;!-- The optional VendorSpecificCapabilities element lists any
              capabilities unique to a particular server.  Because the
              information is not known a priori, it cannot be constrained
              by this particular schema document.  A vendor-specific schema
              fragment must be supplied at the start of the XML capabilities
              document, after the reference to the general WFS_Capabilities
              schema. --&gt;
         &lt;xsd:element ref="wfs:VendorSpecificCapabilities" minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="FeatureTypeListType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Operations"
                      type="wfs:OperationsType" minOccurs="0"/&gt;
         &lt;xsd:element name="FeatureType"
                      type="wfs:FeatureTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- Available WFS-defined request types are listed here. At
        least one of the values is required, but more than one
        may be given. --&gt;
   &lt;xsd:complexType name="RequestType"&gt;
      &lt;xsd:choice maxOccurs="unbounded"&gt;
         &lt;xsd:element name="GetCapabilities"
                      type="wfs:GetCapabilitiesType"/&gt;
         &lt;xsd:element name="DescribeFeatureType"
                      type="wfs:DescribeFeatureTypeType"/&gt;
         &lt;xsd:element name="Transaction"
                      type="wfs:TransactionType"/&gt;
         &lt;xsd:element name="GetFeature"
                      type="wfs:GetFeatureTypeType"/&gt;
         &lt;xsd:element name="GetFeatureWithLock"
                      type="wfs:GetFeatureTypeType"/&gt;
         &lt;xsd:element name="LockFeature"
                      type="wfs:LockFeatureTypeType"/&gt;
      &lt;/xsd:choice&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="GetCapabilitiesType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="DCPType"
                      type="wfs:DCPTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="DescribeFeatureTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="SchemaDescriptionLanguage"
                      type="wfs:SchemaDescriptionLanguageType"/&gt;
         &lt;xsd:element name="DCPType"
                      type="wfs:DCPTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="TransactionType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="DCPType"
                      type="wfs:DCPTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="GetFeatureTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="ResultFormat"
                      type="wfs:ResultFormatType"/&gt;
         &lt;xsd:element name="DCPType"
                      type="wfs:DCPTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="LockFeatureTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="DCPType"
                      type="wfs:DCPTypeType" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- Available Distributed Computing Platforms (DCPs) are
        listed here.  At present, only HTTP is defined. --&gt;
   &lt;xsd:complexType name="DCPTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="HTTP" type="wfs:HTTPType"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- A list of feature types available from
        this server.  The following table
        specifies the number and source of the
        various elements that are available for
        describing a feature type.

        element             number    comments
        =================   =======   ======================================
        Name                    1     this is the Name of the feature type

        Title                 0/1     an optional Meaningful title for the
                                      feature type  (e.g. "Ontario Roads"
                                      for ROADL_1M")

        Abstract              0/1     optional; no Default

        Keywords              0/1     optional; no Default

        SRS                     1     the SRS that should be used
                                      when specifying the state of
                                      the feature

        Operations            0/1     a list of available operations for
                                      the feature type

        LatLongBoundingBox      1+    bounding box(s) of data

        MetadataURL           0/1+    optional; no default
   --&gt;
   &lt;xsd:complexType name="FeatureTypeType"&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name="Name" type="xsd:QName"/&gt;
         &lt;xsd:element ref="wfs:Title" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:Abstract" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:Keywords" minOccurs="0"/&gt;
         &lt;xsd:element ref="wfs:SRS"/&gt;
         &lt;xsd:element name="Operations"
                      type="wfs:OperationsType" minOccurs="0"/&gt;
         &lt;xsd:element name="LatLongBoundingBox"
                      type="wfs:LatLongBoundingBoxType"
                      minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;xsd:element name="MetadataURL"
                      type="wfs:MetadataURLType"
                      minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="GetType"&gt;
      &lt;xsd:attribute name="onlineResource" type="xsd:string" use="required"/&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- Available HTTP request methods. --&gt;
   &lt;xsd:complexType name="HTTPType"&gt;
      &lt;xsd:choice maxOccurs="unbounded"&gt;
         &lt;!-- HTTP request methods.  The onlineResourc attribute
              indicates the URL prefix for HTTP GET requests
              (everything before the question mark and query string:
              http://hostname[:port]/path/scriptname); for HTTP POST
              requests, onlineResource is the complete URL. --&gt;
         &lt;xsd:element name="Get" type="wfs:GetType"/&gt;
         &lt;xsd:element name="Post" type="wfs:PostType"/&gt;
      &lt;/xsd:choice&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- The LatLongBoundingBox element is used to indicate the edges of
        an enclosing rectangle in the SRS of the associated feature type.
        Its purpose is to facilitate geographic searches  by indicating
        where instances of the particular feature type exist.  Since multiple
        LatLongBoundingBoxes can be specified, a WFS can indicate where
        various clusters of data may exist.  This knowledge aids client
        applications by letting them know where they should query in order
        to have a high probability of finding data. --&gt;
   &lt;xsd:complexType name="LatLongBoundingBoxType"&gt;
      &lt;xsd:attribute name="minx" type="xsd:string" use="required"/&gt;
      &lt;xsd:attribute name="miny" type="xsd:string" use="required"/&gt;
      &lt;xsd:attribute name="maxx" type="xsd:string" use="required"/&gt;
      &lt;xsd:attribute name="maxy" type="xsd:string" use="required"/&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- A Web Feature Server MAY use zero or more MetadataURL
        elements to offer detailed, standardized metadata about
        the data underneath a particular feature type.  The type
        attribute indicates the standard to which the metadata
        complies; the format attribute indicates how the metadata is
        structured.  Two types are defined at present:
        'TC211' = ISO TC211 19115;
        'FGDC'  = FGDC CSDGM. --&gt;
   &lt;xsd:complexType name="MetadataURLType"&gt;
      &lt;xsd:simpleContent&gt;
         &lt;xsd:extension base="xsd:string"&gt;
            &lt;xsd:attribute name="type" use="required"&gt;
               &lt;xsd:simpleType&gt;
                  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
                     &lt;xsd:enumeration value="TC211"/&gt;
                     &lt;xsd:enumeration value="FGDC"/&gt;
                  &lt;/xsd:restriction&gt;
               &lt;/xsd:simpleType&gt;
            &lt;/xsd:attribute&gt;
            &lt;xsd:attribute name="format" use="required"&gt;
               &lt;xsd:simpleType&gt;
                  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
                     &lt;xsd:enumeration value="XML"/&gt;
                     &lt;xsd:enumeration value="SGML"/&gt;
                     &lt;xsd:enumeration value="TXT"/&gt;
                  &lt;/xsd:restriction&gt;
               &lt;/xsd:simpleType&gt;
            &lt;/xsd:attribute&gt;
         &lt;/xsd:extension&gt;
      &lt;/xsd:simpleContent&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="OperationsType"&gt;
      &lt;xsd:choice maxOccurs="unbounded"&gt;
         &lt;xsd:element ref="wfs:Insert"/&gt;
         &lt;xsd:element ref="wfs:Update"/&gt;
         &lt;xsd:element ref="wfs:Delete"/&gt;
         &lt;xsd:element ref="wfs:Query"/&gt;
         &lt;xsd:element ref="wfs:Lock"/&gt;
      &lt;/xsd:choice&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="PostType"&gt;
      &lt;xsd:attribute name="onlineResource" type="xsd:string" use="required"/&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- The ResultFormatType type defines the output formats that the
        web feature server can generate.  The mandatory format "GML2"
        must always be available.  Individual servers can define
        additional elements representing other output formats. --&gt;
   &lt;xsd:element name="GML2" type="wfs:EmptyType"/&gt;
   &lt;xsd:complexType name="ResultFormatType"&gt;
      &lt;xsd:sequence maxOccurs="unbounded"&gt;
         &lt;xsd:element ref="wfs:GML2"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;

   &lt;!-- The SchemaDescriptionLanguageType type defines the schema languages
        that a feature server is capable of using to describe the schema
        of a feature.  Individual servers can define additional elements
        representing other schema languages but XMLSCHEMA must always
        be defined. --&gt;
   &lt;xsd:element name="XMLSCHEMA" type="wfs:EmptyType"/&gt;
   &lt;xsd:complexType name="SchemaDescriptionLanguageType"&gt;
      &lt;xsd:sequence maxOccurs="unbounded"&gt;
         &lt;xsd:element ref="wfs:XMLSCHEMA"/&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
   &lt;xsd:complexType name="EmptyType" /&gt;
&lt;/xsd:schema&gt;

</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ConformanceTests" />22. Conformance tests (normative)</h2></div></div><div xmlns="" /></div><p><a id="N400007B" />Specific conformance tests for Web Feature Services have not yet been determined and will be added in a future revision of this specification.</p><p><a id="N40000AB" />At the moment, a WFS implementation must satisfy the following system characteristics to be minimally conformant with this specification:</p><div class="orderedlist"><ol type="1"><li><p><a id="N400011B" />The GetCapabilities, DescribeFeatureType and GetFeature operations must be supported.</p></li><li><p><a id="N400017B" />The Extensible Markup Language (XML) document returned in response to a GetCapabilities request must be valid against the XML Schema definition in Annex A.4. Such validation may be performed using commonly available XML validating tools.</p></li><li><p><a id="N40001DB" />Tn response to a GetFeature operation, the WFS must be able to generate GML [2] as one of its output formats.</p></li><li><p><a id="N400023B" />The Extensible Markup Language (XML) document returned in response to a GetFeature request must validate against the schema generated in response to a DescribeFeatureType request. Such validation may be performed using commonly available XML validating tools.</p></li><li><p><a id="N400029B" />All clauses in the normative sections of this specification that use the keywords "must", "must not", "required", "shall", and "shall not" have been satisfied.</p></li></ol></div></div><div class="glossary"><div class="titlepage"><div><div><h2 class="title"><a id="N11433" />Glossary</h2></div></div><div xmlns="" /></div><div class="glossdiv"><h3 class="title">GLOSSARY</h3><dl><dt>XML File</dt><dd><p>See An XML file can be an actual operating system file or any
        valid XML stream..</p></dd><dt>2-PHASE COMMIT</dt><dd><p>See A 2-phase commit protocol ensures that execution of data
        transactions are synchronized, either all committed or all rolled back
        to each of the distributed databases..</p></dd><dt>DTD</dt><dd><p>See Document Type Definition; a description of the schema of an
        XML document..</p></dd><dt>XML-Schema</dt><dd><p>See A schema description language, similar to DTD, based on XML
        itself. Like a DTD it can be used to describe the schema of an XML
        document, but it is flexible enough to be able to describe other
        structures as well. Unlike a DTD, XML-Schema include type information.
        XML-Schema is defined at <a href="http://www.w3c.org/TR/xmlschema-1/" target="_top">http://www.w3c.org/TR/xmlschema-1/</a>..</p></dd><dt>XPath</dt><dd><p>See An XPath expression is a path expression, similar to the
        path expressions used to identify operating system files, that is used
        to reference elements in an XML document. XPath expressions are
        defined at <a href="http://www.w3c.org/TR/Xpath/" target="_top">http://www.w3c.org/TR/Xpath/</a>..</p></dd></dl></div></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a id="N11458" />Bibliography</h2></div></div><div xmlns="" /></div><div class="biblioentry"><p><span class="title"><i>OpenGIS Implementation Specification #01-047r2: Web Map Service
      Implementation Specification</i>. </span><span class="author"><span class="firstname">Jeff</span> <span xmlns="" class="surname">de La Beaujardière</span>. </span><span xmlns="" class="date">June 2001. </span></p></div><div class="biblioentry"><p><span class="title"><i>OpenGIS Discussion Paper: Transaction Encoding Specification
      Version 0.0.5</i>. </span><span class="author"><span class="firstname">Panagiotis</span> <span xmlns="" class="surname">Vretanos</span>. </span><span xmlns="" class="date">March 2000. </span></p></div><div class="biblioentry"><p><span class="title"><i>Spatial Object Transfer Format (SOTF): Initial High-Level Design,
      Version 1.2</i>. </span><span class="author"><span class="firstname">D</span> <span xmlns="" class="surname">Arctur</span>. </span><span xmlns="" class="author"><span class="firstname">P</span> <span xmlns="" class="surname">Pilkington</span>. </span><span xmlns="" class="author"><span class="firstname">A</span> <span xmlns="" class="surname">Cuthbert</span>. </span><span xmlns="" class="orgname">Laser-Scan Inc.. </span><span class="date">November 1999. </span></p></div><div class="biblioentry"><p><span class="title"><i>Unified Modeling Language Reference Manual</i>. </span><span class="author"><span class="firstname">James</span> <span xmlns="" class="surname">Rumbach</span>. </span><span xmlns="" class="date">1999. </span></p></div><div class="biblioentry"><p><span class="title"><i>XML Media Types http://www.ietf.org/rfc/rfc3023.txt</i>. </span><span class="author"><span class="firstname">M</span> <span xmlns="" class="surname">Murata</span>. </span><span xmlns="" class="author"><span class="firstname">S</span> <span xmlns="" class="surname">St.Laurent</span>. </span><span xmlns="" class="author"><span class="firstname">D</span> <span xmlns="" class="surname">Kohn</span>. </span><span xmlns="" class="date">January 2001. </span></p></div></div><div class="footnotes"><br /><hr align="left" width="100" /><div class="footnote"><p><sup>[<a href="#N106C0" id="ftn.N106C0">1</a>] </sup>SIN = Social Insurance Number</p></div></div></div></body></html>